<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æ­é…GitHub Actionsä¸ºReleaseå¢åŠ Changelog</title>
      <link href="2023/07/16/%E6%90%AD%E9%85%8DGitHub%20Actions%E4%B8%BARelease%E5%A2%9E%E5%8A%A0Changelog%202b9af1cd39284deb8dcae3d3720abf46/"/>
      <url>2023/07/16/%E6%90%AD%E9%85%8DGitHub%20Actions%E4%B8%BARelease%E5%A2%9E%E5%8A%A0Changelog%202b9af1cd39284deb8dcae3d3720abf46/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨æµè§ˆGitHubä¸Šè®¸å¤šçŸ¥åçš„ç¤¾åŒºé¡¹ç›®æ—¶ï¼Œæ€»èƒ½åœ¨Releaseä¸­çœ‹åˆ°å„ç§ä¸åŒçš„Changelogï¼Œå…¶ä¸­é€šå¸¸åŒ…å«è¿™ä»£ç çš„æäº¤ä¿¡æ¯ï¼Œæœ‰ä¸€äº›åˆ™æ˜¯é‡å¤§çš„æ›´æ–°ç‚¹ï¼Œå…¶ä¸­æœ‰äººå·¥è¿›è¡ŒChangelogç¼–å†™çš„ï¼Œä¹Ÿæœ‰è®¸å¤šæ˜¯ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·ç”Ÿæˆçš„ã€‚</p><img src="https://s2.loli.net/2023/07/16/kRPThvUOj614wFM.png" style="zoom:25%;" /><p>Goframeé¡¹ç›®çš„Changelog</p><p>äºæ˜¯æˆ‘ä»¬å°è¯•åœ¨Speed-Croné¡¹ç›®ä¸­å¼•å…¥è‡ªåŠ¨åŒ–çš„Changelogç”Ÿæˆå·¥å…·ï¼Œå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆå¥½çœ‹åˆå®ç”¨çš„Changelogã€‚</p><h3 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h3><img src="https://s2.loli.net/2023/07/16/1LBJonWKgNpUmZH.png" style="zoom: 25%;" /><h2 id="ç›®å‰å¸¸è§çš„Changelogè‡ªåŠ¨åŒ–å·¥å…·"><a href="#ç›®å‰å¸¸è§çš„Changelogè‡ªåŠ¨åŒ–å·¥å…·" class="headerlink" title="ç›®å‰å¸¸è§çš„Changelogè‡ªåŠ¨åŒ–å·¥å…·"></a>ç›®å‰å¸¸è§çš„Changelogè‡ªåŠ¨åŒ–å·¥å…·</h2><p>ç›®å‰ç¤¾åŒºä¸­æœ‰ååˆ†å¤šä¸åŒé£æ ¼ä¸ç”¨æ³•çš„Changelogè‡ªåŠ¨åŒ–ç”Ÿæˆå·¥å…·ï¼Œæ¯”å¦‚npmä¸­çš„ <strong><strong>auto-changelog</strong></strong> ï¼Œæˆ–è€…GitHubå®˜æ–¹çš„<strong>Automatically generated release notes</strong>ï¼Œè€Œä»Šå¤©é€‰ç”¨çš„ï¼Œåˆ™æ˜¯ä¸€æ¬¾åœ¨GitHubä¸ŠçŸ¥ååº¦è¾ƒé«˜çš„ <strong><a href="https://github.com/orhun/git-cliff">git-cliff</a> ï¼Œgit-cliff</strong> æ˜¯ç”¨rustè¯­è¨€ç¼–å†™çš„è‡ªåŠ¨åŒ–ç”Ÿäº§å˜æ›´æ—¥å¿—çš„å·¥å…·ï¼Œå¯ä»¥é€šè¿‡ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶åœ¨æœ¬åœ°ç”Ÿæˆ Changelog ï¼Œæˆ–è€…å¼•å…¥åˆ°GitHub Actionsä¸­è¿›è¡Œä½¿ç”¨ã€‚</p><img src="https://s2.loli.net/2023/07/16/dgH8boyW4SRMOQN.png" style="zoom:25%;" /><p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨git-cliffå®˜æ–¹çš„Actionså¥—ä»¶ä¸ºReleaseé˜¶æ®µç”ŸæˆChangelogã€‚</p><h2 id="é…ç½®æ–¹å¼"><a href="#é…ç½®æ–¹å¼" class="headerlink" title="é…ç½®æ–¹å¼"></a>é…ç½®æ–¹å¼</h2><p><a href="https://git-cliff.org/docs/github-actions/git-cliff-action">https://git-cliff.org/docs/github-actions/git-cliff-action</a></p><p>åœ¨å®˜æ–¹çš„æ–‡æ¡£ä¸­å¯¹äºå¦‚ä½•åœ¨Actionsä¸­ä½¿ç”¨git-cliffæœ‰å¾ˆè¯¦ç»†çš„ä»‹ç»ã€‚é€šè¿‡åœ¨workflowæ–‡ä»¶ä¸­å¼•å…¥å¹¶é…ç½®git-cliff Actionså³å¯ã€‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Check</span> <span class="string">out</span> <span class="string">repository</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">fetch-depth:</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Generate</span> <span class="string">a</span> <span class="string">changelog</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">orhun/git-cliff-action@v2</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">config:</span> <span class="string">cliff.toml</span></span><br><span class="line">    <span class="attr">args:</span> <span class="string">--verbose</span></span><br><span class="line">  <span class="attr">env:</span></span><br><span class="line">    <span class="attr">OUTPUT:</span> <span class="string">CHANGELOG.md</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨é»˜è®¤çš„cliff.tomlï¼Œæˆ–è€…æˆ‘ä»¬è‡ªå®šä¹‰æ›´ç¬¦åˆæˆ‘ä»¬éœ€æ±‚çš„git-cliffé…ç½®æ–‡ä»¶ã€‚</p><img src="https://s2.loli.net/2023/07/16/G4mEyViUQHzuSR7.png" style="zoom: 50%;" /><p>åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªgit-cliffæ–‡ä»¶å¤¹ä»¥ç”¨æ¥å­˜æ”¾git-cliffçš„é…ç½®æ–‡ä»¶ï¼Œç°åœ¨ç›´æ¥å…ˆæ‘†ä¸Šå®Œæ•´çš„é…ç½®æ–‡ä»¶ã€‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># git-cliff ~ configuration file</span></span><br><span class="line"><span class="comment"># https://git-cliff.org/docs/configuration</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Lines starting with &quot;#&quot; are comments.</span></span><br><span class="line"><span class="comment"># Configuration options are organized into tables and keys.</span></span><br><span class="line"><span class="comment"># See documentation for more information on available options.</span></span><br><span class="line"></span><br><span class="line">[<span class="string">changelog</span>]</span><br><span class="line"><span class="comment"># changelog header</span></span><br><span class="line"><span class="string">header</span> <span class="string">=</span> <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string"># Changelog\n</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment"># template for the changelog body</span></span><br><span class="line"><span class="comment"># https://tera.netlify.app/docs/</span></span><br><span class="line"><span class="string">body</span> <span class="string">=</span> <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">&#123;% if version %&#125;\</span></span><br><span class="line"><span class="string">    ## Release <span class="template-variable">&#123;&#123; version | trim_start_matches(pat=&quot;v&quot;) &#125;&#125;</span> - <span class="template-variable">&#123;&#123; timestamp | date(format=&quot;%Y-%m-%d&quot;) &#125;&#125;</span></span></span><br><span class="line"><span class="string">&#123;% else %&#125;\</span></span><br><span class="line"><span class="string">    ## [unreleased]</span></span><br><span class="line"><span class="string">&#123;% endif %&#125;\</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#123;% for group, commits in commits | group_by(attribute=&quot;</span><span class="string">group&quot;)</span> <span class="string">%&#125;</span></span><br><span class="line">    <span class="comment">### &#123;&#123; group | upper_first &#125;&#125;</span></span><br><span class="line">    &#123;<span class="string">%</span> <span class="string">for</span> <span class="string">commit</span> <span class="string">in</span> <span class="string">commits</span> <span class="string">%</span>&#125;</span><br><span class="line">        <span class="bullet">-</span> &#123;&#123; <span class="string">commit.message</span> <span class="string">|</span> <span class="string">upper_first</span> &#125;&#125; <span class="string">([&#123;&#123;</span> <span class="string">commit.id</span> <span class="string">|</span> <span class="string">truncate(length=7,</span> <span class="string">end=&quot;&quot;)</span> <span class="string">&#125;&#125;](https://github.com/hamster1963/Speed-Cron/commit/&#123;&#123;</span> <span class="string">commit.id</span> <span class="string">&#125;&#125;))\</span></span><br><span class="line">          &#123;<span class="string">%</span> <span class="string">for</span> <span class="string">footer</span> <span class="string">in</span> <span class="string">commit.footers</span> <span class="string">-%</span>&#125;</span><br><span class="line">            <span class="string">,</span> &#123;&#123; <span class="string">footer.token</span> &#125;&#125;&#123;&#123; <span class="string">footer.separator</span> &#125;&#125;&#123;&#123; <span class="string">footer.value</span> &#125;&#125;<span class="string">\</span></span><br><span class="line">          &#123;<span class="string">%</span> <span class="string">endfor</span> <span class="string">%</span>&#125;<span class="string">\</span></span><br><span class="line">    &#123;<span class="string">%</span> <span class="string">endfor</span> <span class="string">%</span>&#125;</span><br><span class="line">&#123;<span class="string">%</span> <span class="string">endfor</span> <span class="string">%</span>&#125;<span class="string">\n</span></span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string"># remove the leading and trailing whitespace from the template</span></span><br><span class="line"><span class="string">trim = true</span></span><br><span class="line"><span class="string"># changelog footer</span></span><br><span class="line"><span class="string">footer = &quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[git]</span></span><br><span class="line"><span class="string"># parse the commits based on https://www.conventionalcommits.org</span></span><br><span class="line"><span class="string">conventional_commits = true</span></span><br><span class="line"><span class="string"># filter out the commits that are not conventional</span></span><br><span class="line"><span class="string">filter_unconventional = true</span></span><br><span class="line"><span class="string"># process each line of a commit as an individual commit</span></span><br><span class="line"><span class="string">split_commits = true</span></span><br><span class="line"><span class="string"># regex for preprocessing the commit messages</span></span><br><span class="line"><span class="string">commit_preprocessors = [</span></span><br><span class="line"><span class="string">  &#123; pattern = &#x27;\((\w+\s)?#([0-9]+)\)&#x27;, replace = &quot;</span><span class="string">([#$&#123;2&#125;](https://github.com/orhun/git-cliff/issues/$&#123;2&#125;))&quot;</span> <span class="string">&#125;,</span></span><br><span class="line"><span class="string">]</span></span><br><span class="line"><span class="comment"># regex for parsing and grouping commits</span></span><br><span class="line"><span class="string">commit_parsers</span> <span class="string">=</span> [</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^feat&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 0 --&gt;â›°ï¸  Features&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^fix&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 1 --&gt;ğŸ› Bug Fixes&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^doc&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 3 --&gt;ğŸ“š Documentation&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^perf&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 4 --&gt;âš¡ Performance&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^refactor&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 2 --&gt;ğŸšœ Refactor&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^style&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 5 --&gt;ğŸ¨ Styling&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^test&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 6 --&gt;ğŸ§ª Testing&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^chore\\(release\\): prepare for&quot;</span>, <span class="string">skip</span> <span class="string">=</span> <span class="literal">true</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^chore\\(pr\\)&quot;</span>, <span class="string">skip</span> <span class="string">=</span> <span class="literal">true</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^chore\\(pull\\)&quot;</span>, <span class="string">skip</span> <span class="string">=</span> <span class="literal">true</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^chore&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 7 --&gt;âš™ï¸ Miscellaneous Tasks&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">body</span> <span class="string">=</span> <span class="string">&quot;.*security&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 8 --&gt;ğŸ›¡ï¸ Security&quot;</span> &#125;,</span><br><span class="line">]</span><br><span class="line"><span class="comment"># protect breaking changes from being skipped due to matching a skipping commit_parser</span></span><br><span class="line"><span class="string">protect_breaking_commits</span> <span class="string">=</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># filter out the commits that are not matched by commit parsers</span></span><br><span class="line"><span class="string">filter_commits</span> <span class="string">=</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># glob pattern for matching git tags</span></span><br><span class="line"><span class="string">tag_pattern</span> <span class="string">=</span> <span class="string">&quot;v[0-9]*&quot;</span></span><br><span class="line"><span class="comment"># regex for skipping tags</span></span><br><span class="line"><span class="string">skip_tags</span> <span class="string">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment"># regex for ignoring tags</span></span><br><span class="line"><span class="string">ignore_tags</span> <span class="string">=</span> <span class="string">&quot;v.*-beta.*&quot;</span></span><br><span class="line"><span class="comment"># sort the tags topologically</span></span><br><span class="line"><span class="string">topo_order</span> <span class="string">=</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># sort the commits inside sections by oldest/newest order</span></span><br><span class="line"><span class="string">sort_commits</span> <span class="string">=</span> <span class="string">&quot;oldest&quot;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­çœ‹å‡ºï¼Œä¸»è¦çš„é…ç½®å—åˆ†ä¸ºChangelogéƒ¨åˆ†ä¸GitHubéƒ¨åˆ†ï¼Œåˆ†åˆ«å¯¹Changelogçš„æ ¼å¼ä»¥åŠè¯»å–GitHubçš„è¡Œä¸ºè¿›è¡Œé…ç½®ã€‚</p><p>åœ¨Changelogéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†æ¯ä¸€è¡Œçš„commitéƒ½çœ‹åšä¸€ä¸ªç‹¬ç«‹çš„å˜æ›´ï¼ˆè™½ç„¶åœ¨å¤šäººé¡¹ç›®ä¸­ä¸å¤ªå»ºè®®ï¼‰ã€‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># process each line of a commit as an individual commit</span></span><br><span class="line"><span class="string">split_commits</span> <span class="string">=</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>å¹¶ä¸”åœ¨å˜æ›´çš„æœ«å°¾é™„ä¸Šå¯¹åº”çš„commit_idï¼Œæ–¹ä¾¿ç›´æ¥åœ¨Changelogé¡µé¢å¯ä»¥ç›´æ¥ç‚¹å‡»è·³è½¬åˆ°å¯¹åº”çš„commitå˜æ›´å¯¹æ¯”é¡µé¢ä¸­ã€‚</p><p>åœ¨å˜æ›´ç±»åˆ«ä¸­ï¼Œåˆ†ä¸º:</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">commit_parsers</span> <span class="string">=</span> [</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^feat&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 0 --&gt;â›°ï¸  Features&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^fix&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 1 --&gt;ğŸ› Bug Fixes&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^doc&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 3 --&gt;ğŸ“š Documentation&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^perf&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 4 --&gt;âš¡ Performance&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^refactor&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 2 --&gt;ğŸšœ Refactor&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^style&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 5 --&gt;ğŸ¨ Styling&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^test&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 6 --&gt;ğŸ§ª Testing&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^chore\\(release\\): prepare for&quot;</span>, <span class="string">skip</span> <span class="string">=</span> <span class="literal">true</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^chore\\(pr\\)&quot;</span>, <span class="string">skip</span> <span class="string">=</span> <span class="literal">true</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^chore\\(pull\\)&quot;</span>, <span class="string">skip</span> <span class="string">=</span> <span class="literal">true</span> &#125;,</span><br><span class="line">  &#123; <span class="string">message</span> <span class="string">=</span> <span class="string">&quot;^chore&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 7 --&gt;âš™ï¸ Miscellaneous Tasks&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">body</span> <span class="string">=</span> <span class="string">&quot;.*security&quot;</span>, <span class="string">group</span> <span class="string">=</span> <span class="string">&quot;&lt;!-- 8 --&gt;ğŸ›¡ï¸ Security&quot;</span> &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆå¤šç±»ï¼Œé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…åˆ†ç±»åˆ°ä¸åŒçš„ç±»åˆ«ä¸­ã€‚</p><p>å¯¹äºç‰ˆæœ¬å·çš„æ ¼å¼ï¼šæ­£å¼åˆ†å‘çš„ç‰ˆæœ¬é‡‡ç”¨<code>v.0.0.1</code>çš„æ ¼å¼è¿›è¡Œ,å¦‚ä¸ºæµ‹è¯•ç‰ˆåˆ™æ˜¯<code>v0.0.1-beta.1</code>çš„ç‰ˆæœ¬æ ¼å¼ã€‚å› æ­¤éœ€è¦åœ¨tag_patternä¸ignore-tagsä¸­å®šä¹‰åŒºåˆ†æ­£å¼ç‰ˆä¸æµ‹è¯•ç‰ˆæœ¬çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># glob pattern for matching git tags</span></span><br><span class="line"><span class="string">tag_pattern</span> <span class="string">=</span> <span class="string">&quot;v[0-9]*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># regex for ignoring tags</span></span><br><span class="line"><span class="string">ignore_tags</span> <span class="string">=</span> <span class="string">&quot;v.*-beta.*&quot;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å®šä¹‰ä¹‹åï¼Œæ­£å¼ç‰ˆè¿›è¡Œç”Ÿæˆå˜æ›´æ—¥å¿—æ—¶ä¼šå¯»æ‰¾ä¸Šä¸€æ¡æ­£å¼ç‰ˆçš„ç‰ˆæœ¬è®°å½•ï¼Œä¼šè·³è¿‡ä¸æµ‹è¯•ç‰ˆæœ¬çš„æ¯”å¯¹ï¼Œè¿™æ ·å­å°±å¯ä»¥å°†æµ‹è¯•è¿‡ç¨‹ä¸­çš„å˜æ›´æ—¥å¿—ä¹Ÿä¸€å¹¶åŒ…å«åˆ°æœ€åçš„æ­£å¼ç‰ˆä¸­ã€‚</p><p>ç›®å‰ä¸ºæ­¢åŸºç¡€çš„é…ç½®å°±å®Œæˆäº†ã€‚</p><h2 id="é…ç½®GitHub-Actions"><a href="#é…ç½®GitHub-Actions" class="headerlink" title="é…ç½®GitHub Actions"></a>é…ç½®GitHub Actions</h2><p>æˆ‘ä»¬åœ¨jobsä¸­å®šä¹‰ä¸€ä¸ªjobä¸“é—¨ç”¨ä»¥ç”ŸæˆChangelogæ–‡æœ¬å¹¶æ˜¾ç¤ºåœ¨å¯¹åº”çš„Releaseå˜æ›´æ—¥å¿—ä¸­ã€‚</p><p>åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå°†è·¯å¾„æ”¹ä¸ºä»“åº“ä¸­å­˜æ”¾git-cliffé…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚</p><p>åœ¨Release stepä¸­ï¼Œå°†ç”Ÿæˆçš„Changelogæ–‡æœ¬æ¨é€è‡³å¯¹åº”çš„å˜æ›´æ—¥å¿—ä¸­ã€‚</p><p>å®Œæ•´Release workflowå¦‚ä¸‹:</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">build-go-binary</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">release:</span></span><br><span class="line">    <span class="attr">types:</span> [<span class="string">created</span>] <span class="comment"># è¡¨ç¤ºåœ¨åˆ›å»ºæ–°çš„ Release æ—¶è§¦å‘</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">changelog:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Generate</span> <span class="string">changelog</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">outputs:</span></span><br><span class="line">      <span class="attr">release_body:</span> <span class="string">$&#123;&#123;</span> <span class="string">steps.git-cliff.outputs.content</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">fetch-depth:</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Generate</span> <span class="string">a</span> <span class="string">changelog</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">orhun/git-cliff-action@v2</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">git-cliff</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">config:</span> <span class="string">git-cliff/cliff.toml</span></span><br><span class="line">          <span class="attr">args:</span> <span class="string">-vv</span> <span class="string">--latest</span> <span class="string">--strip</span> <span class="string">&#x27;footer&#x27;</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">OUTPUT:</span> <span class="string">CHANGES.md</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Release</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">softprops/action-gh-release@v1</span></span><br><span class="line">        <span class="attr">if:</span> <span class="string">startsWith(github.ref,</span> <span class="string">&#x27;refs/tags/&#x27;</span><span class="string">)</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">body:</span> <span class="string">$&#123;&#123;</span> <span class="string">steps.git-cliff.outputs.content</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">GITHUB_REPOSITORY:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.repository</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">build-go-binary:</span></span><br><span class="line">    <span class="string">...</span></span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>åœ¨workflowä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ°<code>$&#123;&#123; secrets.GITHUB_TOKEN &#125;&#125;</code>ä½œä¸ºèº«ä»½éªŒè¯ï¼Œéœ€è¦åœ¨è®¾ç½®ä¸­å¼€å¯å¯¹äºä»“åº“çš„è¯»å†™æƒé™ï¼Œè¯·å‚è€ƒä¸Šç¯‡æ–‡ç« ä¸­çš„é…ç½®æ­¥éª¤ã€‚</p><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>å¥½çœ‹çš„Release Changelogä¹Ÿæ˜¯å¸å¼•æ›´å¤šç”¨æˆ·çš„ä¸€ä¸ªæœ‰æ•ˆæ‰‹æ®µï¼ŒåŒæ—¶å¯¹äºåç»­çš„ç»´æŠ¤äººå‘˜ï¼Œä¹Ÿå¯ä»¥ç®€å•åœ°é€šè¿‡Changelogå¿«é€Ÿäº†è§£åˆ°ä¸åŒç‰ˆæœ¬å·ä¹‹é—´çš„å·®å¼‚ã€‚Hope u enjoy!</p>]]></content>
      
      
      <categories>
          
          <category> GitHub </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤šDockerä»“åº“Github Actionsæµç¨‹</title>
      <link href="2023/07/13/%E5%A4%9ADocker%E4%BB%93%E5%BA%93Github%20Actions%E6%B5%81%E7%A8%8B%20d5807c069f7742fd9fe5d9081ca00f0b/"/>
      <url>2023/07/13/%E5%A4%9ADocker%E4%BB%93%E5%BA%93Github%20Actions%E6%B5%81%E7%A8%8B%20d5807c069f7742fd9fe5d9081ca00f0b/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å®ç°ç›®çš„"><a href="#å®ç°ç›®çš„" class="headerlink" title="å®ç°ç›®çš„"></a>å®ç°ç›®çš„</h2><p>å…¬å¸åç«¯çš„æœåŠ¡é‡‡ç”¨Dockeré•œåƒçš„æ–¹å¼è¿›è¡Œåˆ†å‘ä¸éƒ¨ç½²ï¼Œä¹‹å‰é€‰ç”¨DockerHubä½œä¸ºæ‰˜ç®¡å¹³å°ï¼Œä½†ç”±äºDockerHubå¯¹äºç§æœ‰ä»“åº“æ•°çš„é™åˆ¶ä»¥åŠæœ€è¿‘å„ç§ç½‘ç»œçŠ¶å†µé¢‘å‡ºï¼Œé€‰ç”¨GitHubåœ¨2020å¹´æ¨å‡ºçš„ghcrä»¥åŠé˜¿é‡Œäº‘çš„å®¹å™¨é•œåƒæœåŠ¡éƒ½å¯ä»¥æ›´å¥½çš„æ»¡è¶³å…¬å¸å†…éƒ¨å¯¹äºå®‰å…¨ä»¥åŠæŒç»­é›†æˆçš„éœ€æ±‚ã€‚</p><p><img src="https://s2.loli.net/2023/07/13/pInFAY5vzOTUWgM.png"></p><p><img src="https://s2.loli.net/2023/07/13/fIvj8pDaidxABLU.png"></p><h2 id="GitHub-Actions"><a href="#GitHub-Actions" class="headerlink" title="GitHub Actions"></a>GitHub Actions</h2><p>æ•´ä¸ªCICDçš„æµç¨‹éƒ½é‡‡ç”¨GitHub Actionsæ¥è¿›è¡Œï¼Œé‡‡ç”¨GitHub Actionsçš„ä¼˜ç‚¹æœ‰å¾ˆå¤šï¼Œä¸ä»…å¯ä»¥å¾ˆæ–¹ä¾¿çš„çœ‹åˆ°æ•´ä¸ªè‡ªåŠ¨åŒ–çš„è¿›åº¦ï¼Œè€Œä¸”ä»ç»´æŠ¤æˆæœ¬æ¥çœ‹åªéœ€è¦ç®¡ç†å¥½GitHub Actionsçš„é…ç½®æ–‡ä»¶å³å¯ï¼Œé…ç½®æ–‡ä»¶ä¹Ÿå«åšå·¥ä½œæµæ–‡ä»¶(workflow)ï¼Œé‡‡ç”¨ymlæ ¼å¼æ–‡ä»¶è¿›è¡Œç¼–å†™ã€‚</p><p><img src="https://s2.loli.net/2023/07/13/brjPJ5D6gzF7ikW.png"></p><h2 id="æ¨é€è‡³ghcrä¸é˜¿é‡Œäº‘"><a href="#æ¨é€è‡³ghcrä¸é˜¿é‡Œäº‘" class="headerlink" title="æ¨é€è‡³ghcrä¸é˜¿é‡Œäº‘"></a>æ¨é€è‡³ghcrä¸é˜¿é‡Œäº‘</h2><p>åœ¨Actionsä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨å‡ ä¸ªæ ¸å¿ƒçš„æ­¥éª¤æ¥è¿›è¡Œé•œåƒçš„æ‰“åŒ…ï¼Œæ ‡è®°ä¸åˆ†å‘ã€‚</p><ol><li>é¦–å…ˆè¿›è¡Œä¸åŒåº“çš„ç™»å½•æ“ä½œï¼Œç›®çš„æ˜¯è·å–å¯¹åº”ä»“åº“çš„æ“ä½œæƒé™ã€‚</li><li>å¯¹é•œåƒè¿›è¡Œä¸åŒä»“åº“çš„å¯¹åº”æ ‡è®°ï¼Œä½¿å…¶å¯ä»¥ä¸Šä¼ åˆ°å¯¹åº”çš„ä»“åº“ä¸­ã€‚</li><li>è¿›è¡Œåˆ†å‘ã€‚</li></ol><p>åœ¨GitHub Actionsä¸­æœ‰è®¸å¤šå·²ç»å°è£…å¥½æ ¸å¿ƒé€»è¾‘çš„Actionå¯ä¾›ä½¿ç”¨ï¼Œæœ‰å®˜æ–¹çš„ä¹Ÿæœ‰ç¬¬ä¸‰æ–¹çš„ï¼Œåœ¨æœ¬Actionä¸­ä¸Dockerç›¸å…³çš„æ“ä½œéƒ½é‡‡ç”¨äº†dockerå®˜æ–¹å‡ºå“çš„Actionã€‚</p><h2 id="ç™»å½•æ“ä½œ"><a href="#ç™»å½•æ“ä½œ" class="headerlink" title="ç™»å½•æ“ä½œ"></a>ç™»å½•æ“ä½œ</h2><p>ç”±äºghcræ˜¯GitHubå®˜æ–¹çš„é•œåƒåº“ï¼Œå› æ­¤ç”¨æˆ·åä¸å¯†ç å¹¶ä¸éœ€è¦æ˜¾å¼å®šä¹‰å‡ºæ¥ï¼Œç”¨æˆ·åç”¨<code>$&#123;&#123; github.repository_owner &#125;&#125;</code> ,passwordç”¨<code>$&#123;&#123; secrets.GITHUB_TOKEN &#125;&#125;</code>å³å¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šä¼ è‡³ghcréœ€è¦å¼€æ”¾github_tokenå¯¹äºåº“çš„è¯»å†™æƒé™ï¼Œå¯åœ¨ä»“åº“è®¾ç½®ä¸­å¼€å¯ã€‚</p><p>åœ¨Settings-Actions-Generalä¸­ï¼Œå°†Workflow permissionsçš„æƒé™å‹¾é€‰ä¸ºè¯»å†™æƒé™ã€‚</p><p><img src="https://s2.loli.net/2023/07/13/iM297FtILgjeZRr.png"></p><p><img src="https://s2.loli.net/2023/07/13/bFVQTH7i3dOKE4r.png"></p><p>å¯¹äºé˜¿é‡Œäº‘çš„é•œåƒç®¡ç†æœåŠ¡ï¼Œåˆ™éœ€è¦åœ¨secretä¸­å®šä¹‰ä»é˜¿é‡Œäº‘è·å–çš„ç”¨æˆ·åä¸å¯†ç ã€‚</p><p><img src="https://s2.loli.net/2023/07/13/br5meVGHh6nto2P.png"></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Login</span> <span class="string">to</span> <span class="string">GitHub</span> <span class="string">Container</span> <span class="string">Registry</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">docker/login-action@v2</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">  <span class="attr">registry:</span> <span class="string">ghcr.io</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.repository_owner</span> <span class="string">&#125;&#125;</span></span><br><span class="line"><span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Login</span> <span class="string">to</span> <span class="string">AliYun</span> <span class="string">Container</span> <span class="string">Registry</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">docker/login-action@v2</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line"><span class="attr">registry:</span> <span class="string">registry.cn-guangzhou.aliyuncs.com</span></span><br><span class="line"><span class="attr">username:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.ALI_USERNAME</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.ALI_TOKEN</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure><h2 id="å¯¹é•œåƒè¿›è¡Œæ ‡è®°"><a href="#å¯¹é•œåƒè¿›è¡Œæ ‡è®°" class="headerlink" title="å¯¹é•œåƒè¿›è¡Œæ ‡è®°"></a>å¯¹é•œåƒè¿›è¡Œæ ‡è®°</h2><p>åœ¨imagesä¸€æ ä¸­å¡«å…¥ghcrä¸é˜¿é‡Œäº‘çš„é•œåƒåœ°å€å³å¯ï¼Œä¸‹æ–¹çš„tagsä¸ºæ ‡è®°çš„é€»è¾‘ã€‚</p><p>é»˜è®¤é‡‡ç”¨latestä¸å½“å‰tagç‰ˆæœ¬å·å³å¯ã€‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Extract</span> <span class="string">metadata</span> <span class="string">(tags,</span> <span class="string">labels)</span> <span class="string">for</span> <span class="string">Docker</span></span><br><span class="line">  <span class="attr">id:</span> <span class="string">meta</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">docker/metadata-action@v4</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">  <span class="attr">images:</span> <span class="string">|</span></span><br><span class="line">            <span class="string">ghcr.io/$&#123;&#123;</span> <span class="string">github.repository</span> <span class="string">&#125;&#125;</span></span><br><span class="line">            <span class="string">registry.cn-guangzhou.aliyuncs.com/hamster-home/kes-speed-backend</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="string">|</span></span><br><span class="line">            <span class="string">type=raw,value=latest</span></span><br><span class="line">            <span class="string">type=ref,event=tag</span></span><br></pre></td></tr></table></figure><h2 id="è¿›è¡Œé•œåƒçš„æ¨é€"><a href="#è¿›è¡Œé•œåƒçš„æ¨é€" class="headerlink" title="è¿›è¡Œé•œåƒçš„æ¨é€"></a>è¿›è¡Œé•œåƒçš„æ¨é€</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">and</span> <span class="string">push</span> <span class="string">Docker</span> <span class="string">image</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">docker/build-push-action@v4</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">push:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="string">$&#123;&#123;</span> <span class="string">steps.meta.outputs.tags</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">labels:</span> <span class="string">$&#123;&#123;</span> <span class="string">steps.meta.outputs.labels</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure><h2 id="æ¨é€åç»­"><a href="#æ¨é€åç»­" class="headerlink" title="æ¨é€åç»­"></a>æ¨é€åç»­</h2><p>æ¨é€åå³å¯åœ¨GitHubä»¥åŠé˜¿é‡Œäº‘ä¸­çœ‹åˆ°æœ€æ–°æ¨é€çš„é•œåƒã€‚</p><p><img src="https://s2.loli.net/2023/07/13/S14LRtukzZ2HcI9.png"></p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨Goæ„å»ºä¸€å¥—ç½‘ç»œç›‘æ§ç³»ç»Ÿ</title>
      <link href="2023/07/02/%E7%BD%91%E7%BB%9C%E7%9B%91%E6%8E%A7%20683f1c2b3b3d4a30bef2a2e52259eef2/"/>
      <url>2023/07/02/%E7%BD%91%E7%BB%9C%E7%9B%91%E6%8E%A7%20683f1c2b3b3d4a30bef2a2e52259eef2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="é¡¹ç›®èƒŒæ™¯"><a href="#é¡¹ç›®èƒŒæ™¯" class="headerlink" title="é¡¹ç›®èƒŒæ™¯"></a>é¡¹ç›®èƒŒæ™¯</h2><p>å…¥èŒç¬¬äºŒå¤©ï¼Œä¸»ç®¡å°±é©¬ä¸Šä¸‹æ¥äº†ä¸€ä¸ªéœ€æ±‚ï¼Œç›‘æ§ç»ˆç«¯çš„ç½‘ç»œã€‚åŸå› æ˜¯å…¬å¸çš„ç½‘ç»œå¾ˆå·®ï¼Œæ€»æ˜¯æœ‰åŒäº‹åæ˜ ç½‘ç»œå¾ˆæ…¢ï¼Œé’‰é’‰ä¸æ–­æ–­å¼€é‡è¿ï¼Œè¿æ¥æœ¬åœ°çš„ç¾¤æ™–æ–‡ä»¶æœåŠ¡å™¨ä¹Ÿæœ‰é—®é¢˜ï¼Œä½†ç›®å‰çš„åº”å¯¹æ‰‹æ®µä¸»è¦å°±æ˜¯é‡å¯è·¯ç”±å™¨ä¸æœåŠ¡å™¨ï¼Œå› æ­¤æƒ³æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥ç¨³å®šç›‘æ§çš„æ–¹æ³•ã€‚</p><h2 id="ç½‘ç»œæ¶æ„"><a href="#ç½‘ç»œæ¶æ„" class="headerlink" title="ç½‘ç»œæ¶æ„"></a>ç½‘ç»œæ¶æ„</h2><p>å…¬å¸ä¸»è¥ä¸šåŠ¡æ˜¯è·¨å¢ƒç”µå•†ï¼Œå› æ­¤åœ¨å®½å¸¦çš„æ•°é‡ä¸Šï¼Œå…¶ä¸­æœ‰2æ¡ä¸ºä¸“çº¿å®½å¸¦ï¼Œä¸éœ€è¦å¤ªå¤šæ“å¿ƒï¼Œå…¶ä»–ä¾‹å¦‚è¿è¥ç”¨1æ¡ç”µä¿¡å®½å¸¦ï¼Œè®¾è®¡ï¼Œå¼€å‘ä¸ITéƒ¨é—¨å…±ç”¨2æ¡å®½å¸¦ï¼Œåˆ†åˆ«æ˜¯ç”µä¿¡çš„500Mä¸è”é€šçš„1000Må®½å¸¦ï¼Œä»ç½‘ç»œè®¾å¤‡ä¸Šæ¥çœ‹å°±æ¯”è¾ƒæœ‰æ„æ€äº†ã€‚</p><ol><li>è”é€šå…‰çŒ«â†’è’²å…¬è‹±è·¯ç”±</li><li>ç”µä¿¡å…‰çŒ«â†’è’²å…¬è‹±è·¯ç”±</li><li>ç”µä¿¡å…‰çŒ«â†’è’²å…¬è‹±è·¯ç”±</li></ol><p>é‡‡ç”¨äº†é“¾è·¯èšåˆçš„å½¢å¼ï¼Œå°†ä¸¤æ¡å®½å¸¦ç»“åˆä¸ºä¸€æ¡å®½å¸¦è¿›è¡Œä½¿ç”¨ï¼Œè’²å…¬è‹±åå°è®¾ç½®ä¸­ä¸ºåŒwanæ¨¡å¼ï¼Œç”±è’²å…¬è‹±å¯¹æ•°æ®åŒ…çš„åˆ†å‘è¿›è¡Œç®¡ç†ã€‚</p><p>è€Œåœ¨APæ–¹é¢ï¼Œéƒ½é‡‡ç”¨äº†é’‰é’‰çš„C1è·¯ç”±å™¨ä½œä¸ºAPè¿›è¡Œä½¿ç”¨ï¼Œæ¥å…¥é’‰é’‰çš„æ™ºèƒ½åŠå…¬ç½‘ç»œï¼Œåœ¨æ–°äººå…¥èŒåå¯ä»¥å¾ˆæ–¹ä¾¿çš„ç›´æ¥åœ¨é’‰é’‰ä¸­ç‚¹å‡»æ™ºèƒ½åŠå…¬å®¤ç½‘ç»œå°ç¨‹åºè¿›è¡Œç½‘ç»œçš„è¿æ¥ï¼Œè¿›è¡Œæ‰“å¡æˆ–æ˜¯è®¿é—®å†…ç½‘ã€‚</p><p>ä»æ¶æ„æ¥çœ‹ï¼Œä¸»è¦å°±æ˜¯åœ¨è’²å…¬è‹±ç«¯æˆ–è€…æ˜¯åœ¨é’‰é’‰APç«¯å‡ºç°äº†æŸäº›é—®é¢˜ï¼Œéœ€è¦å¯¹ç½‘ç»œç»§ç»­ä¸€ä¸ªåŸºæœ¬çš„æµ‹è¯•åå†è¿›è¡Œé—®é¢˜çš„æ’æŸ¥ã€‚</p><p><img src="https://s2.loli.net/2023/07/03/VWzRsnPycH4lgDv.png"></p><h2 id="é¡¹ç›®æ„æƒ³"><a href="#é¡¹ç›®æ„æƒ³" class="headerlink" title="é¡¹ç›®æ„æƒ³"></a>é¡¹ç›®æ„æƒ³</h2><p>æƒ³è¦æŒç»­ç›‘æ§ç»ˆç«¯ç½‘ç»œçš„çŠ¶å†µï¼Œä¸»è¦è¿˜æ˜¯å¾—çœ‹åˆ°è¾¾å‘˜å·¥ç«¯ç”µè„‘ä¸Šçš„ç½‘ç»œé€Ÿç‡ï¼Œå¾ˆå¤šæ—¶å€™è‡ªå·±æ‹¿ç€å»æµ‹è§‰å¾—ç½‘ç»œçŠ¶æ€ä¸é”™ï¼Œä½†å®é™…ä½¿ç”¨ä¸­ç”±äºä¸åŒç”µè„‘çš„å„ç§ç¡¬ä»¶ä¸åŒä¹Ÿå¯èƒ½ä¼šäº§ç”Ÿè®¸å¤šé—®é¢˜ã€‚</p><p>é©¬ä¸Šç¬¬ä¸€ä¸ªæƒ³æ³•ä¾¿æ˜¯åˆ©ç”¨speedtestçš„åŠŸèƒ½ï¼Œå®šæ—¶åœ¨ç»ˆç«¯ä¸Šè¿›è¡Œæµ‹é€Ÿï¼Œå†é€šè¿‡æŸä¸ªæ¸ é“å°†æ•°æ®è¿›è¡Œæ±‡æ€»ï¼Œè¿™æ ·ä¾¿å¯ä»¥å¾ˆæ–¹ä¾¿çš„çœ‹åˆ°ä¸åŒè®¾å¤‡ä¸­çš„é€Ÿåº¦äº†ï¼Œä¹Ÿå¾ˆå®¹æ˜“çœ‹åˆ°é—®é¢˜çš„å¤§æ¦‚æ–¹å‘ã€‚å› æ­¤èŠ±äº†ä¸€ä¸ªæ•´ä½“æ¶æ„çš„è‰å›¾ï¼Œéå¸¸çš„ç®€å•ï¼Œä¾¿æ˜¯åœ¨ç»ˆç«¯ï¼Œä¾‹å¦‚æ‰‹ææˆ–è€…å°å¼æœºå™¨ä¸Šåˆ©ç”¨speedtestè¿›è¡Œæµ‹é€Ÿï¼Œå†æ„å»ºä¸€ä¸ªåç«¯ç³»ç»Ÿè¿›è¡Œæ•°æ®çš„æ±‡æ€»ï¼Œæ¶æ„å°±å®Œæˆäº†ã€‚</p><p><img src="https://s2.loli.net/2023/07/03/dTZ6DbB1ezIR2Yf.png"></p><h2 id="é¡¹ç›®é€‰å‹"><a href="#é¡¹ç›®é€‰å‹" class="headerlink" title="é¡¹ç›®é€‰å‹"></a>é¡¹ç›®é€‰å‹</h2><p>ç®€å•çš„æ¶æ„å®Œæˆåï¼Œé©¬ä¸Šé‡åˆ°çš„é—®é¢˜å°±æ˜¯ï¼Œå¦‚ä½•åˆ©ç”¨speedtestä»¥åŠç”¨ä»€ä¹ˆè¯­è¨€å»æ„å»ºå®‰è£…åœ¨ç»ˆç«¯ä¸Šçš„å®šæ—¶æµ‹é€Ÿç¨‹åºå‘¢ï¼Ÿ</p><p>é¦–å…ˆç¬¬ä¸€ä¸ªé—®é¢˜å¾ˆå¿«å¾—åˆ°äº†è§£å†³ï¼ŒOoklaå…¬å¸æ——ä¸‹çš„Speedtestå·¥å…·ä¸ºå¼€å‘è€…æä¾›äº†Speedtest CLIï¼Œè¿™æ„å‘³ç€æˆ‘åªéœ€è¦å»è°ƒç”¨CLIå¹¶ä¸”è·å¾—æ•°æ®å³å¯å®Œæˆæµ‹é€Ÿçš„åŠŸèƒ½ã€‚ç®€å•äº†è§£æŒ‡ä»¤åä¾¿è®¾ç½®ç”¨jsonæ ¼å¼è·å–æµ‹é€ŸCLIçš„è¾“å‡ºä»¥è·å¾—æµ‹é€Ÿçš„æ•°æ®ã€‚</p><p><img src="https://s2.loli.net/2023/07/03/Xng9oQlBTIWxfP7.png"></p><p>å®Œæ•´çš„å‘½ä»¤ä¸º:</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">cmd := exec.Command(<span class="string">&quot;speed_cli/speedCLI/speedtest.exe&quot;</span>, <span class="string">&quot;--accept-gdpr&quot;</span>, <span class="string">&quot;--accept-license&quot;</span>, <span class="string">&quot;56634&quot;</span>,</span><br><span class="line"><span class="string">&quot;--progress=yes&quot;</span>, <span class="string">&quot;--format=json&quot;</span>, <span class="string">&quot;--progress-update-interval=200&quot;</span>)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œâ€â€“accept-gdprâ€ä¸â€â€“accept-licenseâ€å¯ä»¥è·³è¿‡åˆæ¬¡å¯åŠ¨CLIéœ€è¦è¾“å…¥YESåŒæ„çš„æ¡æ¬¾æç¤ºï¼Œ</p><p>â€œ56634â€åˆ™æ˜¯æŒ‡å®šçš„æµ‹é€ŸæœåŠ¡å™¨idï¼Œå¯ä»¥ä½¿å¾—ç»“æœæ¯”è¾ƒå…·æœ‰ç»Ÿä¸€æ€§ï¼Œåç»­ä¸»è¦ä¸ºè·å–æ•°æ®çš„é…ç½®ï¼Œâ€“format=jsonå°†CLIçš„è¾“å‡ºé…ç½®ä¸ºJSONæ ¼å¼ï¼Œå¯ä»¥å¾ˆå¥½çš„ç”¨mapçš„å½¢å¼å»ç®¡ç†æµ‹é€Ÿæ•°æ®ã€‚</p><p>åœ¨è¯­è¨€é€‰æ‹©æ–¹é¢ï¼Œé¦–å…ˆè¿™é—¨è¯­è¨€å¿…é¡»å ç”¨èµ„æºå°‘ï¼Œä¸ä¼šå½±å“åˆ°ç»ˆç«¯çš„æ­£å¸¸å·¥ä½œï¼Œå…¶æ¬¡è¯­è¨€åº”è¯¥å…·æœ‰è‰¯å¥½çš„å¤šæ¶æ„é€‚é…æ€§ä»¥å¯ä»¥å®‰è£…åœ¨å…¬å¸ä¸åŒæ¶æ„çš„ç”µè„‘ä¸Šï¼Œæ¯”å¦‚armï¼Œamd64ç­‰ï¼Œæœ€åæ˜¯æœ€å¥½å¯ä»¥ç¼–è¯‘ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¾¿äºé€‚é…ç³»ç»Ÿåå°æœåŠ¡ä»¥åŠå·¥å…·çš„åˆ†å‘ã€‚</p><p>æ²¡é”™ï¼Œåœ¨è€ƒè™‘äº†å¼€å‘éœ€æ±‚ä¸å¼€å‘æˆæœ¬ä¸­ï¼Œç»“æœå¾ˆæ˜æ˜¾ï¼Œä½¿ç”¨Golangè¯­è¨€è¿›è¡Œå®¢æˆ·ç«¯æµ‹é€Ÿç¨‹åºçš„ç¼–å†™æ˜æ˜¾æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚åŒæ—¶åœ¨æ¡†æ¶ä¸Šï¼Œé€‰ç”¨äº†åç«¯çš„goframeæ¡†æ¶è¿›è¡Œé­”æ”¹åå¯ä»¥æ–¹ä¾¿çš„åˆ©ç”¨åˆ°æ¡†æ¶å†…çš„ä¾‹å¦‚ç¼“å­˜ï¼ŒHTTPå®¢æˆ·ç«¯ä»¥åŠå®šæ—¶ä»»åŠ¡çš„åŠŸèƒ½ï¼Œé™ä½äº†å¾ˆå¤šçš„å¼€å‘æˆæœ¬ã€‚</p><p><img src="https://s2.loli.net/2023/07/03/eF9zdUrW41JR85c.png"></p><p>æ ¸å¿ƒçš„é—®é¢˜è§£å†³äº†ï¼Œé‚£å°±è¿›è¡Œå¼€å‘å§ã€‚</p><h2 id="å®¢æˆ·ç«¯å¼€å‘"><a href="#å®¢æˆ·ç«¯å¼€å‘" class="headerlink" title="å®¢æˆ·ç«¯å¼€å‘"></a>å®¢æˆ·ç«¯å¼€å‘</h2><p>åˆ°äº†å¼€å‘æ›´å¤šå°±æ˜¯æ ¹æ®è¯­è¨€ç‰¹æ€§é€‰æ‹©ä¸åŒçš„æ¨¡å—å»å®ç°åŠŸèƒ½äº†ã€‚è¿™é‡Œä¸»è¦ä»‹ç»å®šæ—¶ä»»åŠ¡è¿™ä¸ªåŠŸèƒ½ã€‚</p><p>å®šæ—¶ä»»åŠ¡ç›´æ¥é‡‡ç”¨goframeæ¡†æ¶ä¸­çš„gcron-å®šæ—¶ä»»åŠ¡è¿›è¡Œæ„å»ºã€‚<code>gcron</code>æ¨¡å—æä¾›äº†å¯¹å®šæ—¶ä»»åŠ¡çš„å®ç°ï¼Œæ”¯æŒç±»ä¼¼<code>crontab</code>çš„é…ç½®ç®¡ç†æ–¹å¼ï¼Œå¹¶æ”¯æŒæœ€å°ç²’åº¦åˆ°<code>ç§’</code>çš„å®šæ—¶ä»»åŠ¡ç®¡ç†ã€‚</p><p>ä½¿ç”¨èµ·æ¥éå¸¸çš„ç®€å•ï¼Œåªéœ€è¦åœ¨å®¢æˆ·ç«¯ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œè¿›è¡Œå®šæ—¶ä»»åŠ¡çš„æ³¨å†Œå³å¯ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addSpeedCron</span><span class="params">(ctx context.Context, initData g.Map, timePattern <span class="keyword">string</span>)</span> <span class="params">(err error)</span></span> &#123;</span><br><span class="line">glog.Notice(ctx, <span class="string">&quot;å¼€å§‹å®šæ—¶æµ‹é€ŸæœåŠ¡&quot;</span>, timePattern)</span><br><span class="line">_, err = gcron.AddSingleton(ctx, timePattern, <span class="function"><span class="keyword">func</span><span class="params">(ctx context.Context)</span></span> &#123;</span><br><span class="line">err := cli_utils.CmdCore.StartSpeedCmd(ctx, initData)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">glog.Error(ctx, <span class="string">&quot;å®šæ—¶æµ‹é€ŸæœåŠ¡å¤±è´¥: &quot;</span>, err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;, <span class="string">&quot;Speed-Cron&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">glog.Warning(ctx, <span class="string">&quot;æ·»åŠ å®šæ—¶æµ‹é€ŸæœåŠ¡å¤±è´¥: &quot;</span>, err)</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>timePatterné€‰æ‹©gcornåº“ä¸­çš„é¢„å®šä¹‰æ ¼å¼ï¼Œé»˜è®¤ä¸º<code>@every 1h</code></p><p>åŒæ—¶å®šæ—¶ä»»åŠ¡é€‰æ‹©ä¸ºå•ä¾‹æ¨¡å¼ï¼Œé¿å…ä¸Šæ¬¡çš„æµ‹é€Ÿæœªç»“æŸåˆè¿›è¡Œäº†ç¬¬äºŒæ¬¡æµ‹é€Ÿé€ æˆæµ‹é€ŸCLIçš„å†²çªã€‚</p><p>åœ¨goframeé¡¹ç›®å¯åŠ¨ä¸­ï¼Œå®šæ—¶ä»»åŠ¡ä¾¿ä¹Ÿå¯åŠ¨ï¼ŒæŒ‰ç…§å®šä¹‰å¥½çš„æ—¶é—´é—´éš”è¿›è¡Œæµ‹é€Ÿå‘½ä»¤çš„æ‰§è¡Œã€‚</p><p>ä¸ºäº†åç«¯å¯¹äºå®¢æˆ·ç«¯æœ‰è¶³å¤Ÿçš„æ§åˆ¶æƒé™ï¼ŒtimePatternå†…å®¹ä¸æµ‹é€ŸèŠ‚ç‚¹idæ˜¯ä»åç«¯è¿›è¡Œè·å–çš„ï¼Œè¿™ä¾¿éœ€è¦å®¢æˆ·ç«¯å®šæ—¶å‘åç«¯è·å–æœ€æ–°çš„å®¢æˆ·ç«¯é…ç½®ï¼Œå¹¶ä¸”æ ¹æ®é…ç½®çš„å†…å®¹å†è¿›è¡Œæµ‹é€Ÿå®šæ—¶ä»»åŠ¡çš„åˆ›å»ºã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">glog.Debug(ctx, <span class="string">&quot;å¼€å§‹åˆå§‹åŒ–å®šæ—¶ä»»åŠ¡ç®¡ç†å™¨&quot;</span>)</span><br><span class="line">_, err = gcron.AddSingleton(ctx, <span class="string">&quot;@every 30s&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(ctx context.Context)</span></span> &#123;</span><br><span class="line">err := cron_utils.CronManage.GetConfigAndStart(ctx, initData)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">glog.Error(ctx, <span class="string">&quot;åˆå§‹åŒ–å®šæ—¶ä»»åŠ¡ç®¡ç†å™¨æœåŠ¡å¤±è´¥: &quot;</span>, err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;, <span class="string">&quot;Cron-Manager&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">glog.Warning(ctx, <span class="string">&quot;æ·»åŠ åˆå§‹åŒ–å®šæ—¶ä»»åŠ¡ç®¡ç†å™¨æœåŠ¡å¤±è´¥: &quot;</span>, err)</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡‡ç”¨é…ç½®å®šæ—¶ä»»åŠ¡ç®¡ç†å™¨çš„å½¢å¼è¿›è¡Œæµ‹é€Ÿå®šæ—¶ä»»åŠ¡çš„ç®¡ç†ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–æµ‹é€Ÿå®šæ—¶ä»»åŠ¡</span></span><br><span class="line">localSpeedCron := gcron.Search(<span class="string">&quot;Speed-Cron&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> localSpeedCron == <span class="literal">nil</span> &#123;</span><br><span class="line">glog.Notice(ctx, <span class="string">&quot;æœ¬åœ°ä¸å­˜åœ¨å®šæ—¶ä»»åŠ¡,æ·»åŠ Speed-Cronå®šæ—¶ä»»åŠ¡&quot;</span>)</span><br><span class="line">err = addSpeedCron(ctx, initData, speedInterval)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">glog.Warning(ctx, <span class="string">&quot;æ·»åŠ Speed-Cronå®šæ—¶å™¨å¤±è´¥&quot;</span>)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">speedEntryPattern := reflect.ValueOf(localSpeedCron).Elem().FieldByName(<span class="string">&quot;schedule&quot;</span>).Elem().FieldByName(<span class="string">&quot;pattern&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> speedEntryPattern.String() != speedInterval &#123;</span><br><span class="line">glog.Notice(ctx, <span class="string">&quot;æ›´æ–°Speed-Cronå®šæ—¶å™¨&quot;</span>)</span><br><span class="line"><span class="comment">// æ›´æ–°å®šæ—¶ä»»åŠ¡</span></span><br><span class="line">gcron.Stop(<span class="string">&quot;Speed-Cron&quot;</span>)</span><br><span class="line">gcron.Remove(<span class="string">&quot;Speed-Cron&quot;</span>)</span><br><span class="line">err = addSpeedCron(ctx, initData, speedInterval)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">glog.Warning(ctx, <span class="string">&quot;æ›´æ–°Speed-Cronå®šæ—¶å™¨å¤±è´¥&quot;</span>)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">glog.Notice(ctx, <span class="string">&quot;Speed-Cronå®šæ—¶å™¨æ— éœ€æ›´æ–°&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è·å–é…ç½®åï¼Œå°†æœ¬åœ°çš„é…ç½®ä¸æœåŠ¡å™¨çš„é…ç½®è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœæœ‰æ”¹å˜ï¼Œåˆ™æ‰¾åˆ°åŸæœ¬çš„æµ‹é€Ÿå®šæ—¶ä»»åŠ¡è¿›è¡Œé”€æ¯å†æ ¹æ®æ–°é…ç½®åˆ›å»ºæ–°çš„å®šæ—¶ä»»åŠ¡ã€‚åœ¨è¿™é‡Œæ¯”è¾ƒç‰¹åˆ«çš„æ˜¯ï¼Œåœ¨gcronä¸­ï¼Œå®šæ—¶ä»»åŠ¡åœ¨åˆ›å»ºå®Œæˆåï¼Œå…¶ä¸­æ—¶é—´é—´éš”å­—æ®µæ˜¯ç§æœ‰å­—æ®µï¼Œä¸èƒ½ä»å¤–éƒ¨ç›´æ¥è·å–ï¼Œå› æ­¤è¿™é‡Œé‡‡ç”¨åå°„å¯¹æµ‹é€Ÿå®šæ—¶ä»»åŠ¡çš„ç»“æ„ä½“è¿›è¡Œäº†ç§æœ‰å­—æ®µçš„è·å–ä»¥ç”¨ä»¥ä¸æœåŠ¡å™¨é…ç½®è¿›è¡Œæ¯”å¯¹ã€‚</p><p>æœ€åæ¯”è¾ƒæ ¸å¿ƒçš„æ¨¡å—ä¾¿æ˜¯ä¸Speedtest CLIçš„äº¤äº’äº†ï¼Œååˆ†çš„ç®€å•ï¼Œè¿™é‡Œç›´æ¥ç»™å‡ºå®Œæ•´çš„å‘½ä»¤è¡Œä¿¡æ¯è·å–å‡½æ•°ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// StartSpeedCmd</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//@dc: å¼€å§‹æµ‹é€Ÿå‘½ä»¤è¡Œäº¤äº’</span></span><br><span class="line"><span class="comment">//@params:</span></span><br><span class="line"><span class="comment">//@response:</span></span><br><span class="line"><span class="comment">//@author: hamster   @date:2023/6/20 10:06:06</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *uCmdCore)</span> <span class="title">StartSpeedCmd</span><span class="params">(ctx context.Context, initData g.Map)</span> <span class="params">(err error)</span></span> &#123;</span><br><span class="line">cmd := CliUtils.CreateSpeedCmd()</span><br><span class="line"><span class="keyword">if</span> cmd == <span class="literal">nil</span> &#123;</span><br><span class="line">glog.Warning(ctx, <span class="string">&quot;åˆ›å»ºå‘½ä»¤å¤±è´¥,è·å–æµ‹é€ŸèŠ‚ç‚¹å¤±è´¥&quot;</span>)</span><br><span class="line">err = gerror.New(<span class="string">&quot;åˆ›å»ºå‘½ä»¤å¤±è´¥,è·å–æµ‹é€ŸèŠ‚ç‚¹å¤±è´¥&quot;</span>)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è·å–å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºç®¡é“</span></span><br><span class="line">stdout, err := cmd.StdoutPipe()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">glog.Warning(ctx, <span class="string">&quot;è·å–æ ‡å‡†è¾“å‡ºç®¡é“æ—¶å‘ç”Ÿé”™è¯¯:&quot;</span>, err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯åŠ¨å‘½ä»¤</span></span><br><span class="line">err = cmd.Start()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">glog.Warning(ctx, <span class="string">&quot;å¯åŠ¨å‘½ä»¤æ—¶å‘ç”Ÿé”™è¯¯:&quot;</span>, err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">scanner             = bufio.NewScanner(stdout)</span><br><span class="line">defaultBars         = Bar.InitDefaultBar()</span><br><span class="line">uploadNetDataStruct = &amp;NetInfoUploadData&#123;&#125;</span><br><span class="line">)</span><br><span class="line">uploadNetDataStruct.Department = gconv.String(initData[<span class="string">&quot;department&quot;</span>])</span><br><span class="line">uploadNetDataStruct.StaffName = gconv.String(initData[<span class="string">&quot;name&quot;</span>])</span><br><span class="line"><span class="comment">// æŒç»­è·å–è¾“å‡º</span></span><br><span class="line"><span class="keyword">for</span> scanner.Scan() &#123;</span><br><span class="line"><span class="comment">// è·å–è¾“å‡ºè¡Œ</span></span><br><span class="line">line := scanner.Bytes()</span><br><span class="line">ok, err := CmdProgress.CmdCoreProgress(ctx, <span class="keyword">string</span>(line), defaultBars, uploadNetDataStruct)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">glog.Warning(ctx, <span class="string">&quot;å¤„ç†å‘½ä»¤è¡Œè¾“å‡ºæ—¶å‘ç”Ÿé”™è¯¯:&quot;</span>, err)</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> ok &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç­‰å¾…å‘½ä»¤æ‰§è¡Œå®Œæˆ</span></span><br><span class="line">err = cmd.Wait()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">glog.Warning(ctx, <span class="string">&quot;ç­‰å¾…å‘½ä»¤æ‰§è¡Œå®Œæˆæ—¶å‘ç”Ÿé”™è¯¯:&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ¸å¿ƒå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªå‘½ä»¤è¡Œçš„è¾“å‡ºç®¡é“ï¼Œé€šè¿‡<code>for scanner.Scan()</code> çš„æ–¹å¼ä¸æ–­è·å–å‘½ä»¤è¡Œçš„è¾“å‡ºå†è¿›è¡Œå¤„ç†ã€‚</p><p>æµ‹é€Ÿå®Œæˆåï¼Œç»„è£…ä¿¡æ¯ä¸Šä¼ è‡³åç«¯å³å¯ã€‚</p><h2 id="ç³»ç»ŸæœåŠ¡"><a href="#ç³»ç»ŸæœåŠ¡" class="headerlink" title="ç³»ç»ŸæœåŠ¡"></a>ç³»ç»ŸæœåŠ¡</h2><p>åœ¨ç»ˆç«¯ä¸Šè¿›è¡Œï¼Œé‚£å°±éœ€è¦æœåŠ¡å¯ä»¥ä¸€ç›´åœ¨åå°è¿è¡Œï¼Œæœ€å¥½å…·æœ‰é”™è¯¯é‡å¯ï¼Œå¼€æœºè‡ªå¯åŠ¨çš„åŠŸèƒ½ï¼Œåœ¨å¯¹æ¯”äº†nvvmä¸winswåï¼Œé€‰ç”¨winswè¿›è¡ŒWindowsç«¯ç³»ç»ŸæœåŠ¡çš„æ„å»ºã€‚</p><p>é…ç½®ååˆ†ç®€å•ï¼Œé…ç½®ä¸€äº›åŸºç¡€çš„ä¿¡æ¯ï¼Œæ­é…githubä¸Šçš„é¢„ç¼–è¯‘æ–‡ä»¶åŠ å‘½ä»¤å³å¯å®Œæˆç³»ç»ŸæœåŠ¡çš„æ³¨å†Œä¸å¼€å¯ã€‚</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">service</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>v0.1.0<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>My Go Application<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>This is a Windows service for running my Go application.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">executable</span>&gt;</span>%BASE%\core_bin\speed_cron.exe<span class="tag">&lt;/<span class="name">executable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">workingdirectory</span>&gt;</span>%BASE%\core_bin<span class="tag">&lt;/<span class="name">workingdirectory</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">arguments</span>&gt;</span>-department=IT -name=æ–¹å¤§åŒ<span class="tag">&lt;/<span class="name">arguments</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">logpath</span>&gt;</span>%BASE%\logs<span class="tag">&lt;/<span class="name">logpath</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">logmode</span>&gt;</span>roll<span class="tag">&lt;/<span class="name">logmode</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">onfailure</span> <span class="attr">action</span>=<span class="string">&quot;restart&quot;</span> <span class="attr">delay</span>=<span class="string">&quot;10 sec&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">onfailure</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®šä¹‰å®Œæˆååˆ©ç”¨<code>install</code>ä¸<code>start</code>ä¾¿å¯ä»¥å°†å®šæ—¶æµ‹é€Ÿå®¢æˆ·ç«¯æ³¨å†Œä¸ºæœåŠ¡è¿è¡Œåœ¨ç³»ç»Ÿåå°</p><h2 id="åç«¯æ„å»º"><a href="#åç«¯æ„å»º" class="headerlink" title="åç«¯æ„å»º"></a>åç«¯æ„å»º</h2><p>å¢åˆ æŸ¥æ”¹ï¼Œå»ºå¥½æ•°æ®åº“çš„è¡¨å°±å¯ä»¥äº†ï¼Œå†æ·»åŠ ä¸€ä¸ªå®šæ—¶æ£€æµ‹æœºå™¨çŠ¶æ€çš„å®šæ—¶ä»»åŠ¡å³å¯ã€‚<img src="https://s2.loli.net/2023/07/03/ozM1rmiFkXEt248.png"></p><h2 id="ç›‘æ§ä¸€æ®µæ—¶é—´åå‘ç°çš„é—®é¢˜"><a href="#ç›‘æ§ä¸€æ®µæ—¶é—´åå‘ç°çš„é—®é¢˜" class="headerlink" title="ç›‘æ§ä¸€æ®µæ—¶é—´åå‘ç°çš„é—®é¢˜"></a>ç›‘æ§ä¸€æ®µæ—¶é—´åå‘ç°çš„é—®é¢˜</h2><p>åœ¨éƒ¨åˆ†ç½‘ç»œçŠ¶æ€ä¸ä½³çš„è®¾å¤‡ä¸Šå®‰è£…å¹¶ç­‰å¾…ä¸€æ®µæ•°æ®çš„ä¸ŠæŠ¥åï¼Œé¦–å…ˆå‘ç°ï¼Œæ€ä¹ˆç½‘æ®µéƒ½ä¸ä¸€æ ·â€¦</p><p><img src="https://s2.loli.net/2023/07/03/cOWbosgwY7z8XQx.png"></p><p>åœ¨æ¸…ä¸€è‰²çš„10ç½‘æ®µä¸­ï¼Œæ€ä¹ˆæ··å…¥äº†172ç½‘æ®µï¼Ÿï¼</p><p>è‰°è¾›ä¸‡è‹¦çš„æ’æŸ¥åï¼Œå‘ç°æ˜¯æŸå°é’‰é’‰çš„è·¯ç”±å™¨é”™è¯¯åœ°è®¾ç½®ä¸ºäº†è·¯ç”±æ¨¡å¼ï¼Œé€ æˆDHCPç›´æ¥å˜æˆåˆé’‰é’‰è·¯ç”±å™¨è¿›è¡Œï¼Œå°±é€ æˆäº†ç½‘æ®µçš„ä¸ä¸€æ ·ï¼Œè€Œç”±äºé’‰é’‰è·¯ç”±å™¨åœ¨è·¯ç”±æ¨¡å¼ä¸‹æ€§èƒ½å¾ˆå·®â€¦å°±é€ æˆäº†è¿åˆ°è¿™å°è·¯ç”±å™¨çš„è®¾å¤‡ä¼šå‡ºç°ç½‘ç»œå¡é¡¿ï¼Œæ–­çº¿çš„æƒ…å†µã€‚</p><p>ç¬¬ä¸€ä¸ªé—®é¢˜è§£å†³äº†ï¼Œè¿˜å‰©ä¸‹ä¸€ä¸ªå°±æ˜¯ç½‘ç»œæ€»æ˜¯å®šæœŸæœ‰æ³¢åŠ¨ï¼Œä»æµ‹é€Ÿæ•°æ®æ¥çœ‹æ³¢åŠ¨è¿˜æ˜¯æŒºå¤§çš„ï¼Œæœ€åä»å¤–éƒ¨ipä¸­å‘ç°äº†é—®é¢˜ï¼Œå‘ç°è’²å…¬è‹±åˆ‡æ¢åˆ°ç”µä¿¡500Mçš„æ—¶å€™ç½‘ç»œçŠ¶æ€å°±ååˆ†ä¸ç†æƒ³ï¼Œè§£å†³åŠæ³•å¾ˆç®€å•ï¼ŒæŠŠè’²å…¬è‹±è·¯ç”±å™¨ä¸Šç”µä¿¡é‚£æ¡ç½‘çº¿æ‹”äº†ï¼Œå¯¹ä½ æ²¡æœ‰å¬é”™â€¦.</p><p>é—®é¢˜éƒ½è§£å†³äº†ã€‚</p><h2 id="ä¸€äº›åè¯"><a href="#ä¸€äº›åè¯" class="headerlink" title="ä¸€äº›åè¯"></a>ä¸€äº›åè¯</h2><p>è§£å†³å®Œè¿™ä¸ªé—®é¢˜åæ€»æ„Ÿè§‰ä¸ºäº†ä¸€ç¢Ÿé†‹åŒ…äº†ä¸€ç›˜é¥ºå­â€¦ä½†æ˜¯è½¬å¿µä¸€æƒ³ï¼Œæ²¡æœ‰è¿™äº›å¤§é‡æ•°æ®çš„æ”¯æ’‘ï¼Œä¹Ÿå¾ˆéš¾é€šè¿‡æµ‹è¯•å‘ç°é—®é¢˜çš„æ‰€åœ¨ï¼ŒåŒæ—¶åœ¨è¿‡ç¨‹ä¸­ä¹Ÿå‘ç°æœ‰ä¸€äº›æ˜¯ç½‘å¡ç¡¬ä»¶æˆ–è€…ç½‘çº¿çš„é—®é¢˜é€ æˆåå•†é€Ÿç‡åªæœ‰100Mï¼Œè¿™äº›é€šè¿‡äººå·¥å»æµ‹è¯•å½“ç„¶ä¹Ÿè¡Œï¼Œä½†æ˜¯ç¨‹åºå‘˜å°±æ˜¯æ‡’å˜›ï¼è®©åŒäº‹å°æ‰‹ä¸€ç‚¹å®‰è£…ä¸€ä¸‹ï¼Œç­‰ä¸ªåŠå¤©çœ‹çœ‹æ•°æ®å†å»å¤„ç†ï¼Œä¹Ÿæ˜¯éå¸¸çš„è½»æ¾æƒ¬æ„ï¼ŒåŒæ—¶ç³»ç»Ÿè¿˜å¯ä»¥æ¥å…¥æ¯”å¦‚é¢„è­¦ï¼Œæ¶ˆæ¯é€šçŸ¥çš„ç¬¬ä¸‰æ–¹ä»¥å®Œæˆæ›´é«˜ç¨‹åº¦ç›‘æ§è‡ªåŠ¨åŒ–ï¼Œä¹Ÿæ˜¯éå¸¸çµæ´»çš„ï¼ï¼ˆå˜´ç¡¬ï¼‰</p><p>æœ€åè°¢è°¢ä½ çœ‹åˆ°è¿™é‡Œï¼Œå¸Œæœ›å…¶ä¸­çš„ä¸€äº›golangå¯¦ä½œå¯ä»¥ç»™ä½ ä¸€äº›å¯å‘ã€‚</p><p><img src="https://s2.loli.net/2023/07/03/4Sq3IfOmTg1AGLM.png"></p>]]></content>
      
      
      <categories>
          
          <category> Go </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Go </tag>
            
            <tag> Network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å˜æˆæ€æ ·çš„å¤§äºº</title>
      <link href="2023/06/18/%E5%8F%98%E6%88%90%E6%80%8E%E6%A0%B7%E7%9A%84%E5%A4%A7%E4%BA%BA/"/>
      <url>2023/06/18/%E5%8F%98%E6%88%90%E6%80%8E%E6%A0%B7%E7%9A%84%E5%A4%A7%E4%BA%BA/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="982e75f5f7d39b0625fca5fd347114d318402f495d4e0cfee980db9f6932cafb">8b27e0094abfe1a4081fbfd52f0fbcd80b66af6d4ba8e72beb2147e5ab3a1ae2c31d08eca945961dd74485148a79029c4433ffb40824017393ecf32c341adb0a671ad2f896cc410f660f0b5f0f45472cf1d3fd9bc7d12343bd0edef0e9c649cd95ba79b8c36f705e995db04ebc04ba4743a0a9cd741887b45a253724aa02af1be59c63c5c7620d0bdfc2b7ae8538e7bee22b0155e666a0013ff4fa79ab7cbf9b7cac11199ee6a5cb015c6b9fc6c9a1da4e1f8fa90ee51a90cd009b037fd31001c3e96ef49407831553ced14aea7a6b2c8e322bd472e52bfc2a7fb3237f71a9f8a24293d082ca0495ee60e926ace0f20c26d218e0b172db7e409546c49679df816e8ae4aa9285081e4afe67530d2dc77061f5f76f5f9c0341f59e2f359c78952fb4c95a9bee101548a59604b26cbb21bf3cd4d871ffdb53fcb405e1e4d036dd8b8b9228710d57b3417e97df3329f316f743a04b50b67ea155723006750d402856ac2d3b4a3a93b51588a3e326388c26486433577a357a5a479aa6a862986fb3c48a72c400e083cb6c3397da469179b548b1625e34df89bd52eb4d296cfbe2d63a0b7fcd374d4b15f062b067cadc9e16652115116a2a1c9aa10e46721da22f262744164d6c8543303208579507bcd5c0be3d92d0aa9efd8223164675520c350af483bde80f1f788215ee5a561de19d76f8c8ebb2351cd3131bf378ded432d3ec586a83f4b6df6bcf6fcd0cfdcc7d308eec8687c8fc1529eb677f81f2bd227766fc6c3651a3bf2a63a25f7f141f1a664e52b185a32fa398811a27a42a06fad1ae81d1c68f39d22debe4e3b3d7a6b39fdb19020c3ae9a44fbf3863dee2b1033653b39d4404109a5f8e893ad54fd8da73d646060ac98abb2aa10fa8b7ed7f68c63854ecb93261ac28f6d2d92c451e004fc9f78341575e80e95feed6f125f7928f3238e682097a155f90d6766638b449c9c0dfcbc33cfe5351a0dfbbeaa77a398ee2a0c31ef9ca4c7128bce07b6a8421dd333c788d0127977e19dade41f6e39b64eedba68fcf6228cacd6017e2872e6c4776e5999ea4e4dfd29ada730e692ebd8856b1e18022b8fef5c2f59633925ebd6812f90bbe5f324c7a1f0e057fc933acbb0da94bca7624d8d2b85b8d5e055e10f4103e5b4e8c41c9ef9ae440ebb02fa0357294cbd27f8940241889b8b9fc2945b5ffc09668746750f232f386db1a15811fc56597039ccc211183cb5f0a84f8b87ab0803bae9774d28d7b377be1de4b3a42e6d0cc2214c3e59b3b40263c7e81e6b89d0a064bc3e035eaa91feb5f4727434b3d9dcb60adf9c969a4ccee760a0247dcffdba1f61fe2ab5dbfef7b39e169f1d3692041aff2bb474d48457eacacd66b84b2e8b700d54c2f1fab680404ace6a326b22d47e0f453cc527a9241b82781a76938e0e51ffa75a25254a0eae12e086439473e2f570e3d2eb0725f4b8c24d99bcb6ef49a5a7619c707b99bce7810d13a60f352fcdd62662708f77f1f656dce795dd7ee3bcbf1a48fff69b6546e1a7c5af6a1fe0a1c9c3d19ef9b2108055a2b9a34e18b41838e0b2ca8ed85a73e54b1f1dd284c033a9cc35a7ed0a4de3b5630726b4b2f5e9fe03263d97d567633c1782f970818533244a444a0817f761466fd6d1a93534497ef32e3336109dd0e87f25b425b0240e0f22a3cdc7d6af53b5149987a22a5bb71e9c5cb1dceb6ec06eaca49a3841d8a12e935880679c431b77cf7f57837aaed791f3880f5ef9de77fff1c31abf67e65d517feaab5a83e4dd6162406b10bcc92501b353a099a93a0f1cea131d4bd6cbb8be2b7a46f09ecb411db19ceab343cdbceb20a8c521ee66b9727fedd1907a5cacfdfa69de7c628ef240d9db7518b62fb59b37fafd1dceef0f4c5782e0d8f6d8ed7dcc496f7f9c428efba4fc70240019512174081cca1e42132680523c940f320bae8d2d74c77f01bc0fc65e319bac2cb3486f9aaf035894923b4a82306dc7e1134884de8bcd270e4ee7d918e54c80f211857576e32fce999ad24c6f2a798d027b855e71a7748f79b8eb532e59a782011a9020765b920339b2294574f857a3f00db1cec7aae40224728880b635cbd9815965b1ea05544221ccc6a9e6667c1415515de31322952900087ae666a037450f37f7a0888032703d5fb22c723983b1c6a34a159b04124c4056082c2f2e78dd0e5e9a6724ebf702046e84a29bd1a43947e86098950cd515291ad41656f45b24982b5a9c705390c620954423a556e50f4c65e8803d0b0e3d2719676a48957d4d049ae47e8f04705517aed1851eb6ade2bee28bedfca0cbc7ede33051fb6ac5b4f69c882727078d35fbd119bb15d6760b3527a500f850ce1a2db89c632fa13d1b94baa084279dd123f6920912ee9477fc78f02cb12fb2ea20d76e9480bc39f8baf24bf10a0aa033d4e0a020a89fbd22536e01ba357d0c335ee96ea6c17cfd4eb3fb4a5e79331edd18db64eb44e07a44add187c4305624aea9fc56e2a04087bcd0c0ee83b6163655f15f42767c608fbbacfa81be7376eb4662259d7ab918786ce539c2566da43713d2aaa2f6ffbefe4c262fa6942463bdf1770333479c020daa9fd291fe5dbd2241f1bccc1ae3bf690325ac7206791d0521956da1b79f195871df11b71c0ba52fdc23390e01ab2173f95083f36eea5c80d1a2f44943798be371341e270d95a1f0228e31bf9cf55f91143172d5b776f6db5b2540dde89dfc1a596246c129237a19776f15e240b242db401eb8517d4e2ac0d931d6d6bb5554ff11eadd5e14e425994fd07d6b5a2336c9fb4087d86b57afacedf0853fdf4de989b8f2e2a4f00aae4eb810a0d022c4b5d47fb0fb6eff4f5dfacc485f02e3e0af0a59368687c5f522a1978b6a0f5f56dfcf0686acd6c0b5ceedd85332f2b2168d3c05cd32d675b4b409c8fea2eefb96f511253a0c7fee011026f485574195d5583428ecb5d08732fac2e58b484ac32f769ab334ebadb8bab39500341e2be7e3a17615a925bdf6da6edabfb001035a009c7b2029b835e4da27c9714befccb143bc6caa4f7a44f80226bfcfb6276c247c7cd89a89369697d813b405a38404892e31418004a0500b90cc84faeda1e8178b6214663b5ef7aa938c10581205d3e6080792d8d38fd59f0270ee510b03d78a48b99b12a53bf6d842659b9cc378f7dbe23e8f825d627c5b297e40e11fd174aca9f7a927ee911b801bd655a35f376f139108f20885ee70028d1ea1fb86831c8a40a0c3a333a55ba0a391394622e8ef3c264e4267f20f78b653f73bc1b99f17cd35dd904e4914a21f8235d4cf746ab9e0bfe39931e9c50a67408a5484771bc9632d39e339d8e38dd0657fded374a3873b169fda44a539b1c964c7ccd4a7e8708bd90d826dffa0ae4e8e3ca1db4e338f380f7adfe572882e3aaaa686ac0da44a0123de39009094a770fc4ed1bfba3dd941ffe2db84cf2769ba83df4a03b6f98539b01df9b03ee5815e134754f227eb22996f53ad16645ab8d13170e342d879cc0d88fcf4b0c233f0c974e6d63b9dec2c18f058cf536c8a00e32418553c61ef8d0c5769db03a898ff956278081c487438fb4c4e5694171a87d4cc175fa9d6a258a4a72f20eb18812309b3cbdefd31293b4077437985c0936077df8ce286dcf3329d14ff5ba011c1743b12aa96b69aef8412162ada41537fd3dc6e3b026d185dcd8a8804c35c2b0e8d715d35bd6a5cae6702ab733ea388fd918d223d8efb0d252f0c038354f16fa6d21209870d89f32c5901e89dc7e806a61e955bde0af974d09fa100710c87d5a</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Keep Out.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> Me </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Me </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ©ç”¨watchtowerå®ç°Dockerå®¹å™¨çš„è‡ªåŠ¨æ›´æ–°éƒ¨ç½²</title>
      <link href="2023/05/24/%E5%88%A9%E7%94%A8watchtower%E5%AE%9E%E7%8E%B0Docker%E5%AE%B9%E5%99%A8%E7%9A%84%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%E9%83%A8%E7%BD%B2/"/>
      <url>2023/05/24/%E5%88%A9%E7%94%A8watchtower%E5%AE%9E%E7%8E%B0Docker%E5%AE%B9%E5%99%A8%E7%9A%84%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨å‰å‡ ç¯‡æ–‡ç« ä¸­ï¼Œè®¨è®ºäº†åˆ©ç”¨Github Actionsé’ˆå¯¹Goé¡¹ç›®è¿›è¡Œæ„å»ºä¸æ‰“åŒ…é•œåƒï¼Œè€Œæœ¬æ–‡ç« å…³æ³¨äºåœ¨ç®€å•åœºæ™¯ä¸‹ï¼Œå•ä½“åº”ç”¨çš„è‡ªåŠ¨æ£€æµ‹é•œåƒç‰ˆæœ¬å¹¶åœ¨è·å–åˆ°æ–°ç‰ˆæœ¬æ—¶è‡ªåŠ¨æ›´æ–°å¹¶æ¸…é™¤æ—§ç‰ˆæœ¬çš„é•œåƒï¼Œè¿™å¯¹äºæµ‹è¯•ç¯å¢ƒæˆ–ä¸ªäººå¼€å‘è€…æ¥è¯´è¾ƒä¸ºæ–¹ä¾¿ï¼Œä¹Ÿå¯ä»¥å‡å°‘æ‰‹åŠ¨æ›´æ–°æ‰€å¸¦æ¥çš„æ—¶é—´æˆæœ¬ã€‚</p><h2 id="å®ç°æ•ˆæœ"><a href="#å®ç°æ•ˆæœ" class="headerlink" title="å®ç°æ•ˆæœ"></a>å®ç°æ•ˆæœ</h2><img src="https://s2.loli.net/2023/05/23/NVSKzd53wo4mfGu.jpg" style="zoom:50%;" /><p>åœ¨Githubæ‰“åŒ…ä¸Šä¼ é•œåƒè‡³DockerHubåï¼Œéƒ¨ç½²æœåŠ¡çš„æœåŠ¡å™¨é€šè¿‡watchtowerè¿›è¡Œæ£€æµ‹æ›´æ–°å¹¶æ‹‰å–é•œåƒè¿›è¡Œæ›¿æ¢æ›´æ–°ã€‚å®Œæˆåè¿›è¡Œæ¶ˆæ¯æ¨é€çš„é€šçŸ¥ã€‚</p><p>watchtoweré¡¹ç›®åœ°å€: <a href="https://github.com/containrrr/watchtower">https://github.com/containrrr/watchtower</a></p><h2 id="Watchtoweré…ç½®æ–‡ä»¶"><a href="#Watchtoweré…ç½®æ–‡ä»¶" class="headerlink" title="Watchtoweré…ç½®æ–‡ä»¶"></a>Watchtoweré…ç½®æ–‡ä»¶</h2><p>åœ¨æ‰€éœ€éƒ¨ç½²çš„æœåŠ¡å™¨ä¸Šé‡‡ç”¨docker-composeå¯åŠ¨watchtoweræœåŠ¡ï¼ŒæŒ‡å®šç‰ˆæœ¬ä¸º1.5.3ï¼Œåœ¨ä¸æŒ‡å®šçš„æƒ…å†µä¸‹ï¼Œlatestå¯èƒ½å¹¶ä¸èƒ½æ‹‰å–åˆ°æœ€æ–°ç‰ˆæœ¬çš„é•œåƒã€‚åœ¨<code>WATCHTOWER_NOTIFICATION_URL</code> ä¸­ï¼Œéœ€è¦æŒ‡æ˜çš„æ˜¯å¦‚æœä¸æ˜¯é€šè¿‡slackï¼Œdiscordç­‰é€”å¾„è¿›è¡Œæ¶ˆæ¯æ¨é€ï¼Œè€Œæ˜¯é€šè¿‡http webhookçš„å½¢å¼è¿›è¡Œæ¨é€ï¼Œåˆ™éœ€è¦åœ¨URLå‰åŠ ä¸Šgenericè¡¨æ˜é‡‡ç”¨åŸç”Ÿè¯·æ±‚è¿›è¡Œæ¨é€ã€‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">watchtower:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">containrrr/watchtower:1.5.3</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/run/docker.sock:/var/run/docker.sock</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">--interval</span> <span class="number">15</span> <span class="string">--cleanup</span> <span class="string">nasnetwork_push_go-push-go-1</span> <span class="string">push_go_docker-push-go-1</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">WATCHTOWER_NOTIFICATION_REPORT:</span> <span class="string">&quot;true&quot;</span></span><br><span class="line">      <span class="attr">WATCHTOWER_NOTIFICATION_TITLE_TAG:</span> <span class="string">&quot;hamster&quot;</span></span><br><span class="line">      <span class="attr">WATCHTOWER_NOTIFICATION_URL:</span> <span class="string">&quot;generic+http://yourip:port/DockerUpdatePushCore&quot;</span></span><br><span class="line">      <span class="attr">WATCHTOWER_NOTIFICATION_DELAY:</span> <span class="number">5</span></span><br><span class="line">      <span class="attr">WATCHTOWER_NOTIFICATION_TEMPLATE:</span> <span class="string">|</span></span><br><span class="line">        &#123;&#123;<span class="bullet">-</span> <span class="string">if</span> <span class="string">.Report</span> <span class="string">-</span>&#125;&#125;</span><br><span class="line">          &#123;&#123;<span class="bullet">-</span> <span class="string">with</span> <span class="string">.Report</span> <span class="string">-</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;<span class="string">len</span> <span class="string">.Scanned</span>&#125;&#125; <span class="string">Scanned,</span> &#123;&#123;<span class="string">len</span> <span class="string">.Updated</span>&#125;&#125; <span class="string">Updated,</span> &#123;&#123;<span class="string">len</span> <span class="string">.Failed</span>&#125;&#125; <span class="string">Failed</span></span><br><span class="line">              &#123;&#123;<span class="bullet">-</span> <span class="string">range</span> <span class="string">.Updated</span>&#125;&#125;</span><br><span class="line">        <span class="bullet">-</span> &#123;&#123;<span class="string">.Name</span>&#125;&#125; <span class="string">(&#123;&#123;.ImageName&#125;&#125;):</span> &#123;&#123;<span class="string">.CurrentImageID.ShortID</span>&#125;&#125; <span class="string">updated</span> <span class="string">to</span> &#123;&#123;<span class="string">.LatestImageID.ShortID</span>&#125;&#125;</span><br><span class="line">              &#123;&#123;<span class="bullet">-</span> <span class="string">end</span> <span class="string">-</span>&#125;&#125;</span><br><span class="line">              &#123;&#123;<span class="bullet">-</span> <span class="string">range</span> <span class="string">.Fresh</span>&#125;&#125;</span><br><span class="line">        <span class="bullet">-</span> &#123;&#123;<span class="string">.Name</span>&#125;&#125; <span class="string">(&#123;&#123;.ImageName&#125;&#125;):</span> &#123;&#123;<span class="string">.State</span>&#125;&#125;</span><br><span class="line">            &#123;&#123;<span class="bullet">-</span> <span class="string">end</span> <span class="string">-</span>&#125;&#125;</span><br><span class="line">            &#123;&#123;<span class="bullet">-</span> <span class="string">range</span> <span class="string">.Skipped</span>&#125;&#125;</span><br><span class="line">        <span class="bullet">-</span> &#123;&#123;<span class="string">.Name</span>&#125;&#125; <span class="string">(&#123;&#123;.ImageName&#125;&#125;):</span> &#123;&#123;<span class="string">.State</span>&#125;&#125;<span class="string">:</span> &#123;&#123;<span class="string">.Error</span>&#125;&#125;</span><br><span class="line">            &#123;&#123;<span class="bullet">-</span> <span class="string">end</span> <span class="string">-</span>&#125;&#125;</span><br><span class="line">            &#123;&#123;<span class="bullet">-</span> <span class="string">range</span> <span class="string">.Failed</span>&#125;&#125;</span><br><span class="line">        <span class="bullet">-</span> &#123;&#123;<span class="string">.Name</span>&#125;&#125; <span class="string">(&#123;&#123;.ImageName&#125;&#125;):</span> &#123;&#123;<span class="string">.State</span>&#125;&#125;<span class="string">:</span> &#123;&#123;<span class="string">.Error</span>&#125;&#125;</span><br><span class="line">            &#123;&#123;<span class="bullet">-</span> <span class="string">end</span> <span class="string">-</span>&#125;&#125;</span><br><span class="line">          &#123;&#123;<span class="bullet">-</span> <span class="string">end</span> <span class="string">-</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;<span class="bullet">-</span> <span class="string">else</span> <span class="string">-</span>&#125;&#125;</span><br><span class="line">          &#123;&#123;<span class="string">range</span> <span class="string">.Entries</span> <span class="string">-</span>&#125;&#125;&#123;&#123;<span class="string">.Message</span>&#125;&#125;&#123;&#123;<span class="string">&quot;\n&quot;</span>&#125;&#125;&#123;&#123;<span class="bullet">-</span> <span class="string">end</span> <span class="string">-</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;<span class="bullet">-</span> <span class="string">end</span> <span class="string">-</span>&#125;&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸éœ€è¦æ¨é€æœåŠ¡ï¼Œåˆ™æ— éœ€æ·»åŠ environmentéƒ¨åˆ†å†…å®¹ã€‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">watchtower:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">containrrr/watchtower:1.5.3</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/run/docker.sock:/var/run/docker.sock</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">--interval</span> <span class="number">15</span> <span class="string">--cleanup</span> <span class="string">nasnetwork_push_go-push-go-1</span> <span class="string">push_go_docker-push-go-1</span></span><br></pre></td></tr></table></figure><p>volumesæŒ‡å®šç³»ç»Ÿä¸‹docker.sockçš„è·¯å¾„ï¼Œè€Œåœ¨commandä¸­è¿›è¡Œç»‘å®šéœ€è¦ç›‘æµ‹çš„å®¹å™¨ä¸å…¶ä»–å‘½ä»¤ï¼Œåœ¨ä¸Šè¿°commandä¸­ï¼Œ</p><p> <code>â€”interval</code> æŒ‡å®šæ¯æ¬¡æ£€æµ‹çš„é—´éš”ç§’æ•°ï¼Œ15åˆ™ä¸º15ç§’</p><p><code>â€”cleanup</code> æŒ‡å®šåœ¨æ›´æ–°å®¹å™¨åæ¸…ç†æ—§å®¹å™¨ä¸æ—§é•œåƒ</p><p><code>nasnetwork_push_go-push-go-1</code> ä¸ <code>push_go_docker-push-go-1</code> éƒ½ä¸ºå®¹å™¨åï¼Œå¯é€šè¿‡<code>docker ps</code> è¿›è¡ŒæŸ¥çœ‹ï¼Œå¤šä¸ªå®¹å™¨ä¹‹é—´é€šè¿‡ç©ºæ ¼è¿›è¡Œåˆ†å‰²ã€‚</p><h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><p>é¦–å…ˆé€šè¿‡ <code>docker-compose pull</code> è¿›è¡Œé•œåƒçš„æ‹‰å–</p><p>æ‹‰å–å®Œæˆåï¼Œé€šè¿‡<code>docker-compose up -d</code> è¿›è¡Œwatchtowerçš„å¯åŠ¨</p><p>å®Œæˆåå³å¯é€šè¿‡æŸ¥çœ‹æ—¥å¿—è·å–æ£€æµ‹ç»“æœä¿¡æ¯ã€‚</p><p><img src="https://s2.loli.net/2023/05/23/39TIpxOSBLDvVEY.png"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡è¿™å‡ ç¯‡æ–‡ç« ï¼Œå¯ä»¥ä»¥è¾ƒå°çš„ç»´æŠ¤æˆæœ¬ä¸å¼€å‘æˆæœ¬æ„å»ºä¸€å¥—å±äºè‡ªå·±çš„CI/CDæµç¨‹ï¼Œåˆ©ç”¨Dockerå®¹å™¨è½»æ¾è¿›è¡Œå®¹å™¨çš„åˆ†å‘ä¸éƒ¨ç½²ã€‚åç»­ä¼šç»§ç»­ä»‹ç»ç»Ÿä¸€æ¶ˆæ¯æ¨é€ä¸­å¿ƒä»¥åŠk8sä¸k3sçš„æ„å»ºä¸éƒ¨ç½²ã€‚</p><p>ä¹‹å‰çš„æ–‡ç« ï¼š</p><p><a href="https://buycoffee.top/2023/05/01/%E4%BD%BF%E7%94%A8GitHub%20Actions%E4%B8%BAGo%E9%A1%B9%E7%9B%AE%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93CI:CD/">https://buycoffee.top/2023/05/01/ä½¿ç”¨GitHub Actionsä¸ºGoé¡¹ç›®å®ç°ç®€æ˜“CI:CD/</a></p><p><a href="https://buycoffee.top/2023/05/23/%E5%88%A9%E7%94%A8Github%20Actions%E4%B8%BAGo%E7%A8%8B%E5%BA%8F%E6%B7%BB%E5%8A%A0git%E4%B8%8E%E7%BC%96%E8%AF%91%E4%BF%A1%E6%81%AF/">https://buycoffee.top/2023/05/23/åˆ©ç”¨Github Actionsä¸ºGoç¨‹åºæ·»åŠ gitä¸ç¼–è¯‘ä¿¡æ¯/</a></p>]]></content>
      
      
      <categories>
          
          <category> Go </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ©ç”¨Github Actionsä¸ºGoç¨‹åºæ·»åŠ gitä¸ç¼–è¯‘ä¿¡æ¯</title>
      <link href="2023/05/23/%E5%88%A9%E7%94%A8Github%20Actions%E4%B8%BAGo%E7%A8%8B%E5%BA%8F%E6%B7%BB%E5%8A%A0git%E4%B8%8E%E7%BC%96%E8%AF%91%E4%BF%A1%E6%81%AF/"/>
      <url>2023/05/23/%E5%88%A9%E7%94%A8Github%20Actions%E4%B8%BAGo%E7%A8%8B%E5%BA%8F%E6%B7%BB%E5%8A%A0git%E4%B8%8E%E7%BC%96%E8%AF%91%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å®ç°æ•ˆæœ"><a href="#å®ç°æ•ˆæœ" class="headerlink" title="å®ç°æ•ˆæœ"></a>å®ç°æ•ˆæœ</h2><p>å¯ä»¥é€šè¿‡/versionè·å–åˆ°å½“å‰æœåŠ¡çš„gitç‰ˆæœ¬å·ä»¥åŠç›¸å…³ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°ç¼–è¯‘æ—¶é—´ä¸ç¼–è¯‘ç¯å¢ƒç­‰ä¿¡æ¯ã€‚</p><p><img src="https://s2.loli.net/2023/05/23/F5xGV3UgXrmOPAh.png"></p><h2 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h2><p>åœ¨è¿›è¡ŒGoç¨‹åºçš„ç¼–è¯‘æ—¶ï¼Œå¯ä»¥é€šè¿‡ä¼ å…¥é¢å¤–çš„å‚æ•°æ¥ä¿®æ”¹ç¼–è¯‘è¿‡ç¨‹ï¼Œæ¯”è¾ƒå¸¸è§çš„æœ‰ï¼š</p><ol><li><strong><code>o &lt;output&gt;</code></strong>: æŒ‡å®šè¾“å‡ºæ–‡ä»¶çš„åç§°ã€‚ä¾‹å¦‚ï¼Œ<code>go build -o myprogram</code>å°†ç”Ÿæˆåä¸º <code>myprogram</code> çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li><li><strong><code>ldflags &quot;&lt;flags&gt;&quot;</code></strong>: ç”¨äºä¼ é€’é“¾æ¥å™¨ï¼ˆldï¼‰çš„æ ‡å¿—ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ­¤é€‰é¡¹å°†ç‰¹å®šæ ‡å¿—ä¼ é€’ç»™é“¾æ¥å™¨ï¼Œä¾‹å¦‚è®¾ç½®ç‰ˆæœ¬ä¿¡æ¯æˆ–è‡ªå®šä¹‰é“¾æ¥è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œ<code>go build -ldflags &quot;-X main.version=1.0.0&quot;</code>å°†åœ¨æ„å»ºè¿‡ç¨‹ä¸­è®¾ç½®åä¸º <strong><code>version</code></strong> çš„å˜é‡çš„å€¼ä¸º <code>1.0.0</code>ã€‚</li><li><strong><code>gcflags &quot;&lt;flags&gt;&quot;</code></strong>: ç”¨äºä¼ é€’Goç¼–è¯‘å™¨ï¼ˆgcï¼‰çš„æ ‡å¿—ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ­¤é€‰é¡¹ä¼ é€’ç‰¹å®šæ ‡å¿—ç»™ç¼–è¯‘å™¨ï¼Œä¾‹å¦‚ä¼˜åŒ–çº§åˆ«æˆ–å…¶ä»–è°ƒè¯•ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œ<code>go build -gcflags &quot;-N -l&quot;</code> å°†ç¦ç”¨ä¼˜åŒ–å¹¶ç”Ÿæˆå¸¦æœ‰è°ƒè¯•ä¿¡æ¯çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li></ol><p>æœ¬æ¬¡çš„å®ç°åˆ™æ˜¯åˆ©ç”¨<code>ldflags &quot;&lt;flags&gt;&quot;</code>æŒ‡ä»¤è¿›è¡Œä¿¡æ¯çš„æ³¨å…¥ã€‚</p><h2 id="æ ¸å¿ƒæ„å»ºæŒ‡ä»¤"><a href="#æ ¸å¿ƒæ„å»ºæŒ‡ä»¤" class="headerlink" title="æ ¸å¿ƒæ„å»ºæŒ‡ä»¤"></a>æ ¸å¿ƒæ„å»ºæŒ‡ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">go build -o ./temp/release/linux_amd64/service -ldflags <span class="string">&quot;     -X &#x27;home-network-watcher/utility/bin_utils.GitTag=v1.11.12&#x27;     -X &#x27;home-network-watcher/utility/bin_utils.GitCommitLog=8405a9a7a15c33399d8cc400f08836e14b9dc085&#x27;     -X &#x27;home-network-watcher/utility/bin_utils.BuildTime=2023.05.21.03:56:22&#x27;     -X &#x27;home-network-watcher/utility/bin_utils.BuildGoVersion=github@action golang:1.20-buster&#x27; &quot;</span>  main.go</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥è¿›è¡ŒGoä»£ç ä¸GitHub Actionsã€Dockerfileçš„ç¼–å†™ã€‚</p><h2 id="Goç¾åŒ–æ³¨å…¥ä»£ç "><a href="#Goç¾åŒ–æ³¨å…¥ä»£ç " class="headerlink" title="Goç¾åŒ–æ³¨å…¥ä»£ç "></a>Goç¾åŒ–æ³¨å…¥ä»£ç </h2><p>æ–°å»ºä¸€ä¸ª.Goæ–‡ä»¶ï¼Œä»¥å˜é‡çš„å½¢å¼ç”¨ä»¥å‚¨å­˜åœ¨ç¨‹åºä¸­éœ€è¦çš„gitä¸ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªå‡½æ•°ç”¨ä»¥ç¾åŒ–æ˜¾ç¤ºä¿¡æ¯ã€‚</p><p>åˆ›å»ºéœ€è¦æ³¨å…¥ä¿¡æ¯çš„å˜é‡ï¼Œè®¾ç½®é»˜è®¤å€¼ä¸ºunknownï¼Œç­‰å¾…ç¼–è¯‘æ³¨å…¥å†è¿›è¡Œé‡æ–°èµ‹å€¼ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> binInfo</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;runtime&quot;</span></span><br><span class="line"><span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–ä¸º unknownï¼Œå¦‚æœç¼–è¯‘æ—¶æ²¡æœ‰ä¼ å…¥è¿™äº›å€¼ï¼Œåˆ™ä¸º unknown</span></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">GitTag         = <span class="string">&quot;unknown&quot;</span></span><br><span class="line">GitCommitLog   = <span class="string">&quot;unknown&quot;</span></span><br><span class="line">GitStatus      = <span class="string">&quot;unknown&quot;</span></span><br><span class="line">BuildTime      = <span class="string">&quot;unknown&quot;</span></span><br><span class="line">BuildGoVersion = <span class="string">&quot;unknown&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">VersionString = <span class="string">&quot;GitTag:&quot;</span> + GitTag + <span class="string">&quot;\n&quot;</span> +</span><br><span class="line"><span class="string">&quot;GitCommitLog:&quot;</span> + GitCommitLog + <span class="string">&quot;\n&quot;</span> +</span><br><span class="line"><span class="string">&quot;GitStatus:&quot;</span> + GitStatus + <span class="string">&quot;\n&quot;</span> +</span><br><span class="line"><span class="string">&quot;BuildTime:&quot;</span> + BuildTime + <span class="string">&quot;\n&quot;</span> +</span><br><span class="line"><span class="string">&quot;BuildGoVersion:&quot;</span> + BuildGoVersion + <span class="string">&quot;\n&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*// StringifySingleLine è¿”å›å•è¡Œæ ¼å¼</span></span><br><span class="line"><span class="comment">func StringifySingleLine() string &#123;</span></span><br><span class="line"><span class="comment">return fmt.Sprintf(&quot;GitTag=%s. GitCommitLog=%s. GitStatus=%s. BuildTime=%s. GoVersion=%s. runtime=%s/%s.&quot;,</span></span><br><span class="line"><span class="comment">GitTag, GitCommitLog, GitStatus, BuildTime, BuildGoVersion, runtime.GOOS, runtime.GOARCH)</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// StringifyMultiLine è¿”å›å¤šè¡Œæ ¼å¼</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">StringifyMultiLine</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;GitTag=%s\nGitCommitLog=%s\nGitStatus=%s\nBuildTime=%s\nGoVersion=%s\nruntime=%s/%s\n&quot;</span>,</span><br><span class="line">GitTag, GitCommitLog, GitStatus, BuildTime, BuildGoVersion, runtime.GOOS, runtime.GOARCH)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">beauty()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹ä¸€äº›å€¼åšç¾åŒ–å¤„ç†</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">beauty</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> GitStatus == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line"><span class="comment">// GitStatus ä¸ºç©ºæ—¶ï¼Œè¯´æ˜æœ¬åœ°æºç ä¸æœ€è¿‘çš„ commit è®°å½•ä¸€è‡´ï¼Œæ— ä¿®æ”¹</span></span><br><span class="line"><span class="comment">// ä¸ºå®ƒèµ‹ä¸€ä¸ªç‰¹æ®Šå€¼</span></span><br><span class="line">GitStatus = <span class="string">&quot;cleanly&quot;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// å°†å¤šè¡Œç»“æœåˆå¹¶ä¸ºä¸€è¡Œ</span></span><br><span class="line">GitStatus = strings.Replace(strings.Replace(GitStatus, <span class="string">&quot;\r\n&quot;</span>, <span class="string">&quot; |&quot;</span>, <span class="number">-1</span>), <span class="string">&quot;\n&quot;</span>, <span class="string">&quot; |&quot;</span>, <span class="number">-1</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åœ¨Goé¡¹ç›®ä¸­æ˜¾ç¤ºgitä¸ç¼–è¯‘ä¿¡æ¯"><a href="#åœ¨Goé¡¹ç›®ä¸­æ˜¾ç¤ºgitä¸ç¼–è¯‘ä¿¡æ¯" class="headerlink" title="åœ¨Goé¡¹ç›®ä¸­æ˜¾ç¤ºgitä¸ç¼–è¯‘ä¿¡æ¯"></a>åœ¨Goé¡¹ç›®ä¸­æ˜¾ç¤ºgitä¸ç¼–è¯‘ä¿¡æ¯</h2><p>å¯åœ¨main.goä¸­è®¾ç½®å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œä¿¡æ¯æ˜¾ç¤ºã€‚</p><p>å¦‚ä¸‹ä»£ç ï¼Œåœ¨è¿è¡Œç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œé€šè¿‡<code>-v</code>è¿›è¡Œä¿¡æ¯æ˜¾ç¤ºã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;flag&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">_ <span class="string">&quot;github.com/gogf/gf/contrib/drivers/mysql/v2&quot;</span></span><br><span class="line"><span class="string">&quot;github.com/gogf/gf/v2/os/gctx&quot;</span></span><br><span class="line"><span class="string">&quot;home-network-watcher/internal/cmd&quot;</span></span><br><span class="line">_ <span class="string">&quot;home-network-watcher/internal/logic&quot;</span></span><br><span class="line">_ <span class="string">&quot;home-network-watcher/internal/packed&quot;</span></span><br><span class="line">binInfo <span class="string">&quot;home-network-watcher/utility/bin_utils&quot;</span></span><br><span class="line"><span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">v := flag.Bool(<span class="string">&quot;v&quot;</span>, <span class="literal">false</span>, <span class="string">&quot;Show bin info.&quot;</span>)</span><br><span class="line">flag.Parse()</span><br><span class="line"><span class="keyword">if</span> *v &#123;</span><br><span class="line">_, _ = fmt.Fprint(os.Stderr, binInfo.StringifyMultiLine())</span><br><span class="line">os.Exit(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line">cmd.Main.Run(gctx.New())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…å¯ä»¥é€šè¿‡ç»‘å®šæ¥å£çš„å½¢å¼ï¼Œåœ¨è®¿é—®æœåŠ¡<code>/version</code> æ—¶è¿›è¡Œä¿¡æ¯çš„æ˜¾ç¤ºã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">group.ALL(<span class="string">&quot;/version&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(r *ghttp.Request)</span></span> &#123;</span><br><span class="line">r.Response.Write(binInfo.VersionString)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="Dockerfileç¼–å†™"><a href="#Dockerfileç¼–å†™" class="headerlink" title="Dockerfileç¼–å†™"></a>Dockerfileç¼–å†™</h2><p>é¦–å…ˆå®šä¹‰Goæ„å»ºå™¨</p><figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.20</span>-buster AS builder</span><br></pre></td></tr></table></figure><p>è®¾ç½®éœ€è¦æ³¨å…¥çš„æ„å»ºå‚æ•°çš„é»˜è®¤å€¼</p><figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ARG</span> GIT_TAG=<span class="string">&quot;unknown&quot;</span></span><br><span class="line"><span class="keyword">ARG</span> GIT_COMMIT_LOG=<span class="string">&quot;unknown&quot;</span></span><br><span class="line"><span class="keyword">ARG</span> BUILD_TIME=<span class="string">&quot;unknown&quot;</span></span><br><span class="line"><span class="keyword">ARG</span> BUILD_GO_VERSION=<span class="string">&quot;github@action golang:1.20-buster&quot;</span></span><br></pre></td></tr></table></figure><p>å…³é”®çš„æ³¨å…¥åˆ™æ˜¯é€šè¿‡åœ¨dockerè¿›è¡Œæ„å»ºæ—¶ä¹Ÿå¯ä»¥è¿›è¡Œå‚æ•°çš„ç»‘å®šè¿™ä¸ªç‰¹æ€§æ¥å®Œæˆçš„ã€‚</p><p>GitHub Actionå°†ARGçš„å‚æ•°ä¼ å…¥docker buildåï¼Œæ¥ä¸‹æ¥åˆ™å°†ä¿¡æ¯ä¼ å…¥åˆ°gf buildæˆ–è€…go buildä¸­ï¼Œé¦–å…ˆæ„å»ºä¼ å…¥çš„ä¿¡æ¯ã€‚</p><figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½® LDFlags å˜é‡</span></span><br><span class="line"><span class="keyword">ENV</span> LDFLAGS=<span class="string">&quot; \</span></span><br><span class="line"><span class="string">    -X &#x27;home-network-watcher/utility/bin_utils.GitTag=$&#123;GIT_TAG&#125;&#x27; \</span></span><br><span class="line"><span class="string">    -X &#x27;home-network-watcher/utility/bin_utils.GitCommitLog=$&#123;GIT_COMMIT_LOG&#125;&#x27; \</span></span><br><span class="line"><span class="string">    -X &#x27;home-network-watcher/utility/bin_utils.BuildTime=$&#123;BUILD_TIME&#125;&#x27; \</span></span><br><span class="line"><span class="string">    -X &#x27;home-network-watcher/utility/bin_utils.BuildGoVersion=$&#123;BUILD_GO_VERSION&#125;&#x27; \</span></span><br><span class="line"><span class="string">&quot;</span></span><br></pre></td></tr></table></figure><p>ä»¥<code>&#39;home-network-watcher/utility/bin_utils.GitTag=$&#123;GIT_TAG&#125;&#39;</code> ä¸ºä¾‹</p><p>goé€šè¿‡è¿½æº¯åŒ…åè¿›è¡Œå‚æ•°æ•°æ®çš„ä¼ é€’ï¼Œåœ¨ä¸Šè¿°å®šä¹‰å­˜å‚¨å˜é‡çš„Goæ–‡ä»¶ä¸­ï¼Œæ¨¡å—ä¸º<code>&quot;home-network-watcher/utility/bin_utilsâ€</code> ï¼Œåˆ™åœ¨æ„å»ºæ—¶ä¹Ÿæ˜¯ä¼ å…¥åŒ…ååŠ å†…éƒ¨çš„å˜é‡åè¿›è¡Œæ•°æ®ä¼ é€’ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°†ä¸Šé¢è·å–åˆ°çš„GIT_TAGä¼ é€’ç»™GitTagå˜é‡ã€‚</p><p>æœ€ååˆ™æ˜¯é€šè¿‡go buildä¼ é€’è¿›å»</p><figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> go build -ldflags <span class="string">&quot;<span class="variable">$&#123;LDFLAGS&#125;</span>&quot;</span> -o temp/release/linux_amd64/service main.go</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ä¸ºå®Œæ•´Dockerfile</p><figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.20</span>-buster AS builder</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ„å»ºå‚æ•°çš„é»˜è®¤å€¼</span></span><br><span class="line"><span class="keyword">ARG</span> GIT_TAG=<span class="string">&quot;unknown&quot;</span></span><br><span class="line"><span class="keyword">ARG</span> GIT_COMMIT_LOG=<span class="string">&quot;unknown&quot;</span></span><br><span class="line"><span class="keyword">ARG</span> BUILD_TIME=<span class="string">&quot;unknown&quot;</span></span><br><span class="line"><span class="keyword">ARG</span> BUILD_GO_VERSION=<span class="string">&quot;github@action golang:1.20-buster&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /go/src/app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . .</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å°æ„å»ºå‚æ•°</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;GIT_TAG=<span class="variable">$&#123;GIT_TAG&#125;</span>&quot;</span></span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;GIT_COMMIT_LOG=<span class="variable">$&#123;GIT_COMMIT_LOG&#125;</span>&quot;</span></span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;BUILD_TIME=<span class="variable">$&#123;BUILD_TIME&#125;</span>&quot;</span></span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;BUILD_GO_VERSION=<span class="variable">$&#123;BUILD_GO_VERSION&#125;</span>&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½® LDFlags å˜é‡</span></span><br><span class="line"><span class="keyword">ENV</span> LDFLAGS=<span class="string">&quot; \</span></span><br><span class="line"><span class="string">    -X &#x27;home-network-watcher/utility/bin_utils.GitTag=$&#123;GIT_TAG&#125;&#x27; \</span></span><br><span class="line"><span class="string">    -X &#x27;home-network-watcher/utility/bin_utils.GitCommitLog=$&#123;GIT_COMMIT_LOG&#125;&#x27; \</span></span><br><span class="line"><span class="string">    -X &#x27;home-network-watcher/utility/bin_utils.BuildTime=$&#123;BUILD_TIME&#125;&#x27; \</span></span><br><span class="line"><span class="string">    -X &#x27;home-network-watcher/utility/bin_utils.BuildGoVersion=$&#123;BUILD_GO_VERSION&#125;&#x27; \</span></span><br><span class="line"><span class="string">&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> go get github.com/gogf/gf/cmd/gf/v2</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> go install github.com/gogf/gf/cmd/gf/v2</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> gf build -e <span class="string">&quot;-ldflags \&quot;<span class="variable">$&#123;LDFLAGS&#125;</span>\&quot; &quot;</span></span></span><br><span class="line"><span class="comment"># RUN go build -ldflags &quot;$&#123;LDFLAGS&#125;&quot; -o temp/release/linux_amd64/service main.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> loads/alpine:<span class="number">3.8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> maintainer=<span class="string">&quot;Hamster &lt;liaolaixin@gmail.com&gt;&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"><span class="comment">#                                INSTALLATION</span></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å›ºå®šçš„é¡¹ç›®è·¯å¾„</span></span><br><span class="line"><span class="keyword">ENV</span> <span class="keyword">WORKDIR</span><span class="bash"> /app/main</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> --from=builder /go/src/app/temp/release/linux_amd64/service <span class="variable">$WORKDIR</span>/service</span></span><br><span class="line"><span class="comment"># æ·»åŠ åº”ç”¨å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶è®¾ç½®æ‰§è¡Œæƒé™</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> chmod +x <span class="variable">$WORKDIR</span>/service</span></span><br><span class="line"><span class="comment"># å¢åŠ ç«¯å£ç»‘å®š</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">10401</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"><span class="comment">#                                   START</span></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> <span class="variable">$WORKDIR</span></span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;./service&quot;</span>]</span></span><br></pre></td></tr></table></figure><h2 id="Github-Actionsç¼–å†™"><a href="#Github-Actionsç¼–å†™" class="headerlink" title="Github Actionsç¼–å†™"></a>Github Actionsç¼–å†™</h2><p>ååˆ†ç®€å•ï¼Œåªéœ€è¦åˆ©ç”¨Actionsé‡Œé¢å¯ä»¥æ–¹ä¾¿è·å–çš„gitä¿¡æ¯å³å¯ï¼Œé€šè¿‡<code>â€”build-arg</code>ä¼ é€’å…¥docker buildä¸­</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Build</span> <span class="string">and</span> <span class="string">push</span> <span class="string">Docker</span> <span class="string">image</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">tags:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;v*&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">IMAGE_NAME:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_IMAGE_NAME</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build-and-push:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Get</span> <span class="string">version</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">get_version</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;CURRENT_VERSION=$&#123;GITHUB_REF/refs\/tags\//&#125;&quot;</span> <span class="string">&gt;&gt;</span> <span class="string">$GITHUB_ENV</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Get</span> <span class="string">Git</span> <span class="string">Commit</span> <span class="string">Log</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">git-commit-log</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;GIT_COMMIT_LOG=$<span class="template-variable">&#123;&#123; github.sha &#125;&#125;</span>&quot;</span> <span class="string">&gt;&gt;</span> <span class="string">$GITHUB_ENV</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Get</span> <span class="string">Build</span> <span class="string">Time</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">build-time</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;BUILD_TIME=$(date +&#x27;%Y.%m.%d.%H:%M:%S&#x27;)&quot;</span> <span class="string">&gt;&gt;</span> <span class="string">$GITHUB_ENV</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">code</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Login</span> <span class="string">to</span> <span class="string">Dockerhub</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">docker/login-action@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_USERNAME</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_ACCESS_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Docker</span> <span class="string">image</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">docker</span> <span class="string">build</span> <span class="string">-t</span> <span class="string">$IMAGE_NAME:$&#123;&#123;</span> <span class="string">github.sha</span> <span class="string">&#125;&#125;</span> <span class="string">.</span> <span class="string">--build-arg</span> <span class="string">GIT_TAG=$&#123;&#123;env.CURRENT_VERSION&#125;&#125;</span> <span class="string">--build-arg</span> <span class="string">GIT_COMMIT_LOG=&quot;$&#123;&#123;env.GIT_COMMIT_LOG&#125;&#125;&quot;</span> <span class="string">--build-arg</span> <span class="string">BUILD_TIME=$&#123;&#123;env.BUILD_TIME&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Print</span> <span class="string">environment</span> <span class="string">variables</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">echo</span> <span class="string">&quot;$<span class="template-variable">&#123;&#123;env.GIT_COMMIT_LOG&#125;&#125;</span>&quot;</span></span><br><span class="line">          <span class="string">echo</span> <span class="string">&quot;$<span class="template-variable">&#123;&#123;env.BUILD_TIME&#125;&#125;</span>&quot;</span></span><br><span class="line">          <span class="string">echo</span> <span class="string">&quot;$<span class="template-variable">&#123;&#123;env.CURRENT_VERSION&#125;&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Tag</span> <span class="string">Docker</span> <span class="string">image</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">docker</span> <span class="string">tag</span> <span class="string">$IMAGE_NAME:$&#123;&#123;</span> <span class="string">github.sha</span> <span class="string">&#125;&#125;</span> <span class="string">$IMAGE_NAME:$&#123;&#123;</span> <span class="string">env.CURRENT_VERSION</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Tag</span> <span class="string">Docker</span> <span class="string">image</span> <span class="string">as</span> <span class="string">latest</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">docker</span> <span class="string">tag</span> <span class="string">$IMAGE_NAME:$&#123;&#123;</span> <span class="string">github.sha</span> <span class="string">&#125;&#125;</span> <span class="string">$IMAGE_NAME:latest</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Push</span> <span class="string">Docker</span> <span class="string">image</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">            <span class="string">docker</span> <span class="string">push</span> <span class="string">$IMAGE_NAME:$&#123;&#123;</span> <span class="string">env.CURRENT_VERSION</span> <span class="string">&#125;&#125;</span></span><br><span class="line">            <span class="string">docker</span> <span class="string">push</span> <span class="string">$IMAGE_NAME:latest</span></span><br></pre></td></tr></table></figure><p>å°†è·å–åˆ°çš„ä¿¡æ¯é¦–å…ˆå‚¨å­˜åœ¨<code>$GITHUB_ENV</code>ä¸­ï¼Œåœ¨æ„å»ºdocker buildæŒ‡ä»¤æ—¶è¿›è¡Œä¼ é€’</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build -t <span class="variable">$IMAGE_NAME</span>:<span class="variable">$&#123;&#123; github.sha &#125;</span>&#125; . --build-arg GIT_TAG=<span class="variable">$&#123;&#123;env.CURRENT_VERSION&#125;</span>&#125; --build-arg GIT_COMMIT_LOG=<span class="string">&quot;<span class="variable">$&#123;&#123;env.GIT_COMMIT_LOG&#125;</span>&#125;&quot;</span> --build-arg BUILD_TIME=<span class="variable">$&#123;&#123;env.BUILD_TIME&#125;</span>&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/05/23/z5es4VuFhUygAI7.png"></p><p>è¿™æ ·å­ä¾¿å®Œæˆäº†gitä¸ç‰ˆæœ¬ä¿¡æ¯çš„æ³¨å…¥ï¼Œååˆ†çš„è‡ªåŠ¨ä¾¿æ·ã€‚</p><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>ä¸»è¦çš„éš¾ç‚¹è¿˜æ˜¯å¦‚ä½•å°†ä¿¡æ¯åœ¨æ•´ä¸ªæ„å»ºçš„è¿‡ç¨‹ä¸­ä¼ é€’ä¸‹å»ï¼Œåªè¦å¯ä»¥ä¼ é€’å¥½æ‰€éœ€çš„ä¿¡æ¯åœ¨æ„å»ºçš„æ—¶å€™å³å¯ä»¥æ–¹ä¾¿åœ°é€šè¿‡go buildçš„-ldflagså°†ä¿¡æ¯ä¼ é€’å…¥äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Go </category>
          
          <category> Docker </category>
          
          <category> Github </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Go </tag>
            
            <tag> Github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨GitHub Actionsä¸ºGoé¡¹ç›®å®ç°ç®€æ˜“CI/CD</title>
      <link href="2023/05/01/%E4%BD%BF%E7%94%A8GitHub%20Actions%E4%B8%BAGo%E9%A1%B9%E7%9B%AE%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93CI:CD/"/>
      <url>2023/05/01/%E4%BD%BF%E7%94%A8GitHub%20Actions%E4%B8%BAGo%E9%A1%B9%E7%9B%AE%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93CI:CD/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Github-Actionsä¸CI-CD"><a href="#Github-Actionsä¸CI-CD" class="headerlink" title="Github Actionsä¸CI/CD"></a>Github Actionsä¸CI/CD</h2><p>GitHub Actionsæ˜¯GitHubæä¾›çš„ä¸€ç§è‡ªåŠ¨åŒ–å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æ‚¨åœ¨ä»£ç ä»“åº“ä¸­è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ã€‚CI/CDï¼ˆæŒç»­é›†æˆ/æŒç»­éƒ¨ç½²ï¼‰æ˜¯ä¸€ç§è‡ªåŠ¨åŒ–è½¯ä»¶å¼€å‘å®è·µï¼Œå¯ä»¥å¸®åŠ©æ‚¨æ›´å¿«åœ°äº¤ä»˜é«˜è´¨é‡çš„è½¯ä»¶ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨GitHub Actionsä¸ºGoé¡¹ç›®å®ç°ç®€æ˜“CI/CDã€‚</p><h2 id="å®ç°ç›®æ ‡"><a href="#å®ç°ç›®æ ‡" class="headerlink" title="å®ç°ç›®æ ‡"></a>å®ç°ç›®æ ‡</h2><p><img src="https://s2.loli.net/2023/05/01/3knKw9TEiHsIJYt.png"></p><p>å°†Actionsä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†</p><ol><li>åœ¨ä»£ç æäº¤åè¿›è¡Œç¼–è¯‘æ£€æŸ¥ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨ä»£ç é”™è¯¯ã€‚</li><li>åœ¨è¿›è¡Œgit tagæ“ä½œåï¼Œé’ˆå¯¹tagè¿›è¡Œdockeré•œåƒçš„æ„å»ºä¸æ¨é€ã€‚</li><li>è¾¾åˆ°ç‰ˆæœ¬å·å‘å¸ƒæ—¶ï¼Œè‡ªåŠ¨æ„å»ºå¤šå¹³å°å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ã€‚</li></ol><h2 id="å‰ç½®å‡†å¤‡"><a href="#å‰ç½®å‡†å¤‡" class="headerlink" title="å‰ç½®å‡†å¤‡"></a>å‰ç½®å‡†å¤‡</h2><h3 id="ä¸ºActionså¼€æ”¾ä»“åº“æƒé™"><a href="#ä¸ºActionså¼€æ”¾ä»“åº“æƒé™" class="headerlink" title="ä¸ºActionså¼€æ”¾ä»“åº“æƒé™"></a>ä¸ºActionså¼€æ”¾ä»“åº“æƒé™</h3><p>åœ¨ä»“åº“ä¸»é¡µï¼Œé€‰ä¸­<strong>Settingsâ†’Actionsâ†’Generalâ†’Workflow permissions</strong>ï¼Œå°†æƒé™è®¾ç½®ä¸ºRead and write permisssionsã€‚</p><p><img src="https://s2.loli.net/2023/05/01/4I6uCWfpiXgcNZK.png"></p><h3 id="è·å–Dockerç›¸å…³ä¿¡æ¯"><a href="#è·å–Dockerç›¸å…³ä¿¡æ¯" class="headerlink" title="è·å–Dockerç›¸å…³ä¿¡æ¯"></a>è·å–Dockerç›¸å…³ä¿¡æ¯</h3><p>å°†ä¿¡æ¯å‚¨å­˜åœ¨<strong>Actions secrets and variables</strong>ä¸­ï¼Œåˆ†åˆ«è®¾ç½®Dockerç”¨æˆ·åï¼Œtokenä¸ä»“åº“åç§°ã€‚</p><p>è·å– Docker token çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>ç™»å½•åˆ° Docker Hub å¸æˆ·ã€‚</li><li>ç‚¹å‡»å³ä¸Šè§’çš„å¤´åƒï¼Œé€‰æ‹©â€œAccount Settingsâ€ã€‚</li><li>åœ¨å·¦ä¾§èœå•ä¸­é€‰æ‹©â€œSecurityâ€ã€‚</li><li>æ»šåŠ¨åˆ°â€œAccess Tokensâ€éƒ¨åˆ†ï¼Œç„¶åå•å‡»â€œNew Access Tokenâ€æŒ‰é’®ã€‚</li><li>è¾“å…¥è®¿é—®ä»¤ç‰Œçš„æè¿°ï¼Œé€‰æ‹©ä»¤ç‰Œçš„æœ‰æ•ˆæœŸï¼Œå¹¶é€‰æ‹©è¦æˆäºˆä»¤ç‰Œçš„æƒé™ã€‚</li><li>å•å‡»â€œCreateâ€æŒ‰é’®ä»¥ç”Ÿæˆä»¤ç‰Œã€‚</li><li>å¤åˆ¶ç”Ÿæˆçš„ä»¤ç‰Œå¹¶ä¿å­˜åœ¨å®‰å…¨çš„åœ°æ–¹ã€‚</li></ol><p>ä»“åº“åç§°åˆ™ä¸º <strong>ç”¨æˆ·å/ä»“åº“å</strong></p><h3 id="è¿›è¡Œsecretsçš„è®¾ç½®"><a href="#è¿›è¡Œsecretsçš„è®¾ç½®" class="headerlink" title="è¿›è¡Œsecretsçš„è®¾ç½®"></a>è¿›è¡Œsecretsçš„è®¾ç½®</h3><p>åœ¨<strong>Settingsâ†’Secrets and variables</strong>ä¸­ç‚¹å‡»<strong>New repository secret</strong>è¿›è¡Œæ–°å¢ã€‚</p><ol><li>DOCKER_USERNAME</li><li>DOCKER_ACCESS_TOKEN </li><li>DOCKER_IMAGE_NAME</li></ol><p><img src="https://s2.loli.net/2023/05/01/5WStRVPOZh4MzeD.png"></p><h2 id="è®¾ç½®Actions"><a href="#è®¾ç½®Actions" class="headerlink" title="è®¾ç½®Actions"></a>è®¾ç½®Actions</h2><p>ç‚¹å‡»ä»“åº“å†…<strong>Actions</strong>æ¨¡å—ï¼Œç‚¹å‡»<strong>New workflow</strong>è¿›è¡Œå·¥ä½œæµçš„æ–°å¢ã€‚</p><h3 id="ä»£ç ç¼–è¯‘æ£€æŸ¥å·¥ä½œæµ"><a href="#ä»£ç ç¼–è¯‘æ£€æŸ¥å·¥ä½œæµ" class="headerlink" title="ä»£ç ç¼–è¯‘æ£€æŸ¥å·¥ä½œæµ"></a>ä»£ç ç¼–è¯‘æ£€æŸ¥å·¥ä½œæµ</h3><p>å°†ä¼šåœ¨æ£€æµ‹åˆ°pushæˆ–pull_requeståè¿›è¡Œä»£ç ç¼–è¯‘æ£€æŸ¥ã€‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># This workflow will build a golang project</span></span><br><span class="line"><span class="comment"># For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-go</span></span><br><span class="line"></span><br><span class="line"><span class="attr">name:</span> <span class="string">ä»£ç ç¼–è¯‘æµ‹è¯•</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> [ <span class="string">&quot;main&quot;</span> ]</span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span> [ <span class="string">&quot;main&quot;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">Go</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/setup-go@v3</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">go-version:</span> <span class="number">1.19</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">        <span class="string">go</span> <span class="string">build</span> <span class="string">-v</span> <span class="string">./...</span></span><br><span class="line">        <span class="string">pwd</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–è¯‘æ„å»ºå¹¶æ¨é€Dockeré•œåƒ"><a href="#ç¼–è¯‘æ„å»ºå¹¶æ¨é€Dockeré•œåƒ" class="headerlink" title="ç¼–è¯‘æ„å»ºå¹¶æ¨é€Dockeré•œåƒ"></a>ç¼–è¯‘æ„å»ºå¹¶æ¨é€Dockeré•œåƒ</h3><p>æ­¤å·¥ä½œæµåªä¼šåœ¨ä»“åº“æ–°å¢tagæ—¶è¿›è¡Œã€‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">git</span> <span class="string">tag</span> <span class="string">v0.0.1</span></span><br><span class="line"><span class="string">git</span> <span class="string">push</span> <span class="string">--tags</span></span><br></pre></td></tr></table></figure><p>å·¥ä½œæµåˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤</p><ol><li>è·å–tagä½œä¸ºç‰ˆæœ¬å·</li><li>æ ¹æ®Dockerfileè¿›è¡ŒDockeré•œåƒçš„æ„å»º</li><li>é’ˆå¯¹æ„å»ºå®Œæˆé•œåƒè¿›è¡Œtagæ‰“ç‰ˆæœ¬å·</li><li>å°†é•œåƒæ¨é€è‡³Dockerhub</li></ol><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Build</span> <span class="string">and</span> <span class="string">push</span> <span class="string">Docker</span> <span class="string">image</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">tags:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;v*&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">IMAGE_NAME:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_IMAGE_NAME</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build-and-push:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Get</span> <span class="string">version</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">get_version</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;VERSION=$&#123;GITHUB_REF/refs\/tags\//&#125;&quot;</span> <span class="string">&gt;&gt;</span> <span class="string">$GITHUB_OUTPUT</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">code</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Login</span> <span class="string">to</span> <span class="string">Dockerhub</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">docker/login-action@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_USERNAME</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKER_ACCESS_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Docker</span> <span class="string">image</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">docker</span> <span class="string">build</span> <span class="string">-t</span> <span class="string">$IMAGE_NAME:$&#123;&#123;</span> <span class="string">github.sha</span> <span class="string">&#125;&#125;</span> <span class="string">.</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Tag</span> <span class="string">Docker</span> <span class="string">image</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">docker</span> <span class="string">tag</span> <span class="string">$IMAGE_NAME:$&#123;&#123;</span> <span class="string">github.sha</span> <span class="string">&#125;&#125;</span> <span class="string">$IMAGE_NAME:$&#123;&#123;</span> <span class="string">steps.get_version.outputs.VERSION</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Tag</span> <span class="string">Docker</span> <span class="string">image</span> <span class="string">as</span> <span class="string">latest</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">docker</span> <span class="string">tag</span> <span class="string">$IMAGE_NAME:$&#123;&#123;</span> <span class="string">github.sha</span> <span class="string">&#125;&#125;</span> <span class="string">$IMAGE_NAME:latest</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Push</span> <span class="string">Docker</span> <span class="string">image</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">            <span class="string">docker</span> <span class="string">push</span> <span class="string">$IMAGE_NAME:$&#123;&#123;</span> <span class="string">steps.get_version.outputs.VERSION</span> <span class="string">&#125;&#125;</span></span><br><span class="line">            <span class="string">docker</span> <span class="string">push</span> <span class="string">$IMAGE_NAME:latest</span></span><br></pre></td></tr></table></figure><p>è¿™æ—¶æˆ‘ä»¬éœ€è¦é’ˆå¯¹é¡¹ç›®è¿›è¡ŒDockerfileçš„ç¼–å†™ï¼Œä¸€ä¸‹æ˜¯ä¸€ä¸ªé’ˆå¯¹Goframeé¡¹ç›®çš„ç¤ºä¾‹ã€‚</p><ol><li>è®¾ç½®golangæ„å»ºç¯å¢ƒï¼Œæœ‰è®¸å¤šç‰ˆæœ¬å¯ä»¥é€‰æ‹©ï¼Œå¯ä»¥å‚è€ƒ<a href="https://hub.docker.com/_/golang">https://hub.docker.com/_/golang</a>ï¼Œè¿™é‡Œé€‰æ‹©<strong>golang:1.20-busterã€‚</strong></li><li>æ‹·è´ä»£ç è‡³æ„å»ºç¯å¢ƒï¼Œè¿›è¡Œæ„å»ºï¼Œåœ¨è¿™é‡Œå°†ç¼–è¯‘å®Œæˆåå°†äºŒè¿›åˆ¶æ–‡ä»¶å‘½åä¸ºserviceï¼Œæ„å»ºå‘½ä»¤ä¹Ÿå¯ä»¥æŒ‡å®šç³»ç»Ÿä¸æ¶æ„ï¼Œåœ¨å‘½ä»¤ä¸­åŠ ä¸Š<strong>GOOS=linux GOARCH=amd64</strong>ã€‚</li><li>è®¾ç½®é•œåƒç¯å¢ƒï¼Œè®¾ç½®å·¥ä½œè·¯å¾„ï¼Œä¸ºäºŒè¿›åˆ¶æ–‡ä»¶æ·»åŠ æƒé™å¹¶å¢åŠ ç«¯å£ç»‘å®šã€‚</li><li>è®¾ç½®å…¥å£å‘½ä»¤ã€‚</li></ol><p>è‡³æ­¤ä¸€ä»½Dockerfileå°±ç¼–å†™å®Œæˆäº†ã€‚</p><figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.20</span>-buster AS builder</span><br><span class="line"></span><br><span class="line"><span class="keyword">ARG</span> VERSION=dev</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /go/src/app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . .</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> CGO_ENABLED=0 go build -o service -ldflags=-X=main.version=<span class="variable">$&#123;VERSION&#125;</span> main.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> loads/alpine:<span class="number">3.8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> maintainer=<span class="string">&quot;Hamster &lt;liaolaixin@gmail.com&gt;&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"><span class="comment">#                                INSTALLATION</span></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å›ºå®šçš„é¡¹ç›®è·¯å¾„</span></span><br><span class="line"><span class="keyword">ENV</span> <span class="keyword">WORKDIR</span><span class="bash"> /app/main</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> --from=builder /go/src/app/service <span class="variable">$WORKDIR</span>/service</span></span><br><span class="line"><span class="comment"># æ·»åŠ åº”ç”¨å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶è®¾ç½®æ‰§è¡Œæƒé™</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> chmod +x <span class="variable">$WORKDIR</span>/service</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¢åŠ ç«¯å£ç»‘å®š</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">10399</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"><span class="comment">#                                   START</span></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> <span class="variable">$WORKDIR</span></span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;./service&quot;</span>]</span></span><br></pre></td></tr></table></figure><p>æ–°å¢åé€šè¿‡git tagæµ‹è¯•å·¥ä½œæµï¼Œæ£€æŸ¥Dockerhubæ˜¯å¦æœ‰æœ€æ–°æ„å»ºé•œåƒã€‚</p><p><img src="https://s2.loli.net/2023/05/01/bTpIQWdFaGjXs6t.png"></p><p><img src="https://s2.loli.net/2023/05/01/slGbngieMRJIqZo.png"></p><h2 id="ç¼–è¯‘å¤šå¹³å°äºŒè¿›åˆ¶æ–‡ä»¶"><a href="#ç¼–è¯‘å¤šå¹³å°äºŒè¿›åˆ¶æ–‡ä»¶" class="headerlink" title="ç¼–è¯‘å¤šå¹³å°äºŒè¿›åˆ¶æ–‡ä»¶"></a>ç¼–è¯‘å¤šå¹³å°äºŒè¿›åˆ¶æ–‡ä»¶</h2><p>è®¾ç½®ä¸ºåªåœ¨æ–°å¢releaseæ—¶è¿›è¡Œæ„å»ºï¼Œå¯ä»¥è®¾ç½®éœ€è¦çš„ç³»ç»Ÿæ¶æ„æˆ–æ’é™¤çš„ï¼Œååˆ†ç®€å•æ˜“ç”¨ã€‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">build-go-binary</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">release:</span></span><br><span class="line">    <span class="attr">types:</span> [<span class="string">created</span>] <span class="comment"># è¡¨ç¤ºåœ¨åˆ›å»ºæ–°çš„ Release æ—¶è§¦å‘</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build-go-binary:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">strategy:</span></span><br><span class="line">      <span class="attr">matrix:</span></span><br><span class="line">        <span class="attr">goos:</span> [<span class="string">linux</span>, <span class="string">windows</span>, <span class="string">darwin</span>] <span class="comment"># éœ€è¦æ‰“åŒ…çš„ç³»ç»Ÿ</span></span><br><span class="line">        <span class="attr">goarch:</span> [<span class="string">amd64</span>, <span class="string">arm64</span>] <span class="comment"># éœ€è¦æ‰“åŒ…çš„æ¶æ„</span></span><br><span class="line">        <span class="attr">exclude:</span> <span class="comment"># æ’é™¤æŸäº›å¹³å°å’Œæ¶æ„</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">goarch:</span> <span class="string">arm64</span></span><br><span class="line">            <span class="attr">goos:</span> <span class="string">windows</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">wangyoucao577/go-release-action@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">github_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span> <span class="comment"># ä¸€ä¸ªé»˜è®¤çš„å˜é‡ï¼Œç”¨æ¥å®ç°å¾€ Release ä¸­æ·»åŠ æ–‡ä»¶</span></span><br><span class="line">          <span class="attr">goos:</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.goos</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">goarch:</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.goarch</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">goversion:</span> <span class="number">1.18</span> <span class="comment"># å¯ä»¥æŒ‡å®šç¼–è¯‘ä½¿ç”¨çš„ Golang ç‰ˆæœ¬</span></span><br><span class="line">          <span class="attr">binary_name:</span> <span class="string">&quot;push_go&quot;</span> <span class="comment"># å¯ä»¥æŒ‡å®šäºŒè¿›åˆ¶æ–‡ä»¶çš„åç§°</span></span><br><span class="line">          <span class="attr">pre_command:</span> <span class="string">export</span> <span class="string">CGO_ENABLED=0</span> <span class="string">&amp;&amp;</span> <span class="string">export</span> <span class="string">GODEBUG=http2client=0</span></span><br><span class="line">          <span class="attr">overwrite:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>åœ¨ä»“åº“ä¸­æ–°å¢releaseå¹¶æµ‹è¯•ï¼Œç­‰å¾…ç¼–è¯‘å®Œæˆåå³å¯åœ¨releaseä¸­æŸ¥çœ‹ä¸åŒç³»ç»Ÿæ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><p><img src="https://s2.loli.net/2023/05/01/AMTp96LrmwROkcj.png"></p><p><img src="https://s2.loli.net/2023/05/01/mCYA7OkpiJ43Pba.png"></p><h2 id="æ¶ˆæ¯é€šçŸ¥"><a href="#æ¶ˆæ¯é€šçŸ¥" class="headerlink" title="æ¶ˆæ¯é€šçŸ¥"></a>æ¶ˆæ¯é€šçŸ¥</h2><p>å¯é’ˆå¯¹Actionsçš„è¿›åº¦è¿›è¡Œæ¶ˆæ¯é€šçŸ¥ï¼Œåœ¨<strong>Settingsâ†’Webhooks</strong>è®¾ç½®æ¨é€ç›®æ ‡URLï¼Œæ­é…è‡ªå»ºçš„æ¶ˆæ¯æ¨é€å³å¯å®ç°åœ¨æ‰‹æœºä¸Šè·å–Actionsè¿›åº¦æµç¨‹ã€‚</p><img src="https://s2.loli.net/2023/05/01/tVzdPTXu3UZeb8k.jpg" style="zoom:33%;" /><h2 id="TODO-å¯å¤ç”¨å·¥ä½œæµ"><a href="#TODO-å¯å¤ç”¨å·¥ä½œæµ" class="headerlink" title="TODO: å¯å¤ç”¨å·¥ä½œæµ"></a>TODO: å¯å¤ç”¨å·¥ä½œæµ</h2>]]></content>
      
      
      <categories>
          
          <category> Go </category>
          
          <category> Docker </category>
          
          <category> Github </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Go </tag>
            
            <tag> Github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€†å‘ç ´è§£ç™»å½•è·å–360è·¯ç”±å™¨ä¿¡æ¯</title>
      <link href="2023/04/29/%E7%99%BB%E5%BD%95%E8%8E%B7%E5%8F%96360%E8%B7%AF%E7%94%B1%E5%99%A8%E4%BF%A1%E6%81%AF%20/"/>
      <url>2023/04/29/%E7%99%BB%E5%BD%95%E8%8E%B7%E5%8F%96360%E8%B7%AF%E7%94%B1%E5%99%A8%E4%BF%A1%E6%81%AF%20/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="é¡¹ç›®ä»‹ç»"><a href="#é¡¹ç›®ä»‹ç»" class="headerlink" title="é¡¹ç›®ä»‹ç»"></a>é¡¹ç›®ä»‹ç»</h2><p>360è·¯ç”±å™¨ç›®å‰æ²¡æœ‰æ— æŸåˆ·æœºçš„åŠæ³•ï¼Œè·å–sshç»ˆç«¯æƒé™è¾ƒä¸ºå›°éš¾ï¼Œå¦‚æƒ³è·å–è·¯ç”±å™¨çŠ¶æ€ä¿¡æ¯ä»¥åŠè¿æ¥è®¾å¤‡ä¿¡æ¯å°±æ¯”è¾ƒå›°éš¾ï¼Œä½†å¯ä»¥é€šè¿‡é‡‡ç”¨é€†å‘ç ´è§£ç½‘é¡µç™»é™†çš„å½¢å¼è¿›è¡Œåå°çš„ç™»å½•è¿›è¡Œä¿¡æ¯è·å–ã€‚</p><h2 id="é¡¹ç›®åœ°å€"><a href="#é¡¹ç›®åœ°å€" class="headerlink" title="é¡¹ç›®åœ°å€"></a>é¡¹ç›®åœ°å€</h2><p><a href="https://github.com/hamster1963/360-router-data-retriever">https://github.com/hamster1963/360-router-data-retriever</a></p><h2 id="å®ç°æ•ˆæœ"><a href="#å®ç°æ•ˆæœ" class="headerlink" title="å®ç°æ•ˆæœ"></a>å®ç°æ•ˆæœ</h2><p>é‡‡ç”¨ä»£ç è¿›è¡Œ360åå°çš„ç™»å½•ï¼Œè¿›è¡Œè·¯ç”±å™¨ä¿¡æ¯çš„è·å–ã€‚</p><p><img src="https://s2.loli.net/2023/04/29/lP21qpnfYciB8ku.png"></p><h2 id="ç™»é™†è¿‡ç¨‹åˆ†æ"><a href="#ç™»é™†è¿‡ç¨‹åˆ†æ" class="headerlink" title="ç™»é™†è¿‡ç¨‹åˆ†æ"></a>ç™»é™†è¿‡ç¨‹åˆ†æ</h2><h3 id="æŠ“åŒ…"><a href="#æŠ“åŒ…" class="headerlink" title="æŠ“åŒ…"></a>æŠ“åŒ…</h3><p>ç›´æ¥é‡‡ç”¨Safariçš„å¼€å‘è€…å·¥å…·è¿›è¡ŒæŠ“åŒ…ã€‚</p><p>åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ç®¡ç†å‘˜å¯†ç è¿›è¡Œç™»å½•ã€‚</p><img src="https://s2.loli.net/2023/04/29/qKLdOtjYf2nrNwJ.png" style="zoom:50%;" /><p><img src="https://s2.loli.net/2023/04/29/kSl9RNuyVEebhtM.png"></p><p>å¯ä»¥çœ‹åˆ°é¡µé¢é¦–å…ˆè¯·æ±‚äº†get_rand_key.cgiï¼ˆCGIæ˜¯é€šç”¨ç½‘å…³æ¥å£ï¼Œæ˜¯ä¸€ç§æ¯”è¾ƒä¼ ç»Ÿçš„åŠ¨æ€ç½‘é¡µçš„å®ç°æ–¹å¼ï¼‰ï¼Œé€šè¿‡Getæ–¹æ³•è·å–åˆ°äº†ä¸€ä¸²éšæœºçš„å­—ç¬¦ä¸²ã€‚</p><p><img src="https://s2.loli.net/2023/04/29/hYjMGzbcuK3rn9F.png"></p><p>åœ¨è·å–å®Œæˆåè¿›è¡Œä¸€äº›æš‚æ—¶æœªçŸ¥çš„å¤„ç†åè¯·æ±‚äº†web_login.cgiï¼Œè¯·æ±‚æ•°æ®ä¸­åŒ…æ‹¬äº†ç®¡ç†å‘˜ç”¨æˆ·åä¸å¯†ç ï¼Œå¯ä»¥å‘ç°passå¯†ç ä¸­çš„å€¼å¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€å¡«å…¥çš„å¯†ç å€¼ï¼Œé¦–å…ˆçŒœæµ‹å¯èƒ½ä¸ºmd5æˆ–aesåŠ å¯†åçš„å­—ç¬¦ä¸²ã€‚</p><p><img src="https://s2.loli.net/2023/04/29/dRaCTYcKXIGtn9e.png"></p><p>æŸ¥çœ‹ç™»é™†æ¥å£åœ¨ç™»é™†æˆåŠŸåçš„è¿”è¿˜ä¸Headerã€‚æ¥å£è¿”è¿˜äº†ç™»é™†çŠ¶æ€ç ä»¥åŠToken-IDå­—æ®µæ•°æ®ï¼ŒåŒæ—¶åœ¨è¿”å›çš„Headerä¸­å¯ä»¥çœ‹åˆ°æœ‰Set-Cookieå­—æ®µï¼ŒçŒœæµ‹åœ¨åç»­çš„æ•°æ®æ¥å£ä¸­åº”è¯¥ä¼šåœ¨è¯·æ±‚å¤´ä¸­æºå¸¦tokenä»¥åŠcookieè¿›è¡Œæƒé™éªŒè¯ã€‚</p><p><img src="https://s2.loli.net/2023/04/29/uhJop1VMIiS2AHF.png"></p><p><img src="https://s2.loli.net/2023/04/29/97WvGq3pLAVJyY8.png"></p><p>æŸ¥çœ‹åç»­è¯·æ±‚å¤´ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°åœ¨Cookieä¸­æºå¸¦äº†å…ˆå‰è¿”å›çš„ä¿¡æ¯ï¼ŒåŒ…å«Set-Cookieä»¥åŠtokenä¿¡æ¯ã€‚</p><p><img src="https://s2.loli.net/2023/04/29/p6kqYZRSTmeH5C7.png"></p><p>ç›®å‰ä¸ºæ­¢ï¼Œå¯ä»¥å¯¹ç™»é™†è¿‡ç¨‹è¿›è¡Œä¸€ä¸ªå°æ€»ç»“ã€‚</p><p>è¾“å…¥è´¦å·å¯†ç â†’ç‚¹å‡»ç™»å½•â†’è·å–éšæœºå­—ç¬¦ä¸²â†’è¿›è¡ŒåŠ å¯†â†’è¯·æ±‚ç™»å½•æ¥å£â†’è·å–Cookieä»¥åŠtoken</p><p>ç›®å‰ä¸»è¦éš¾ç‚¹ä¸ºå¦‚ä½•è¿›è¡ŒåŠ å¯†çš„é€†å‘ç ´è§£ã€‚</p><h3 id="é€†å‘"><a href="#é€†å‘" class="headerlink" title="é€†å‘"></a>é€†å‘</h3><p>é¦–å…ˆå°è¯•md5åŠ å¯†ï¼Œä¸ç›®æ ‡å¯†ç ä¸ä¸€è‡´ã€‚</p><p>å…¶æ¬¡å°è¯•ç®€å•ç²—æš´çš„æ–¹å¼ï¼ŒæŸ¥æºç ã€‚æŸ¥çœ‹jsä»£ç åï¼Œå‘ç°jsä»£ç è¿›è¿‡webpackæ··æ·†æ‰“åŒ…ï¼Œä»å‡½æ•°åä»¥åŠå˜é‡åä¸­å¾ˆéš¾æ‰¾å‡ºåŠ å¯†çš„ä»£ç å—ï¼Œå› æ­¤ä½¿ç”¨å…³é”®è¯è¿›è¡Œæœç´¢ã€‚</p><p><img src="https://s2.loli.net/2023/04/29/CvOPTq6JdurMxmn.png"></p><p>æœç„¶è¿˜æ˜¯ç®€å•ç²—æš´æ¯”è¾ƒæœ‰ç”¨ï¼Œåœ¨æœç´¢åˆ°AESå…³é”®è¯åï¼Œå¯ä»¥ä»ä»£ç ä¸­å‘ç°å¯†ç åŠ å¯†çš„å…³é”®é€»è¾‘<img src="https://s2.loli.net/2023/04/29/8x3N4wdiPZRpShO.png"></p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (;;)</span><br><span class="line">                        <span class="keyword">switch</span> (t.prev = t.next) &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                            <span class="keyword">return</span> t.next = <span class="number">2</span>, c(<span class="number">0</span>).then((<span class="function"><span class="keyword">function</span>(<span class="params">t</span>) </span>&#123;</span><br><span class="line">                                r = n || t;</span><br><span class="line">                                <span class="keyword">var</span> o = a.enc.Hex.parse(r.rand_key),</span><br><span class="line">                                    u = a.enc.Latin1.parse(<span class="string">&quot;360luyou@install&quot;</span>),</span><br><span class="line">                                    c = a.AES.encrypt(e, o, &#123;</span><br><span class="line">                                        iv: u,</span><br><span class="line">                                        mode: a.mode.CBC,</span><br><span class="line">                                        padding: a.pad.Pkcs7</span><br><span class="line">                                    &#125;);</span><br><span class="line">                                i = c.ciphertext.toString()</span><br><span class="line">                            &#125;));</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                            <span class="keyword">return</span> t.abrupt(<span class="string">&quot;return&quot;</span>, r.key_index + i);</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;end&quot;</span>:</span><br><span class="line">                            <span class="keyword">return</span> t.stop()</span><br><span class="line">                        &#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (;;)</span><br><span class="line">                        <span class="keyword">switch</span> (t.prev = t.next) &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                            <span class="keyword">if</span> (r = e.substr(<span class="number">32</span>, e.length - <span class="number">32</span>), i = &#123;&#125;, !n) &#123;</span><br><span class="line">                                t.next = <span class="number">6</span>;</span><br><span class="line">                                <span class="keyword">break</span></span><br><span class="line">                            &#125;</span><br><span class="line">                            i.rand_key = n,</span><br><span class="line">                            t.next = <span class="number">9</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">                            <span class="keyword">return</span> t.next = <span class="number">8</span>, c(<span class="number">0</span>, e, !<span class="number">0</span>);</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">                            i = t.sent;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">                            <span class="keyword">if</span> (i.rand_key) &#123;</span><br><span class="line">                                t.next = <span class="number">11</span>;</span><br><span class="line">                                <span class="keyword">break</span></span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">return</span> t.abrupt(<span class="string">&quot;return&quot;</span>, e);</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">                            <span class="keyword">return</span> u = a.enc.Hex.parse(i.rand_key), s = a.enc.Latin1.parse(<span class="string">&quot;360luyou@install&quot;</span>), d = a.enc.Hex.parse(r).toString(a.enc.Base64), p = a.AES.decrypt(d, u, &#123;</span><br><span class="line">                                iv: s,</span><br><span class="line">                                mode: a.mode.CBC,</span><br><span class="line">                                padding: a.pad.Pkcs7</span><br><span class="line">                            &#125;), t.abrupt(<span class="string">&quot;return&quot;</span>, p.toString(a.enc.Utf8));</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">16</span>:</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;end&quot;</span>:</span><br><span class="line">                            <span class="keyword">return</span> t.stop()</span><br><span class="line">                        &#125;</span><br></pre></td></tr></table></figure><p>è™½ç„¶å˜é‡åä¸å‡½æ•°åè¢«æ··æ·†ï¼Œä½†å¯ä»¥ä»ä»£ç ä¸­çœ‹åˆ°é‡‡ç”¨AESåŠ å¯†ã€‚</p><p>é¦–å…ˆè¿›è¡ŒåŠ å¯†å‰çš„å¤„ç†ï¼Œå¯¹rand_keyè¿›è¡Œhexï¼Œå®šä¹‰ivï¼Œè®¾ç½®æ¨¡å¼ä¸ºCBCï¼Œpaddingä¸ºPKCS7ã€‚</p><p>åŠ å¯†æ­¥éª¤ä¸ºï¼š</p><ol><li>è·å–rand_keyçš„å32ä½è¿›è¡Œhex</li><li>å¯¹å¯†ç è¿›è¡ŒPKCS7Encode</li><li>æœ€åä»¥hexåçš„rand_keyä½œä¸ºkeyï¼ŒPKCS7Encodeåçš„å¯†ç ä½œä¸ºplainTextï¼Œ360luyou@installå­—ç¬¦ä¸²è¿›è¡Œhexåä½œä¸ºiv</li><li>è¿›è¡ŒAESåŠ å¯†</li></ol><p>åœ¨åŠ å¯†ç»“æŸåï¼Œå°†å‰rand_keyå‰32ä½ä¸åŠ å¯†å­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥ä½œä¸ºpassä¼ è¾“åˆ°è·¯ç”±å™¨è¿›è¡Œç™»å½•éªŒè¯ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>è¿™é‡Œç»™å‡ºPythonä¸Goçš„åŠ å¯†ç¤ºä¾‹ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen_aes_str</span>(<span class="params">rand_key: <span class="built_in">bytes</span></span>):</span></span><br><span class="line">    mode = AES.MODE_CBC</span><br><span class="line">    iv = <span class="string">b&#x27;\x33\x36\x30\x6c\x75\x79\x6f\x75\x40\x69\x6e\x73\x74\x61\x6c\x6c&#x27;</span>  <span class="comment"># &quot;360luyou@install&quot;.decode(&#x27;hex&#x27;)</span></span><br><span class="line">    encryptor = AES.new(rand_key, mode, iv)</span><br><span class="line">    encoder = PKCS7Encoder()</span><br><span class="line">    text = <span class="string">&quot;password&quot;</span>  <span class="comment"># password</span></span><br><span class="line">    pad_text = encoder.encode(text)</span><br><span class="line">    cipher = encryptor.encrypt(<span class="built_in">bytes</span>(pad_text, <span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line">    <span class="keyword">return</span> cipher</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// GenerateAesString ç”ŸæˆåŠ å¯†å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Router)</span> <span class="title">GenerateAesString</span><span class="params">()</span> <span class="params">(err error)</span></span> &#123;</span><br><span class="line"><span class="comment">// åˆ¤æ–­éšæœºå­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span> r.randStr == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">g.Dump(<span class="string">&quot;randStr is empty&quot;</span>)</span><br><span class="line">err := r.GetRandomString()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">g.Dump(err)</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// randKey := &quot;fbf8a1ca3b31ace17adece7f6941a278017ff28b58200c5a153e07f5dc840b3f&quot;</span></span><br><span class="line">decodeString, err := hex.DecodeString(r.randStr[<span class="number">32</span>:])</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">g.Dump(err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">block, err := aes.NewCipher(decodeString)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">encryptor := cipher.NewCBCEncrypter(block, configs.DefaultAesIv)</span><br><span class="line">p7 := utils.PKCS7Encoder&#123;BlockSize: <span class="number">16</span>&#125;</span><br><span class="line">padded := p7.Encode([]<span class="keyword">byte</span>(r.Password))</span><br><span class="line">cipherText := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="built_in">len</span>(padded))</span><br><span class="line">encryptor.CryptBlocks(cipherText, padded)</span><br><span class="line">r.aesStr = hex.EncodeToString(cipherText)</span><br><span class="line"><span class="keyword">if</span> r.aesStr == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">g.Dump(<span class="string">&quot;aesStr is empty&quot;</span>)</span><br><span class="line"><span class="keyword">return</span> errors.New(<span class="string">&quot;aesStr is empty&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">g.Dump(gtime.Now().String() + <span class="string">&quot; Generate AESKey &quot;</span> + r.aesStr)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Goé¡¹ç›®ä»£ç å±‚çº§"><a href="#Goé¡¹ç›®ä»£ç å±‚çº§" class="headerlink" title="Goé¡¹ç›®ä»£ç å±‚çº§"></a>Goé¡¹ç›®ä»£ç å±‚çº§</h2><p>å®Œæ•´çš„ç™»é™†ä»¥åŠè·å–ä¿¡æ¯ç”±Goä»£ç è¿›è¡Œç¼–å†™ã€‚</p><p>é¦–å…ˆå®šä¹‰ä¸åŒæ¨¡å—çš„æ¥å£ä»¥åŠç»“æ„ä½“</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> LoginMethod <span class="keyword">interface</span> &#123;</span><br><span class="line">Login() error</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> AesMethod <span class="keyword">interface</span> &#123;</span><br><span class="line">GetRandomString() error</span><br><span class="line">GenerateAesString() error</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Router <span class="keyword">struct</span> &#123;</span><br><span class="line">Address   <span class="keyword">string</span></span><br><span class="line">Password  <span class="keyword">string</span></span><br><span class="line">state     <span class="keyword">bool</span></span><br><span class="line">aesIv     []<span class="keyword">byte</span></span><br><span class="line">inHeaders <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line">randStr   <span class="keyword">string</span></span><br><span class="line">aesStr    <span class="keyword">string</span></span><br><span class="line">token     <span class="keyword">string</span></span><br><span class="line">cookie    <span class="keyword">string</span></span><br><span class="line">Headers   <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> RouterMethod <span class="keyword">interface</span> &#123;</span><br><span class="line">GetRouterInfo() error</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åä»¥åµŒå¥—æ¥å£çš„å½¢å¼å°†ä¸åŒæ¨¡å—ç»„åˆèµ·æ¥ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> RouterController <span class="keyword">interface</span> &#123;</span><br><span class="line">LoginMethod</span><br><span class="line">AesMethod</span><br><span class="line">RouterMethod</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è°ƒç”¨æ—¶ï¼Œé‡‡ç”¨æ¥å£èµ‹å€¼çš„å½¢å¼è°ƒç”¨æ¥å£å†…çš„æ–¹æ³•ï¼Œä½¿ç¨‹åºå˜å¾—æ›´åŠ çµæ´»ä¸”ä¾¿äºç»´æŠ¤ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> routerMain internal.RouterController</span><br><span class="line">myRouter := internal.Router&#123;</span><br><span class="line">Address:  configs.RouterAddress,</span><br><span class="line">Password: configs.RouterPassword,</span><br><span class="line">&#125;</span><br><span class="line">routerMain = &amp;myRouter</span><br><span class="line"></span><br><span class="line">err := routerMain.GetRandomString()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">g.Dump(err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">err = routerMain.GenerateAesString()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">g.Dump(err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">err = routerMain.Login()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">g.Dump(err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">err = routerMain.GetRouterInfo()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">g.Dump(err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Go </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Go </tag>
            
            <tag> Router </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Goè¯­è¨€é¡¹ç›®å†…å­˜æ³„éœ²é—®é¢˜çš„å‘ç°ä¸è§£å†³</title>
      <link href="2023/04/24/%E4%B8%80%E6%AC%A1Go%E8%AF%AD%E8%A8%80%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E9%97%AE%E9%A2%98%E7%9A%84%E5%8F%91%E7%8E%B0%E4%B8%8E%E8%A7%A3%E5%86%B3/"/>
      <url>2023/04/24/%E4%B8%80%E6%AC%A1Go%E8%AF%AD%E8%A8%80%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E9%97%AE%E9%A2%98%E7%9A%84%E5%8F%91%E7%8E%B0%E4%B8%8E%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>åç«¯åŠŸèƒ½ä¸ºé‡‡é›†å®¶åº­ç½‘ç»œä¿¡æ¯å¹¶å¯¹å¤–å¼€æ”¾æ¥å£ï¼Œæ¯1sæˆ–æ¯5sè¿›è¡Œé‡‡é›†ã€‚</p><p>é‡‡ç”¨dockeræ‰“åŒ…Goç¼–è¯‘å®Œæˆåçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé€šè¿‡docker-composeéƒ¨ç½²åœ¨äº‘æœåŠ¡å™¨ä¸Šã€‚</p><p>åœ¨è¿è¡Œä¸€æ®µæ—¶é—´åï¼Œå†…å­˜æŠ¥è­¦ï¼Œå†…å­˜å ç”¨ä¸æ–­å¢é«˜ï¼Œæ€€ç–‘å‘ç”Ÿäº†å†…å­˜æ³„æ¼ï¼Œä¸”GCåœ¨å…¶ä¸­æ— æ³•æ¸…ç†å†…å­˜ã€‚</p><h2 id="åŸåŠŸèƒ½å®ç°"><a href="#åŸåŠŸèƒ½å®ç°" class="headerlink" title="åŸåŠŸèƒ½å®ç°"></a>åŸåŠŸèƒ½å®ç°</h2><p>åŸåŠŸèƒ½é‡‡ç”¨forå…³é”®è¯åŠ time.Sleepè¿›è¡Œå®ç°ï¼Œå‚è€ƒäºPythonæœåŠ¡å™¨æ¢é’ˆä»£ç ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">CPU = get_cpu()</span><br><span class="line">Uptime = get_uptime()</span><br><span class="line">Load_1, Load_5, Load_15 = os.getloadavg()</span><br><span class="line">MemoryTotal, MemoryUsed, SwapTotal, SwapFree = get_memory()</span><br><span class="line">HDDTotal, HDDUsed = get_hdd()</span><br><span class="line">  get_router_info()</span><br></pre></td></tr></table></figure><p>åœ¨Goä»£ç ä¸­ï¼Œä¸ºè·å–ä¸€æ®µæ—¶é—´å†…çš„æ¶ˆè€—æµé‡ä¸æ¶ˆè€—æµé‡æœ€å¤šç”¨æˆ·ï¼Œåˆ›å»ºäº†ä¸¤ä¸ªå˜é‡ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxFLow <span class="keyword">int</span></span><br><span class="line"><span class="keyword">var</span> maxFLowUser <span class="keyword">string</span></span><br></pre></td></tr></table></figure><p>å¹¶åœ¨åç»­çš„è®¡ç®—ä¸­ç»™å˜é‡èµ‹å€¼</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è®¡ç®—ç”¨æˆ·æµé‡å˜åŒ–</span></span><br><span class="line"><span class="keyword">for</span> _, user := <span class="keyword">range</span> userList.Array() &#123;</span><br><span class="line">userMap := gconv.Map(user)</span><br><span class="line"><span class="keyword">for</span> _, userNow := <span class="keyword">range</span> userListNow &#123;</span><br><span class="line">userNowMap := gconv.Map(userNow)</span><br><span class="line"><span class="keyword">if</span> userMap[<span class="string">&quot;id&quot;</span>] == userNowMap[<span class="string">&quot;id&quot;</span>] &#123;</span><br><span class="line"><span class="comment">// è®¡ç®—ç”¨æˆ·æµé‡å˜åŒ–</span></span><br><span class="line">totalFlow := gconv.Int(userNowMap[<span class="string">&quot;down&quot;</span>]) - gconv.Int(userMap[<span class="string">&quot;down&quot;</span>])</span><br><span class="line"><span class="keyword">if</span> totalFlow &gt; maxFLow &#123;</span><br><span class="line">maxFLow = totalFlow</span><br><span class="line">maxFLowUser = gconv.String(userNowMap[<span class="string">&quot;remark&quot;</span>])</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å†…å­˜æ³„éœ²åŸå› "><a href="#å†…å­˜æ³„éœ²åŸå› " class="headerlink" title="å†…å­˜æ³„éœ²åŸå› "></a>å†…å­˜æ³„éœ²åŸå› </h2><p>ç”±äºé‡‡ç”¨forå…³é”®è¯ï¼Œåœ¨ Go ä¸­ï¼Œå¦‚æœåœ¨ for å¾ªç¯ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œä½†åœ¨æ¯ä¸ªå¾ªç¯è¿­ä»£ä¸­æ²¡æœ‰å°†å…¶é‡æ–°åˆ†é…ï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æ®µå°†åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå¹¶åœ¨æ¯ä¸ªå¾ªç¯è¿­ä»£ä¸­å°†å…¶è¿æ¥åˆ°å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸Šï¼Œä½†å®ƒæ²¡æœ‰åœ¨æ¯ä¸ªè¿­ä»£ä¸­å°†æ–°å­—ç¬¦ä¸²é‡æ–°åˆ†é…ï¼š</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result <span class="keyword">string</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++ &#123;</span><br><span class="line">    newString := <span class="string">&quot;hello&quot;</span></span><br><span class="line">    result += newString</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯æ¬¡è¿­ä»£éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œä½†ç”±äºæ–°çš„å­—ç¬¦ä¸²æ²¡æœ‰é‡æ–°åˆ†é…ï¼Œå› æ­¤åœ¨æ¯ä¸ªè¿­ä»£åï¼Œå°†æœ‰ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å’Œä¸€ä¸ªæ—§çš„å­—ç¬¦ä¸²ï¼ˆåœ¨ result å˜é‡ä¸­ï¼‰ä»ç„¶å¼•ç”¨å®ƒã€‚è¿™ä¼šå¯¼è‡´å¤§é‡çš„å†…å­˜æ³„æ¼ï¼Œå› ä¸ºæ—§çš„å­—ç¬¦ä¸²ä»ç„¶å­˜åœ¨äºå†…å­˜ä¸­ï¼Œè€Œæ— æ³•è¢«åƒåœ¾å›æ”¶å™¨æ¸…ç†ã€‚</p><p>ä¸ºäº†é¿å…å†…å­˜æ³„æ¼ï¼Œå¯ä»¥åœ¨æ¯ä¸ªè¿­ä»£ä¸­å°†æ–°å­—ç¬¦ä¸²é‡æ–°åˆ†é…ç»™å˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result <span class="keyword">string</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++ &#123;</span><br><span class="line">    newString := <span class="string">&quot;hello&quot;</span></span><br><span class="line">    result += newString</span><br><span class="line">    newString = <span class="string">&quot;&quot;</span> <span class="comment">// é‡æ–°åˆ†é…</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡å°†æ–°å­—ç¬¦ä¸²åˆ†é…ç»™ä¸€ä¸ªæ–°å˜é‡ï¼Œå¯ä»¥ç¡®ä¿æ¯æ¬¡è¿­ä»£éƒ½æœ‰ä¸€ä¸ªæ–°çš„å˜é‡æ¥å¼•ç”¨æ–°çš„å­—ç¬¦ä¸²ï¼Œä»è€Œé¿å…å†…å­˜æ³„æ¼ã€‚åœ¨é‡æ–°åˆ†é…æ–°å˜é‡åï¼Œæ—§çš„å­—ç¬¦ä¸²å°†ä¸å†è¢«å¼•ç”¨ï¼Œå¹¶ä¸”å¯ä»¥è¢«åƒåœ¾å›æ”¶å™¨æ¸…ç†ã€‚</p><p>å½’æ ¹ç»“åº•ï¼Œåˆ™æ˜¯åœ¨æ¯æ¬¡å¾ªç¯ä¸­åˆ›å»ºçš„å˜é‡ä¸€ç›´å¤„åœ¨å¼•ç”¨çŠ¶æ€ï¼ŒGCæ— æ³•æ­£ç¡®å¯¹å…¶è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå¯¼è‡´ç¨‹åºå†…å­˜å ç”¨ä¸€ç›´åœ¨ä¸æ–­å‡é«˜ã€‚</p><h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><p>é‡‡ç”¨Goè¯­è¨€çš„æ€è·¯è¿›è¡Œä¹¦å†™ï¼Œé¡¹ç›®åŸºäºGoframeæ¡†æ¶ï¼Œé‡æ„åé‡‡ç”¨æ¡†æ¶ä¸­çš„gcronï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰è¿›è¡Œå®šæœŸçš„æ•°æ®æ‹‰å–ï¼Œå‡½æ•°å†…éƒ¨å®šä¹‰å‚æ•°å¯åœ¨å‡½æ•°åœ¨æ‰§è¡Œç»“æŸåç»“æŸå¼•ç”¨å…³ç³»ï¼Œé¿å…é‡‡ç”¨forå¾ªç¯é€ æˆå†…å­˜æ³„éœ²ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">_, err = gcron.AddSingleton(ctx, <span class="string">&quot;*/5 * * * * *&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(ctx context.Context)</span></span> &#123;</span><br><span class="line">err = network_utils.NodeUtils.GetNodeInfo()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">g.Dump(err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;, <span class="string">&quot;è·å–å½“å‰ä»£ç†èŠ‚ç‚¹ä¿¡æ¯&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…³äºGC"><a href="#å…³äºGC" class="headerlink" title="å…³äºGC"></a>å…³äºGC</h2><p>Goè¯­è¨€çš„åƒåœ¾å›æ”¶ï¼ˆGCï¼‰æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œçš„ï¼Œä¸æ˜¯åœ¨å‡½æ•°ç»“æŸåã€‚Goè¯­è¨€çš„åƒåœ¾å›æ”¶å™¨æ˜¯ä¸€ç§å¹¶å‘ã€è‡ªé€‚åº”çš„åƒåœ¾å›æ”¶å™¨ï¼Œå®ƒä¼šåœ¨ç¨‹åºè¿è¡Œæ—¶è‡ªåŠ¨æ£€æµ‹å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œå¹¶åœ¨å¿…è¦æ—¶å›æ”¶ä¸å†ä½¿ç”¨çš„å†…å­˜ã€‚</p><p>å…·ä½“æ¥è¯´ï¼ŒGoè¯­è¨€çš„åƒåœ¾å›æ”¶å™¨ä¼šåœ¨ç¨‹åºè¿è¡Œæ—¶å‘¨æœŸæ€§åœ°æ‰«æå †å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œæ ‡è®°é‚£äº›ä»ç„¶è¢«å¼•ç”¨çš„å¯¹è±¡ï¼Œç„¶åæ¸…ç†é‚£äº›æœªè¢«å¼•ç”¨çš„å¯¹è±¡ã€‚åƒåœ¾å›æ”¶å™¨çš„æ‰§è¡Œæ—¶é—´ç”±å½“å‰ç¨‹åºçš„å†…å­˜ä½¿ç”¨æƒ…å†µå’Œç¡¬ä»¶é…ç½®ç­‰å› ç´ å†³å®šï¼Œå¹¶ä¸ä¸€å®šåœ¨å‡½æ•°ç»“æŸåç«‹å³è¿›è¡Œã€‚</p><p>æ€»ä¹‹ï¼ŒGoè¯­è¨€çš„åƒåœ¾å›æ”¶æ˜¯ä¸€ç§è‡ªåŠ¨çš„ã€å¹¶å‘çš„æœºåˆ¶ï¼Œå®ƒå¯ä»¥åœ¨ç¨‹åºè¿è¡Œæ—¶å‘¨æœŸæ€§åœ°å›æ”¶æœªè¢«å¼•ç”¨çš„å†…å­˜ã€‚è¿™ç§æœºåˆ¶å¯ä»¥å‡å°‘ç¨‹åºå‘˜çš„å†…å­˜ç®¡ç†è´Ÿæ‹…ï¼Œæé«˜ç¨‹åºçš„å¯é æ€§å’Œæ€§èƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Go </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®¶åº­è´Ÿè½½å‡è¡¡èŠ‚ç‚¹éƒ¨ç½²</title>
      <link href="2023/04/15/%E5%AE%9E%E7%8E%B0%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%8A%82%E7%82%B9%E5%88%86%E4%BA%AB%20/"/>
      <url>2023/04/15/%E5%AE%9E%E7%8E%B0%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%8A%82%E7%82%B9%E5%88%86%E4%BA%AB%20/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å®ç°åŸå› "><a href="#å®ç°åŸå› " class="headerlink" title="å®ç°åŸå› "></a>å®ç°åŸå› </h2><p>èº«è¾¹çš„å‡ ä¸ªæœ‹å‹æœ‰ç€æŸ¥æŸ¥è°·æ­Œå­¦æœ¯ï¼Œé€›é€›igçš„éœ€æ±‚ï¼Œä½†æ˜¯éƒ½å¯¹ç§‘å­¦ä¸Šç½‘äº†è§£ä¸å¤šä¸”å¯¹è½¯ä»¶çš„è®¤çŸ¥è¿˜åœåœ¨vpné˜¶æ®µã€‚</p><p>å› æ­¤è®¡åˆ’åˆ©ç”¨å®¶ç”¨æœåŠ¡å™¨è¿›è¡ŒèŠ‚ç‚¹çš„æ­å»ºï¼Œå¯¹å¤–åªæš´éœ²ä¸ºvmessèŠ‚ç‚¹ï¼Œå†…éƒ¨ä¸ºå¤šä¸ªæœºåœºä¸æœåŠ¡å™¨ç»„æˆçš„è´Ÿè½½å‡è¡¡èŠ‚ç‚¹ï¼Œåœ¨ä¿éšœç§‘å­¦ä¸Šç½‘ç¨³å®šçš„åŒæ—¶ä¹Ÿå¯ä»¥é™ä½æœ‹å‹ä»¬çš„å­¦ä¹ æˆæœ¬ï¼Œé‡‡ç”¨æµè¡Œçš„è½¯ä»¶è¿›è¡Œè¿æ¥å³å¯ã€‚</p><h2 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h2><h3 id="å¤–éƒ¨èŠ‚ç‚¹æ•ˆæœ"><a href="#å¤–éƒ¨èŠ‚ç‚¹æ•ˆæœ" class="headerlink" title="å¤–éƒ¨èŠ‚ç‚¹æ•ˆæœ"></a>å¤–éƒ¨èŠ‚ç‚¹æ•ˆæœ</h3><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/IMG_2162.jpg" style="zoom: 20%;" /><h3 id="x-uié¢æ¿ç®¡ç†èŠ‚ç‚¹ç•Œé¢"><a href="#x-uié¢æ¿ç®¡ç†èŠ‚ç‚¹ç•Œé¢" class="headerlink" title="x-uié¢æ¿ç®¡ç†èŠ‚ç‚¹ç•Œé¢"></a>x-uié¢æ¿ç®¡ç†èŠ‚ç‚¹ç•Œé¢</h3><p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled.png"></p><h3 id="v2rayAç•Œé¢"><a href="#v2rayAç•Œé¢" class="headerlink" title="v2rayAç•Œé¢"></a>v2rayAç•Œé¢</h3><p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%201.png"></p><h3 id="Uptime-KumaèŠ‚ç‚¹ç›‘æ§ç•Œé¢"><a href="#Uptime-KumaèŠ‚ç‚¹ç›‘æ§ç•Œé¢" class="headerlink" title="Uptime KumaèŠ‚ç‚¹ç›‘æ§ç•Œé¢"></a>Uptime KumaèŠ‚ç‚¹ç›‘æ§ç•Œé¢</h3><p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%202.png"></p><h3 id="Barkæ¨é€ç¤ºä¾‹"><a href="#Barkæ¨é€ç¤ºä¾‹" class="headerlink" title="Barkæ¨é€ç¤ºä¾‹"></a>Barkæ¨é€ç¤ºä¾‹</h3><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/WechatIMG321.jpeg" style="zoom:25%;" /><h2 id="æ¶æ„è®¾è®¡"><a href="#æ¶æ„è®¾è®¡" class="headerlink" title="æ¶æ„è®¾è®¡"></a>æ¶æ„è®¾è®¡</h2><p>æ¶æ„ä¸ºä¸‹å›¾æ‰€ç¤º</p><p>åœ¨è·¯ç”±å™¨é’ˆå¯¹å•ç”¨æˆ·èŠ‚ç‚¹è¿›è¡Œç«¯å£è½¬å‘ï¼Œåœ¨xuiä¸­è®¾ç½®å‡ºç«™æµé‡è½¬å‘è‡³v2rayaã€‚</p><p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%203.png"></p><h2 id="éƒ¨ç½²ç¯å¢ƒ"><a href="#éƒ¨ç½²ç¯å¢ƒ" class="headerlink" title="éƒ¨ç½²ç¯å¢ƒ"></a>éƒ¨ç½²ç¯å¢ƒ</h2><p>åœ¨nasä¸Šè¿›è¡Œéƒ¨ç½²ï¼Œé…ç½®å¦‚ä¸‹å›¾ï¼Œé…ç½®ä¸é«˜ä½†è½¬å‘æ€§èƒ½è¿œå¤§äºå®¶å®½ä¸Šä¼ å¸¦å®½ï¼Œå› æ­¤å°†å°±ä¸€ä¸‹ä¹Ÿå¯ä»¥ã€‚</p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%204.png" style="zoom:50%;" /><p>å…¨éƒ¨ç»„ä»¶éƒ½åœ¨Dockerä¸Šè¿›è¡Œéƒ¨ç½²ï¼Œä¾¿äºåç»­çš„ç»´æŠ¤ä¸å‡çº§ã€‚</p><p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%205.png"></p><h2 id="v2rayaæ­å»º"><a href="#v2rayaæ­å»º" class="headerlink" title="v2rayaæ­å»º"></a>v2rayaæ­å»º</h2><p><strong>é¡¹ç›®åœ°å€</strong> <a href="https://github.com/v2rayA/v2rayA">https://github.com/v2rayA/v2rayA</a></p><p>æœ¬æ¬¡é¡¹ç›®çš„æ ¸å¿ƒè´Ÿè½½å‡è¡¡éƒ¨åˆ†ç”±å¼€æºé¡¹ç›®v2rayAè¿›è¡Œæ§åˆ¶ï¼Œv2rayA æ˜¯ä¸€ä¸ªæ”¯æŒå…¨å±€é€æ˜ä»£ç†çš„ V2Ray Linux å®¢æˆ·ç«¯ï¼ŒåŒæ—¶å…¼å®¹SSã€SSRã€Trojan(trojan-go)ã€<a href="https://github.com/esrrhs/pingtunnel">PingTunnel</a>åè®®ã€‚</p><h3 id="é‡‡ç”¨Dockerè¿›è¡Œéƒ¨ç½²v2rayA"><a href="#é‡‡ç”¨Dockerè¿›è¡Œéƒ¨ç½²v2rayA" class="headerlink" title="é‡‡ç”¨Dockerè¿›è¡Œéƒ¨ç½²v2rayA"></a>é‡‡ç”¨Dockerè¿›è¡Œéƒ¨ç½²v2rayA</h3><p>é‡‡ç”¨Dockerè¿›è¡Œéƒ¨ç½²ã€‚åœ¨æœ¬é¡¹ç›®ä¸­ç”±äºæˆ‘ä»¬ä¸»è¦å°†v2rayAç”¨ä»¥å¯¹å¤–æœåŠ¡ï¼Œå› æ­¤åœ¨éƒ¨ç½²æ—¶ä¸é‡‡ç”¨hostæ¨¡å¼ï¼Œæ‰‹åŠ¨è¿›è¡Œç«¯å£çš„å¼€æ”¾ã€‚æˆ‘ä»¬åªéœ€è¦å¼€å‘ç®¡ç†åå°çš„2017ç«¯å£ä»¥åŠæ¥æ”¶x-uié¢æ¿è½¬å‘socks5æµé‡çš„20172ç«¯å£ï¼ˆå¯è‡ªè¡Œé€‰æ‹©æ›´æ¢ï¼‰ã€‚ä¹Ÿå¯ä»¥å¼€æ”¾æ›´å¤šç«¯å£ä¾›åç»­å…¶ä»–ç”¨é€”ã€‚</p><figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="comment"># run v2raya</span></span><br><span class="line">docker <span class="keyword">run</span><span class="bash"> -d \</span></span><br><span class="line"><span class="bash">  -p 2017:2017 \</span></span><br><span class="line"><span class="bash">  -p 20170-20172:20170-20172 \</span></span><br><span class="line"><span class="bash">  --restart=always \</span></span><br><span class="line"><span class="bash">  --name v2raya \</span></span><br><span class="line"><span class="bash">  -e V2RAYA_LOG_FILE=/tmp/v2raya.log \</span></span><br><span class="line"><span class="bash">  -v /etc/v2raya:/etc/v2raya \</span></span><br><span class="line"><span class="bash">  mzz2017/v2raya</span></span><br></pre></td></tr></table></figure><h3 id="ç®¡ç†åå°é…ç½®"><a href="#ç®¡ç†åå°é…ç½®" class="headerlink" title="ç®¡ç†åå°é…ç½®"></a>ç®¡ç†åå°é…ç½®</h3><p>å› ä¸ºv2rayAçš„ç”¨é€”ä¸ºèŠ‚ç‚¹çš„è´Ÿè½½å‡è¡¡ï¼Œå› æ­¤åœ¨è®¾ç½®ä¸­å¯ä»¥å°†åˆ†æµå…³é—­ï¼Œå¯¹å¤–åªä½œä¸ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”å°†é€æ˜ä»£ç†ä¸ç³»ç»Ÿä»£ç†å…³é—­ï¼Œä¸è¿›è¡Œè¿‡å¤šçš„æµé‡å¤„ç†ã€‚</p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%206.png" style="zoom:50%;" /><p>åœ¨è®¾ç½®ä¸­å¼€å¯ç«¯å£åˆ†äº«ï¼Œåœ¨åœ°å€ä¸ç«¯å£ä¸­å°†socks5ç«¯å£ç»‘å®šåˆ°Dockeréƒ¨ç½²æ—¶å¼€æ”¾çš„ç«¯å£ã€‚</p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%207.png" style="zoom:50%;" /><h3 id="èŠ‚ç‚¹çš„æ·»åŠ ä¸è´Ÿè½½å‡è¡¡"><a href="#èŠ‚ç‚¹çš„æ·»åŠ ä¸è´Ÿè½½å‡è¡¡" class="headerlink" title="èŠ‚ç‚¹çš„æ·»åŠ ä¸è´Ÿè½½å‡è¡¡"></a>èŠ‚ç‚¹çš„æ·»åŠ ä¸è´Ÿè½½å‡è¡¡</h3><p>v2rayAå¯ä»¥æ·»åŠ æœåŠ¡å™¨ä¸è®¢é˜…å¤šç§ä½¿ç”¨èŠ‚ç‚¹çš„æ–¹å¼ï¼Œç‚¹å‡»åˆ›å»ºä¸ºæ–°å»ºå•èŠ‚ç‚¹ï¼Œç‚¹å‡»å¯¼å…¥åˆ™ä¸ºè®¢é˜…ã€‚</p><p>åœ¨æ·»åŠ å®ŒèŠ‚ç‚¹ä¸è®¢é˜…åï¼Œåªéœ€ç‚¹å‡»èŠ‚ç‚¹åçš„é€‰æ‹©ï¼Œå³ä¸ºåŠ å…¥è´Ÿè½½å‡è¡¡åˆ—è¡¨ä¸­ã€‚</p><p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%208.png"></p><p>è´Ÿè½½å‡è¡¡çš„åŸç†ä¸ºé’ˆå¯¹æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œå»¶è¿Ÿçš„æµ‹è¯•ï¼Œè‡ªåŠ¨è¿æ¥å»¶è¿Ÿæœ€ä½çš„èŠ‚ç‚¹è¿›è¡Œä½¿ç”¨ã€‚åœ¨PROXYä¸­å¯ä»¥é…ç½®å»¶è¿Ÿæµ‹è¯•çš„ç«™ç‚¹ï¼Œæµ‹è¯•é—´éš”æ—¶é—´ã€‚</p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%209.png" style="zoom:33%;" /><p>é…ç½®å®Œæˆåï¼Œç‚¹å‡»å·¦ä¸Šè§’è¿è¡ŒæŒ‰é’®ï¼Œç­‰å¾…æ˜¾ç¤ºæ­£åœ¨è¿è¡Œè“è‰²æŒ‰é’®å³é…ç½®å®Œæˆã€‚ä¹Ÿå¯åœ¨å·¦è¾¹æ ä¸­æŸ¥çœ‹å½“å‰èŠ‚ç‚¹è¿æ¥æƒ…å†µä¸å»¶è¿Ÿã€‚</p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%2010.png" style="zoom: 33%;" /><h2 id="x-uiæ­å»º"><a href="#x-uiæ­å»º" class="headerlink" title="x-uiæ­å»º"></a>x-uiæ­å»º</h2><p>x-uiä¸ºä¸€ä¸ªæ”¯æŒå¤šåè®®å¤šç”¨æˆ·çš„xrayé¢æ¿ï¼Œåœ¨é¡¹ç›®ä¸­åªè¦ç”¨ä½œå¯¹å¤–å¼€æ”¾èŠ‚ç‚¹çš„ç®¡ç†ä»¥åŠå°†å‡ºå£æµé‡è½¬å‘è‡³v2rayAã€‚</p><h3 id="é‡‡ç”¨Dockerè¿›è¡Œéƒ¨ç½²x-ui"><a href="#é‡‡ç”¨Dockerè¿›è¡Œéƒ¨ç½²x-ui" class="headerlink" title="é‡‡ç”¨Dockerè¿›è¡Œéƒ¨ç½²x-ui"></a>é‡‡ç”¨Dockerè¿›è¡Œéƒ¨ç½²x-ui</h3><p>åœ¨éƒ¨ç½²x-uiæ—¶ï¼Œé‡‡ç”¨hostæ¨¡å¼è¿›è¡Œéƒ¨ç½²ï¼Œé¿å…åç»­èŠ‚ç‚¹æ–°å¢å¸¦æ¥çš„ç«¯å£æ˜ å°„é—®é¢˜ã€‚</p><figure class="highlight docker"><table><tr><td class="code"><pre><span class="line">mkdir x-ui &amp;&amp; cd x-ui</span><br><span class="line">docker <span class="keyword">run</span><span class="bash"> -itd --network=host \</span></span><br><span class="line"><span class="bash">    -v <span class="variable">$PWD</span>/db/:/etc/x-ui/ \</span></span><br><span class="line"><span class="bash">    -v <span class="variable">$PWD</span>/cert/:/root/cert/ \</span></span><br><span class="line"><span class="bash">    --name x-ui --restart=unless-stopped \</span></span><br><span class="line"><span class="bash">    enwaiax/x-ui:latest</span></span><br></pre></td></tr></table></figure><p>éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ip:54321è¿›è¡Œé¢æ¿çš„è®¿é—®ï¼Œåˆå§‹ç”¨æˆ·åä¸å¯†ç ä¸ºadminã€‚</p><p>ç™»é™†å®Œæˆåï¼ŒåŠ¡å¿…ä¿®æ”¹ç”¨æˆ·åä¸å¯†ç ã€‚</p><h3 id="x-uiæµé‡è½¬å‘é…ç½®"><a href="#x-uiæµé‡è½¬å‘é…ç½®" class="headerlink" title="x-uiæµé‡è½¬å‘é…ç½®"></a>x-uiæµé‡è½¬å‘é…ç½®</h3><p>æ­¤æ­¥å°†é…ç½®x-uiå…¨éƒ¨çš„å‡ºç«™æµé‡è½¬å‘è‡³v2rayAä¸­ï¼Œè¾¾åˆ°é‡‡ç”¨è´Ÿè½½å‡è¡¡èŠ‚ç‚¹çš„ç›®çš„ã€‚</p><p>åœ¨é¢æ¿è®¾ç½®ä¸­çš„xrayé¡¹ç›®ç›¸å…³è®¾ç½®ä¸­è¿›è¡Œè®¾ç½®ã€‚</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;api&quot;</span>:&#123;</span><br><span class="line">        <span class="attr">&quot;services&quot;</span>:[</span><br><span class="line">            <span class="string">&quot;HandlerService&quot;</span>,</span><br><span class="line">            <span class="string">&quot;LoggerService&quot;</span>,</span><br><span class="line">            <span class="string">&quot;StatsService&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;tag&quot;</span>:<span class="string">&quot;api&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;inbounds&quot;</span>:[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;listen&quot;</span>:<span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;port&quot;</span>:<span class="number">62789</span>,</span><br><span class="line">            <span class="attr">&quot;protocol&quot;</span>:<span class="string">&quot;dokodemo-door&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;settings&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;address&quot;</span>:<span class="string">&quot;127.0.0.1&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;tag&quot;</span>:<span class="string">&quot;api&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;outbounds&quot;</span>:[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;protocol&quot;</span>:<span class="string">&quot;socks&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;settings&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;servers&quot;</span>:[</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;address&quot;</span>:<span class="string">&quot;192.168.31.93&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;port&quot;</span>:<span class="number">20172</span>,</span><br><span class="line">                        <span class="attr">&quot;users&quot;</span>:[</span><br><span class="line">                            </span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;protocol&quot;</span>:<span class="string">&quot;freedom&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;tag&quot;</span>:<span class="string">&quot;direct&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;settings&quot;</span>:&#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;protocol&quot;</span>:<span class="string">&quot;blackhole&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;settings&quot;</span>:&#123;</span><br><span class="line"></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;tag&quot;</span>:<span class="string">&quot;blocked&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;policy&quot;</span>:&#123;</span><br><span class="line">        <span class="attr">&quot;system&quot;</span>:&#123;</span><br><span class="line">            <span class="attr">&quot;statsInboundDownlink&quot;</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;statsInboundUplink&quot;</span>:<span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;routing&quot;</span>:&#123;</span><br><span class="line">        <span class="attr">&quot;rules&quot;</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;inboundTag&quot;</span>:[</span><br><span class="line">                    <span class="string">&quot;api&quot;</span></span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">&quot;outboundTag&quot;</span>:<span class="string">&quot;api&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;type&quot;</span>:<span class="string">&quot;field&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;ip&quot;</span>:[</span><br><span class="line">                    <span class="string">&quot;geoip:private&quot;</span></span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">&quot;outboundTag&quot;</span>:<span class="string">&quot;blocked&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;type&quot;</span>:<span class="string">&quot;field&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;type&quot;</span>:<span class="string">&quot;field&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;domain&quot;</span>:[</span><br><span class="line">                    <span class="string">&quot;geosite:cn&quot;</span></span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">&quot;outboundTag&quot;</span>:<span class="string">&quot;direct&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;type&quot;</span>:<span class="string">&quot;field&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;ip&quot;</span>:[</span><br><span class="line">                    <span class="string">&quot;geoip:cn&quot;</span></span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">&quot;outboundTag&quot;</span>:<span class="string">&quot;direct&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;outboundTag&quot;</span>:<span class="string">&quot;blocked&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;protocol&quot;</span>:[</span><br><span class="line">                    <span class="string">&quot;bittorrent&quot;</span></span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">&quot;type&quot;</span>:<span class="string">&quot;field&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;stats&quot;</span>:&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ¸å¿ƒåœ¨outboundsä¸­ï¼Œè¿›è¡Œåè®®çš„é…ç½®ä¸ç›®æ ‡æœåŠ¡å™¨ipä¸ç«¯å£çš„é…ç½®ï¼Œæ­¤å¤„å¡«å…¥æœåŠ¡å™¨å†…ç½‘ipä¸socks5ç«¯å£å³å¯ã€‚</p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%2011.png" style="zoom:50%;" /><h3 id="æ·»åŠ èŠ‚ç‚¹è¿›è¡Œæµ‹è¯•"><a href="#æ·»åŠ èŠ‚ç‚¹è¿›è¡Œæµ‹è¯•" class="headerlink" title="æ·»åŠ èŠ‚ç‚¹è¿›è¡Œæµ‹è¯•"></a>æ·»åŠ èŠ‚ç‚¹è¿›è¡Œæµ‹è¯•</h3><p>åœ¨å…¥ç«™åˆ—è¡¨è¿›è¡Œå¯¹å¤–èŠ‚ç‚¹çš„æ·»åŠ ï¼Œé€‰æ‹©vmessåè®®ï¼Œç«¯å£éšæœºç”Ÿæˆï¼Œå…¶ä½™é…ç½®ä¸å˜ç‚¹å‡»æ·»åŠ ã€‚</p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%2012.png" style="zoom:50%;" /><p>å¯ä»¥åˆ©ç”¨è½¯ä»¶æ‰«æèŠ‚ç‚¹äºŒç»´ç è¿›è¡Œè¿æ¥æµ‹è¯•ã€‚</p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%2013.png" style="zoom:50%;" /><h2 id="DDNS"><a href="#DDNS" class="headerlink" title="DDNS"></a>DDNS</h2><p>åœ¨ä¸Šè¿°ç»„ä»¶é…ç½®å®Œæˆåï¼Œæœ€åä¸€æ­¥åˆ™æ˜¯è¿›è¡ŒåŸŸåçš„é…ç½®ï¼Œå› ä¸ºå®¶å®½çš„ipé€šå¸¸åœ¨72å°æ—¶ä¼šè¿›è¡Œé‡æ–°æ‹¨å·è·å–ï¼Œå› æ­¤é‡‡ç”¨DDNSç”¨äºåŠ¨æ€åŸŸåè§£æï¼Œçœå»æ‰‹åŠ¨æ›´æ¢ipè¿›è¡Œè¿æ¥çš„ä½¿ç”¨æˆæœ¬ã€‚</p><p>æœ¬é¡¹ç›®é‡‡ç”¨DDNS-Goè¿›è¡ŒåŠ¨æ€è§£æã€‚åœ¨Domainsä¸­å¡«å…¥éœ€è¦åŠ¨æ€è§£æçš„åŸŸåå³å¯ã€‚IPå˜æ›´é€šçŸ¥é…ç½®å¯é‡‡ç”¨barkæ¨é€è¿›è¡Œé€šçŸ¥ã€‚</p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%2014.png" style="zoom:50%;" /><h2 id="è·¯ç”±å™¨è¿›è¡Œç«¯å£è½¬å‘å¹¶é€šè¿‡åŸŸåè¿›è¡ŒèŠ‚ç‚¹è¿æ¥"><a href="#è·¯ç”±å™¨è¿›è¡Œç«¯å£è½¬å‘å¹¶é€šè¿‡åŸŸåè¿›è¡ŒèŠ‚ç‚¹è¿æ¥" class="headerlink" title="è·¯ç”±å™¨è¿›è¡Œç«¯å£è½¬å‘å¹¶é€šè¿‡åŸŸåè¿›è¡ŒèŠ‚ç‚¹è¿æ¥"></a>è·¯ç”±å™¨è¿›è¡Œç«¯å£è½¬å‘å¹¶é€šè¿‡åŸŸåè¿›è¡ŒèŠ‚ç‚¹è¿æ¥</h2><p>åœ¨è·¯ç”±å™¨åå°é’ˆå¯¹å•èŠ‚ç‚¹è¿›è¡Œç«¯å£è½¬å‘å³å¯ç”¨åŸŸååŠ ç«¯å£çš„æ–¹å¼è¿›è¡ŒèŠ‚ç‚¹è¿æ¥ã€‚</p><p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%2015.png"></p><h2 id="èŠ‚ç‚¹ç›‘æ§"><a href="#èŠ‚ç‚¹ç›‘æ§" class="headerlink" title="èŠ‚ç‚¹ç›‘æ§"></a>èŠ‚ç‚¹ç›‘æ§</h2><p>é‡‡ç”¨uptimekumaè¿›è¡ŒèŠ‚ç‚¹çš„ç›‘æ§ï¼Œé‡‡ç”¨barkè¿›è¡Œæ¨é€ã€‚</p><p>åœ¨xuiæ–°å»ºä¸€ä¸ªåŠ å¯†çš„sock5èŠ‚ç‚¹ï¼ˆæ³¨æ„âš ï¸ï¼šè¿™ç§æ–¹å¼å¹¶ä¸å®‰å…¨ï¼‰ï¼Œè®°å½•ä¿¡æ¯ååœ¨uptimekumaä¸­è¿›è¡Œåˆ›å»ºæ–°ç›‘æ§æœåŠ¡ã€‚</p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%2016.png" style="zoom:50%;" /><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%2017.png" style="zoom:50%;" /><p>é€šè¿‡æ£€æµ‹è®¿é—®<a href="https://gstatic.com/generate_204">https://gstatic.com/generate_204</a>è¿›è¡ŒèŠ‚ç‚¹è¿é€šæ€§çš„æ£€æµ‹ã€‚</p><p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%2018.png"></p><h3 id="èŠ‚ç‚¹é€šçŸ¥"><a href="#èŠ‚ç‚¹é€šçŸ¥" class="headerlink" title="èŠ‚ç‚¹é€šçŸ¥"></a>èŠ‚ç‚¹é€šçŸ¥</h3><p>é‡‡ç”¨barkè¿›è¡ŒèŠ‚ç‚¹çŠ¶æ€çš„é€šçŸ¥ï¼Œå…³äºæ¨é€é…ç½®å¯ç›´æ¥ä½¿ç”¨Uptime Kumaä¸­çš„barké…ç½®æˆ–BarkPush-Goè¿›è¡Œå¤šè®¾å¤‡ç»Ÿä¸€æ¨é€ï¼Œæ­¤é¡¹ç›®ä»åœ¨å®Œå–„ä¸­ï¼Œè¯·å…³æ³¨åç»­æ–‡ç« ã€‚</p><img src="https://raw.githubusercontent.com/hamster1963/photostore/main/new_store/Untitled%2019.png" style="zoom:33%;" /><h2 id="æœåŠ¡å™¨ç›‘æ§"><a href="#æœåŠ¡å™¨ç›‘æ§" class="headerlink" title="æœåŠ¡å™¨ç›‘æ§"></a>æœåŠ¡å™¨ç›‘æ§</h2><p>æœ€åå¯ä»¥é’ˆå¯¹nasæ•´ä½“è¿›è¡ŒçŠ¶æ€çš„ç›‘æ§ï¼Œæœ¬é¡¹ç›®é‡‡ç”¨å“ªå’æ¢é’ˆè¿›è¡Œç›‘æ§ã€‚</p><p><a href="https://github.com/naiba/nezha">https://github.com/naiba/nezha</a></p><p><img src="https://github.com/naiba/nezha/raw/master/resource/static/brand.svg" alt="https://github.com/naiba/nezha/raw/master/resource/static/brand.svg"></p><h2 id="æœ€åçš„è¯"><a href="#æœ€åçš„è¯" class="headerlink" title="æœ€åçš„è¯"></a>æœ€åçš„è¯</h2><p>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ã€‚</p><p>å¦‚æœ‰ä»»ä½•ç–‘é—®ä¸å»ºè®®åŠ¡å¿…ç•™è¨€ï¼Œæ¯æ¡ç•™è¨€éƒ½ä¼šç”¨å¿ƒå›å¤ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç§‘å­¦ä¸Šç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºéŸ³ä¹çš„åˆ†äº«</title>
      <link href="2021/05/20/%E9%9F%B3%E4%B9%90%E5%88%86%E4%BA%AB/"/>
      <url>2021/05/20/%E9%9F%B3%E4%B9%90%E5%88%86%E4%BA%AB/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p> Helloå¤§å®¶å¥½!!!</p><p>è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å°è¯•å†™ä¸‹å…³äºéŸ³ä¹åˆ†äº«çš„æ–‡ç« ï¼Œå¾ˆä¸æˆç†Ÿä¹Ÿå¾ˆå¯èƒ½å‘³å¦‚åš¼èœ¡ï¼Œè°¢è°¢æ‚¨çš„è°…è§£ï¼ï¼</p><div class="tag-plugin note" color="blue"><div class="body"><p>æ¨èæ­Œå•ä»…ä»…æ˜¯ä¸ªäººå–œå¥½å“¦ï¼</p></div></div><div class="tag-plugin note" color="dark"><div class="title"><strong>å°æç¤º</strong></div><div class="body"><p>å…¨éƒ¨æ­Œæ›²éƒ½å¯ä»¥ç›´æ¥ç‚¹å‡»æ’­æ”¾</p></div></div><h2 id="å…³äºæˆ‘å–œæ¬¢çš„éŸ³ä¹é£æ ¼"><a href="#å…³äºæˆ‘å–œæ¬¢çš„éŸ³ä¹é£æ ¼" class="headerlink" title="å…³äºæˆ‘å–œæ¬¢çš„éŸ³ä¹é£æ ¼"></a>å…³äºæˆ‘å–œæ¬¢çš„éŸ³ä¹é£æ ¼</h2><h3 id="å°æ—¶å€™"><a href="#å°æ—¶å€™" class="headerlink" title="å°æ—¶å€™"></a>å°æ—¶å€™</h3><p>å¯¹äºå¬æ­Œè¿™ä»¶äº‹ä¸»è¦è¿˜æ˜¯å°æ—¶ä¾¯å®¶åº­çš„å½±å“ï¼Œåœ¨æˆ‘è¿˜åœ¨æ¯äº²è‚šå­é‡Œæ—¶æˆ‘çˆ¶æ¯å¬åˆ°åˆ«äººèŠå¤©æ—¶è¯´åˆ°å¬éŸ³ä¹ä¹Ÿæ˜¯ä¸€ç§â€œèƒæ•™â€ï¼Œä¾¿ä¸¤ä¸ªäººå»äº†æˆ‘ä»¬è¿™ä¸ªå°åŸå¸‚çš„éŸ³å“åº—ä¹°äº†ä¸€å¯¹ç«‹å¼çš„éŸ³å“å’Œä¸€ä¸ªåŠŸæ”¾æœºï¼Œå¼€å§‹åœ¨å®¶é‡Œæ’­æ”¾éŸ³ä¹ï¼Œæ ¹æ®åæ¥ä»–ä»¬æ‰€è¯´ï¼Œæœ€æ—©æœŸæ’­æ”¾çš„å¤§å¤šæ˜¯å¤å…¸éŸ³ä¹ï¼Œåƒè«æ‰ç‰¹ã€å·´èµ«çš„é’¢ç´æ›²å’Œäº¤å“æ›²ï¼Œåæ¥è§‰å¾—æœ‰äº›ä¹å‘³ï¼Œä¾¿å¼€å§‹æ’­æ”¾é‚“ä¸½å›ï¼Œé™ˆç™¾å¼ºï¼Œå¼ å­¦å‹çš„æ­Œæ›²ã€‚</p>        <div id="aplayer-cNgLEPLu" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-cNgLEPLu"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "æœˆäº®ä»£è¡¨æˆ‘çš„å¿ƒ",              author: "é‚“ä¸½å›",              url: "https://music.163.com/song/media/outer/url?id=228755.mp3",              pic: "",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script>        <div id="aplayer-TdSSErzY" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-TdSSErzY"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "ååå–œæ¬¢ä½ ",              author: "é™ˆç™¾å¼º",              url: "https://music.163.com/song/media/outer/url?id=27874938.mp3",              pic: "",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script>        <div id="aplayer-HbBxsLdd" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-HbBxsLdd"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "å»åˆ«",              author: "å¼ å­¦å‹",              url: "https://music.163.com/song/media/outer/url?id=190449.mp3",              pic: "",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><p>å¦‚ä»Šåœ¨æˆ‘å®¶ä¹¦æŸœè¿˜å­˜æ”¾ç€å½“å¹´çš„CDï¼Œä½†ä¹Ÿæœ‰ä¸€éƒ¨åˆ†åœ¨æ¬å®¶çš„è¿‡ç¨‹ä¸­ä¸¢å¤±äº†ã€‚æˆ‘çˆ¶æ¯åœ¨æˆ‘å°æ—¶å€™çš„å°è±¡é‡Œæ€»æ˜¯ä¼šæŠ±ç€ä¸€äº›CDå›æ¥ï¼Œæ”¾è¿›CDæœºç­‰å¾…æ’­æ”¾ï¼Œå°è±¡æœ€æ·±åˆ»çš„æ˜¯ä¸¤ä»¶äº‹ï¼Œç¬¬ä¸€ä¸ªä¾¿æ˜¯åœ¨CDæœºæ”¾è¿›CDæœºåå¹¶ä¸èƒ½é©¬ä¸Šæ’­æ”¾æ­Œæ›²ï¼Œå› ä¸ºåŠŸæ”¾æœºè¿˜éœ€è¦ä¸€ç‚¹ç‚¹çš„â€œçƒ­èº«â€ï¼Œå«åšçƒ­æœºï¼ŒåŠŸæ”¾åœ¨ç¬¬ä¸€æ¬¡å¼€æœºæ—¶ä¼šæœ‰å¾ˆæ¸…è„†çš„æ»´ç­”å£°ï¼Œè€ŒçœŸæ­£çƒ­èº«å¥½åˆ™æ˜¯åœ¨å¤§çº¦2åˆ†é’Ÿåæœ‰ä¸€å£°éå¸¸æ¸…è„†çš„æ»´ç­”å£°ï¼Œè¿™ä¸ªæ—¶å€™ä¾¿å¯ä»¥æŒ‰ä¸‹CDæœºä¸Šçš„æ’­æ”¾é”®äº†ã€‚</p>        <div id="aplayer-gTAliOur" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;width:100%;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-gTAliOur"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "Blue Bossa",              author: "Eddie Higgins",              url: "https://music.163.com/song/media/outer/url?id=1307049.mp3",              pic: "https://i.loli.net/2021/04/08/FufDKxeGiPJdXNU.jpg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><p>ç¬¬äºŒä»¶å°è±¡æ·±åˆ»çš„äº‹æƒ…ä¾¿æ˜¯å°å­¦æ¯æ¬¡æ”¾å­¦åå…¬äº¤è½¦å›å®¶ï¼Œå¸¸å¸¸ä¼šåœ¨èµ°è¿›å±‹å­å‰å¬åˆ°é‡Œé¢ä¼ æ¥çš„ä¹å™¨å£°æˆ–è€…å”±æ­Œçš„äººå£°ï¼Œé—·é—·çš„ï¼Œè€Œæ‰“å¼€é—¨èµ°è¿›å»çš„ä¸€ç¬é—´è€³æœµå°±ä¼šè¢«éŸ³ä¹åŒ…è£¹ï¼Œå¦‚åŒçˆ±ä¸½ä¸æ‰è¿›æ ‘æ´ä¸€èˆ¬ï¼Œè€Œå¦‚æœå¼€é—¨å‰æ²¡æœ‰å¬åˆ°ï¼Œä¼°è®¡æ˜¯æˆ‘åšé”™äº†ä»€ä¹ˆï¼Œéœ€è¦æå‰åšå¥½æŒ¨æçš„å‡†å¤‡ã€‚æˆ‘çš„è®¸å¤šéŸ³ä¹çš„æ¥æºåœ¨æ™ºèƒ½æ‰‹æœºå‡ºç°ä¹‹å‰éƒ½æ˜¯æ¥è‡ªäºå®¶é‡ŒCDæ‰€æ’­æ”¾çš„éŸ³ä¹ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†æ¥è‡ªäºã€ŠçŒ«å’Œè€é¼ ã€‹ä¸­çš„äº¤å“ä¹ï¼ˆå“ˆï¼‰ã€‚</p>        <div id="aplayer-fTXsYFhl" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;width:100%;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-fTXsYFhl"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "Tom and Jerry",              author: "Bradley",              url: "https://music.163.com/song/media/outer/url?id=25962464.mp3",              pic: "https://i.loli.net/2021/04/08/UwXvYIDgdoznLMi.png",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><h3 id="å‰æ™ºèƒ½æ‰‹æœº"><a href="#å‰æ™ºèƒ½æ‰‹æœº" class="headerlink" title="å‰æ™ºèƒ½æ‰‹æœº"></a>å‰æ™ºèƒ½æ‰‹æœº</h3><p>åœ¨æ™ºèƒ½æ‰‹æœºä¹‹å‰å…¶å®è¿˜æœ‰ä¸€ä¸ªå°å°çš„æ—¶ä»£ï¼Œæˆ‘å«åšå‰æ™ºèƒ½æ—¶ä»£ï¼Œå°è±¡æœ€æ·±çš„ä¾¿æ˜¯è¯ºåŸºäºšçš„5230å‹å·ï¼Œæœ‰ç€å¦‚ä»Šæ™ºèƒ½æ‰‹æœºåŸºæœ¬çš„åŠŸèƒ½ï¼Œä½†æ˜¯æ“ä½œèµ·æ¥å¹¶ä¸æ˜¯é‚£ä¹ˆé¡ºç•…ï¼Œå±å¹•æ˜¯ç”µå®¹å±ï¼Œéœ€è¦ç”¨æ‰‹æŒ‡æˆ³ä¸‹å»æ‰èƒ½å“åº”ï¼Œä¹Ÿæœ‰äº†é‚£ä¸ªæ—¶å€™çš„ç‰¹è‰²å°±æ˜¯è§¦æ§ç¬”ã€‚<br><img src="https://s2.loli.net/2023/05/17/JmcKdktWyu6vSMe.png" style="zoom:50%;" /></p><p>ä½†å½“æ—¶å¯ä»¥å°†éŸ³ä¹éšèº«æ”¾åœ¨ä¸€ä¸ªæ‰‹æœºé‡Œå·²ç»è®©æˆ‘éå¸¸éœ‡æ’¼äº†ï¼Œå½“æ—¶ä¼ è¾“çš„æ–¹å¼ä¸»è¦æ˜¯ç”¨çº¿è¿æ¥ç”µè„‘åä¼ è¾“ï¼Œæˆ–è€…ç”¨è“ç‰™ä¼ è¾“ï¼Œè“ç‰™åœ¨é‚£ä¸ªæ—¶å€™å¯è°“ç§°å¾—ä¸Šæ˜¯çœŸæ­£çš„é»‘ç§‘æŠ€ï¼Œåœ¨ç”µè„‘ä¸Šé€‰æ‹©æ–‡ä»¶ï¼Œé€‰æ‹©è“ç‰™ä¼ è¾“åˆ°æ‰‹æœºï¼Œé‚£æ—¶å€™éŸ³ä¹çš„æ–‡ä»¶ï¼Œå¤§å¤šæ•°æ˜¯accæˆ–è€…mp3çš„æ–‡ä»¶ï¼Œ256kçš„éŸ³è´¨ï¼Œè“ç‰™çš„ä¼ è¾“é€Ÿç‡é‚£æ—¶å¤§çº¦200kå·¦å³ï¼Œä¼ ä¸€å¼ ä¸“è¾‘çš„æ­Œæ›²è¿˜æ˜¯éœ€è¦ä¸€ç‚¹ç‚¹è€å¿ƒçš„ã€‚</p><p><img src="https://s2.loli.net/2023/05/17/sLEwe6X2G8Qcquh.png" alt="XPçš„è“ç‰™"><br>è¯ºåŸºäºš5230é™ªä¼´äº†æˆ‘å°å­¦æœŸé—´æ¯å¤©æ”¾å­¦ä»å­¦æ ¡åˆ°å®¶é‡Œçš„ä¸€å°æ®µè·¯ï¼Œé‚£æ—¶å€™ä¹Ÿæ˜¯ç½‘ç»œæ­Œæ‰‹å……æ–¥ç½‘ç»œçš„æ—¶ä»£ï¼Œå’Œç°åœ¨ä¸åŒï¼Œé‚£æ—¶å€™çš„ç½‘ç»œæ­Œæ‰‹å¹¶æ²¡æœ‰ä¸€ä¸ªå®Œæ•´çš„å›¢é˜Ÿï¼Œå¾ˆå¤šæ—¶å€™åªæœ‰è‡ªå·±å½•åˆ¶è‡ªå·±å”±æ­Œå°±å‘åˆ°ç½‘ä¸Šå»äº†ï¼Œè™½ç„¶è´¨é‡æ¯”ä¸ä¸Šå¦‚ä»Šçš„ï¼Œä½†æ˜¯å¾ˆå¤šç»å…¸çš„æ­Œæ›²è¿˜æ˜¯ç•™äº†ä¸‹æ¥ã€‚å°¤å…¶æ˜¯ç»å…¸çš„ç½‘æ‹æ­Œæ›²â€¦.</p>        <div id="aplayer-rriBtgBu" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;width:100%;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-rriBtgBu"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "çˆ±åˆ°èŠ±å¼€",              author: "æˆŠé“å­",              url: "https://music.163.com/song/media/outer/url?id=5244681.mp3",              pic: "https://i.loli.net/2021/04/08/jMLB9rwEWPbCF48.jpg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><p>æˆ‘å°è±¡é‡Œåœ¨å°å­¦ä¸‰å››å¹´çº§å¤©å¤©å›å®¶å¬çš„å°±æ˜¯è¿™é¦–å¯è°“æ˜¯ç½‘æ‹å…ƒç¥–æ­Œæ›²å“ˆå“ˆå“ˆå“ˆï¼Œä»¥è‡³äºåœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…å¬åˆ°è¿™é¦–æ­Œçš„å‰å¥éƒ½æœ‰ç‚¹èµ·é¸¡çš®ç–™ç˜©çš„æ„Ÿè§‰â€¦..</p><h3 id="æ™ºèƒ½æ‰‹æœºæ—¶ä»£"><a href="#æ™ºèƒ½æ‰‹æœºæ—¶ä»£" class="headerlink" title="æ™ºèƒ½æ‰‹æœºæ—¶ä»£"></a>æ™ºèƒ½æ‰‹æœºæ—¶ä»£</h3><p>åœ¨åˆä¸€çš„æ—¶å€™æˆ‘çœŸæ­£çš„è¿æ¥äº†æˆ‘çš„ç¬¬ä¸€å°æ™ºèƒ½æ‰‹æœºï¼Œé‚£ä¾¿æ˜¯å¤§åé¼é¼(ä»¥å‰)çš„å°æ¹¾æ‰‹æœºå‚å•†HTC(ç«è…¿è‚ )çš„Incredible Sï¼Œå‡ºå‚é¢„è£…çš„æ˜¯å®‰å“2.2.</p><p><img src="https://s2.loli.net/2023/05/17/tZK3hH2Cepar7AT.png" alt="htc G11"></p><p>ç¬¬ä¸€ä¸ªä¸‹è½½çš„è½¯ä»¶é™¤äº†QQä¾¿æ˜¯QQéŸ³ä¹äº†ï¼Œè¿˜è®°å¾—ç¬¬ä¸€æ¬¡æ‰“å¼€QQéŸ³ä¹ï¼Œä¸»é¡µä¸Šæ‰‘é¢è€Œæ¥çš„å¸…æ°”ç”·äººï¼Œé‚£è‚¯å®šå°±æ˜¯å‘¨è‘£äº†</p>        <div id="aplayer-qerybAKp" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-qerybAKp"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "è¯´å¥½çš„å¹¸ç¦å‘¢",              author: "å‘¨æ°ä¼¦",              url: "https://cdn.jsdelivr.net/gh/hamster1963/photostore/musicstore/å‘¨æ°ä¼¦-è¯´å¥½çš„å¹¸ç¦å‘¢.mp3",              pic: "https://i.loli.net/2021/04/08/aILZKwO18o92p3T.jpg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script>        <div id="aplayer-jfhDNTKb" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-jfhDNTKb"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "èŠ±æµ·",              author: "å‘¨æ°ä¼¦",              url: "https://cdn.jsdelivr.net/gh/hamster1963/photostore/musicstore/å‘¨æ°ä¼¦-èŠ±æµ·.mp3",              pic: "https://i.loli.net/2021/04/08/aILZKwO18o92p3T.jpg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script>        <div id="aplayer-rgiTDvPw" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-rgiTDvPw"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "ç»™æˆ‘ä¸€é¦–æ­Œçš„æ—¶é—´",              author: "å‘¨æ°ä¼¦",              url: "https://cdn.jsdelivr.net/gh/hamster1963/photostore/musicstore/å‘¨æ°ä¼¦-ç»™æˆ‘ä¸€é¦–æ­Œçš„æ—¶é—´.mp3",              pic: "https://i.loli.net/2021/04/08/aILZKwO18o92p3T.jpg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><p>ä¹Ÿæ˜¯åœ¨å¬è¿‡å‘¨è‘£çš„æ­Œä¹‹åï¼Œæˆ‘å¯¹äºè‡ªå·±æ‰€å–œæ¬¢çš„éŸ³ä¹æ‰æœ‰äº†ä¸€ä¸ªåˆæ­¥çš„ç†è§£ï¼Œé‚£æ—¶çš„æˆ‘å–œæ¬¢å¹²å‡€çš„éŸ³ä¹ï¼Œåœ¨æ­Œæ›²é‡Œå„ç§ä¹å™¨çš„ä½ç½®æ‘†æ”¾åˆç†ï¼Œä¸ä¼šäº’ç›¸æ‰“æ¶ï¼Œç”¨å°½å¯èƒ½å°‘çš„ä¹å™¨æ¼”ç»å‡ºä¸°å¯Œçš„å¬è§‰æ•ˆæœï¼Œè€Œåœ¨é‚£ä¸ªæ—¶å€™ï¼Œå¬å¾—æœ€å¤šçš„é™¤äº†å‘¨è‘£ï¼Œä¾¿æ˜¯æè£æµ©äº†ã€‚</p><p>ç¬¬ä¸€æ¬¡è®¤è¯†æè£æµ©æ˜¯åœ¨ç”µå°é‡Œï¼Œåœ¨FM102.2æ·±å¤œ12ç‚¹å¼€å§‹çš„èŠ‚ç›®å«åšã€Šåƒé‡Œå…±è‰¯å®µã€‹ï¼ŒæŸä¸€æ¬¡å¹¿å‘Šå‰çš„è¿‡åœºéŸ³ä¹ç›´æ¥æŠ“ä½äº†æˆ‘çš„è€³æœµï¼Œ13å¹´çš„å¬æ­Œè¯†æ›²å¹¶ä¸å®Œå–„ï¼Œæˆ‘åªèƒ½å°½å¯èƒ½çš„è®°ä½æ­Œè¯ï¼Œç„¶åå†å»æœç´¢ï¼Œé‚£æ—¶å€™æˆ‘å°è±¡æœ€æ·±çš„ä¸€å¥ä¾¿æ˜¯â€œè¶Šå‹‡æ•¢è¶Šå­¤å•â€ï¼Œè¿™ä¸€å¥ä¾¿è®©æˆ‘è®¤è¯†äº†æè£æµ©ã€‚</p>        <div id="aplayer-EUYmaUvk" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;width:100%;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-EUYmaUvk"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "éƒ½ä¸€æ ·",              author: "æè£æµ©",              url: "https://music.163.com/song/media/outer/url?id=27731172.mp3",              pic: "https://i.loli.net/2021/04/08/X6V1nOjuELw3pSF.jpg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><p>é‚£æ®µæ—¶é—´å‘èº«è¾¹çš„åŒå­¦æ¨èæè£æµ©ï¼Œä»–ä»¬çš„è¡¨æƒ…å°±åƒæè£æµ©çš„çœ¼ç›ä¸€æ ·ï¼Œçœ¯æˆäº†ä¸€æ¡ç¼ï¼Œé‚£ä¸ªæ—¶å€™æ²¡æœ‰æŠ–éŸ³ï¼Œå¤§å®¶å¬æ­Œè¿˜æ˜¯æœ‰è€å¿ƒå¬å®Œä¸€æ•´é¦–çš„ï¼Œå¤§å®¶æ‰€å–œæ¬¢çš„é£æ ¼ä¹Ÿä¸åŒï¼Œä½†æè£æµ©åœ¨é‚£ä¸ªæ—¶å€™å¯è°“æ—¶æµè¡ŒéŸ³ä¹çš„ä¸€ä¸ªå¼‚ç±»ï¼Œå‰æœ‰R&amp;Bæ•™çˆ¶é™¶å–†ã€å‘¨è‘£è¿˜æœ‰é™ˆå¥•è¿…ä¸‰åº§å¤§å±±ï¼Œé‚£æ—¶å€™å¾ˆå¤šäººè¯´æè£æµ©æ˜¯å‘¨æ°ä¼¦åŠ é™ˆå¥•è¿…ï¼Œä¹Ÿæœ‰äººè¯´æè£æµ©çš„éŸ³ä¹åƒç¯‡ä¸€å¾‹ï¼Œä½†æ˜¯æè£æµ©ç¡®å®é—¯å‡ºäº†ä¸€æ¡è·¯æ¥ã€‚</p>        <div id="aplayer-VEjMSxoe" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;width:100%;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-VEjMSxoe"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "ä¸æ­",              author: "æè£æµ©",              url: "https://music.163.com/song/media/outer/url?id=29764563.mp3",              pic: "https://cdn.jsdelivr.net/gh/hamster1963/photostore/img/14ce36d3d539b6009f46967be350352ac75cb776.jpeg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><p>æè£æµ©æœ€å‰å®³çš„å¯¹äºå’Œå£°çš„è¿ç”¨ï¼Œè¿™ä¸ä»–å¤šå¹´çš„å¹•åç»éªŒæ˜¯ç´§å¯†ç›¸å…³çš„ï¼Œè®¸å¤šæ­Œæ›²æ—‹å¾‹å¹¶ä¸å¤æ‚ä½†å’Œå£°çš„è¿ç”¨ä½¿å¾—æ­Œæ›²å¢å½©ä¸å°‘ã€‚</p><h3 id="å‰ä»–"><a href="#å‰ä»–" class="headerlink" title="å‰ä»–"></a>å‰ä»–</h3><p>åœ¨åˆä¸‰ä¸­è€ƒå®Œçš„å‡æœŸå†…æˆ‘æ‹¥æœ‰äº†æˆ‘çš„ç¬¬ä¸€æŠŠå‰ä»–ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªæ—¶å€™æˆ‘å¼€å§‹çœŸæ­£çš„ä¸ä»…ä»…å»å¬éŸ³ä¹ï¼Œæ›´æƒ³è¦å»è§¦ç¢°éŸ³ä¹ã€‚</p>        <div id="aplayer-lRHsrIaa" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;width:100%;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-lRHsrIaa"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "æ‹¥æŠ±",              author: "äº”æœˆå¤©",              url: "https://music.163.com/song/media/outer/url?id=386542.mp3",              pic: "https://cdn.jsdelivr.net/gh/hamster1963/photostore/img/a8014c086e061d95bcc46a0c79f40ad162d9ca00.jpeg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><p>äº”æœˆå¤©çš„æ‹¥æŠ±æ˜¯æˆ‘å­¦ä¹ çš„ç¬¬ä¸€é¦–æ­Œæ›²ï¼Œå½“æ—¶æ˜¯ä¸€ä½æœ‹å‹çš„æœ‹å‹åœ¨å”±å§ä¸Šå”±äº†è¿™ä¸€é¦–å¹¶ä¸”åˆ†äº«ç»™äº†æˆ‘ï¼Œå½“æ—¶ç¬¬ä¸€æ¬¡å¬åˆ°æˆ‘ä¾¿ä¸‹å®šå†³å¿ƒè¦å­¦ä¼šè¿™ä¸€é¦–æ‹¥æŠ±ï¼Œç¬¬äºŒå¤©æ‰“å¼€å‰ä»–æ•™æï¼Œå™¢ï½å¥½å®¶ä¼™ï¼Œç¬¬ä¸€é¡µå°±æ˜¯è¿™é¦–æ­Œçš„è°±å­ï¼Œä¹Ÿå°±æ˜¯åœ¨è¿™æ ·çš„æœºç¼˜å·§åˆä¸‹æˆ‘æ…¢æ…¢å¼€å§‹å­¦ä¹ ä¸€é¦–åˆä¸€é¦–çš„æ­Œï¼Œæˆ‘ä¹Ÿå¼€å§‹æ¥è§¦æŒ‡å¼¹ã€‚</p>        <div id="aplayer-DqumHnak" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;width:100%;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-DqumHnak"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "LOVIN' YOU",              author: "æŠ¼å°¾ã‚³ãƒ¼ã‚¿ãƒ­ãƒ¼",              url: "https://music.163.com/song/media/outer/url?id=22822506.mp3",              pic: "https://cdn.jsdelivr.net/gh/hamster1963/photostore/img/s4716396.jpeg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><p>æŠ¼å°¾æ¡‘çš„è®¸å¤šæ­Œæ›²éƒ½å¯è°“æ˜¯å‰ä»–æŒ‡å¼¹å…¥é—¨çš„å¿…ç»ƒæ›²ï¼Œåˆ°å¹¶ä¸æ˜¯å› ä¸ºå¤šç®€å•ï¼Œè€Œæ˜¯å› ä¸ºå®åœ¨æ˜¯å¤ªå¥½å¬äº†ï¼Œè™½ç„¶è®¸å¤šäººéƒ½è®¤ä¸ºæŠ¼å°¾çš„æ­Œæ›²çš„éš¾åº¦ç¨ä½ï¼Œä½†æ˜¯å¦‚æœæƒ³è¦å®Œæ•´æµç•…åœ°å¼¹å¥ä¸‹æ¥è¿˜æ˜¯éœ€è¦å¤šå¹´çš„è‹¦ç»ƒçš„ã€‚è€Œä¸Šé¢è¿™ä¸€é¦–LOVINâ€™ YOUåˆ™æ˜¯æˆ‘ç¬¬ä¸€é¦–å­¦ä¼šå¼¹å¥çš„æŒ‡å¼¹æ›²ï¼Œç›´åˆ°ç°åœ¨æˆ‘ä¹Ÿä¸æ•¢è¯´æˆ‘å·²ç»å¯ä»¥å®Œå…¨æ— å‹åŠ›åœ°å¼¹å¥ä¸‹æ¥äº†ï¼Œæ¯ä¸€æ¬¡å¼¹å¥éƒ½ä¸ºè¿™ç²¾è‡´çš„ç¼–æ’æ‰€éœ‡æ’¼ã€‚</p><p>åœ¨æŠ¼å°¾æ¡‘åæˆ‘å¼€å§‹äº†è§£æ›´å¤šæ¥è‡ªä¸–ç•Œå„åœ°çš„æŒ‡å¼¹å¤§å¸ˆï¼Œé¦–å…ˆå½“ç„¶æ˜¯æ¥è‡ªæ¾³æ´²çš„<em>Tommy Emmanuel</em>ï¼Œè¿˜è®°å¾—ç¬¬ä¸€æ¬¡å¬åˆ°close to youçš„å¼¹å¥æ—¶ï¼Œæˆ‘æ ¹æœ¬ä¸ç›¸ä¿¡è¿™æ˜¯ä¸€æŠŠå‰ä»–æ‰€èƒ½åˆ›é€ çš„æ•ˆæœï¼Œå„ç§æŠ€å·§å’Œå’Œå¼¦éƒ½æ˜¯ä¸ºäº†æ—‹å¾‹æœåŠ¡çš„æ„Ÿè§‰å®åœ¨æ˜¯å¤ªæ£’äº†ã€‚ä¹Ÿè®©æˆ‘å¯¹å‰ä»–çš„ç†è§£æ›´åŠ çš„æ·±åˆ»ã€‚</p>        <div id="aplayer-TuanulfI" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;width:100%;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-TuanulfI"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "Since We Met",              author: "Tommy Emmanuel",              url: "https://music.163.com/song/media/outer/url?id=2002030.mp3",              pic: "https://cdn.jsdelivr.net/gh/hamster1963/photostore/img/s3681710.jpg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><img src="https://s2.loli.net/2023/05/17/46ewkH5IDc9UsBX.png" alt="Tommy Emmanuel" style="zoom:50%;" /><img src="https://s2.loli.net/2023/05/17/YDlqBuKeSksMIOP.png" alt="Tommy Emmanuel" style="zoom:50%;" /><p>å½“ç„¶é™¤äº†Tommy Emmanuelæˆ‘è¿˜å°¤å…¶å–œæ¬¢æ¥è‡ªæ—¥æœ¬çš„ä¼ä¼æ…§ï¼Œä»–æå…·å¤©èµ‹çš„ç¼–æ›²ä»¥åŠå„ç§å¤å…¸æŠ€å·§çš„èåˆä½¿å¾—ä»–çš„æ›²å­å¬èµ·æ¥å°¤å…¶çš„æ´»æ³¼ä»¥åŠæœ‰ç”Ÿæ°”ï¼Œä»–æ‰€æ”¹ç¼–çš„çˆµå£«åæ›²<em>Moon River</em>ä¸ä»…ä»…å°¤å…¶åœ°æ¸©æš–ï¼Œè€Œä¸”å…¶ä¸­çš„æ”¹ç¼–æ›´è®©äººå¦‚ç—´å¦‚é†‰ã€‚</p>        <div id="aplayer-toNumyyh" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;width:100%;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-toNumyyh"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "Moon River",              author: "ä¼ä¼æ…§",              url: "https://music.163.com/song/media/outer/url?id=26450089.mp3",              pic: "https://cdn.jsdelivr.net/gh/hamster1963/photostore/img/s27996751.jpg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><h3 id="æ–¹å¤§åŒ"><a href="#æ–¹å¤§åŒ" class="headerlink" title="æ–¹å¤§åŒ"></a>æ–¹å¤§åŒ</h3><p>ç»ˆäºåœ¨é«˜ä¸­ï¼Œæˆ‘å¼€å§‹è®¤è¯†æ–¹å¤§åŒã€‚</p>        <div id="aplayer-ccsfAtpV" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;width:100%;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-ccsfAtpV"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "çº¢è±†",              author: "æ–¹å¤§åŒ",              url: "https://m10.music.126.net/20210517202811/6dd994d699da3e242260e335e3880d91/ymusic/ff10/edf4/18cd/a81822d7d51e1de5206569eb09576e58.mp3",              pic: "https://s2.loli.net/2023/05/17/o4O1ueAUaZcvn56.png",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><p>â€œæœ‰æ—¶å€™ã€€æœ‰æ—¶å€™</p><p>æˆ‘ä¼šç›¸ä¿¡ä¸€åˆ‡æœ‰å°½å¤´</p><p>ç›¸èšç¦»å¼€éƒ½æœ‰æ—¶å€™</p><p>æ²¡æœ‰ä»€ä¹ˆä¼šæ°¸å‚ä¸æœ½</p><p>å¯æ˜¯æˆ‘ã€€æœ‰æ—¶å€™</p><p>å®æ„¿é€‰æ‹©ç•™æ‹ä¸æ”¾æ‰‹</p><p>ç­‰åˆ°é£æ™¯éƒ½çœ‹é€</p><p>ä¹Ÿè®¸ä½ ä¼šé™ªæˆ‘çœ‹ç»†æ°´é•¿æµ</p><p>â€</p><p>é‚£å¤©æ™šä¸Šæ˜¯æˆ‘ç¬¬ä¸€æ¬¡è®¤çœŸå¬æ–¹å¤§åŒçš„æ­Œï¼Œå›åˆ°å®¿èˆæˆ‘é©¬ä¸Šå»å‘æœ‹å‹å€Ÿäº†ä¸€æŠŠå‰ä»–ï¼Œå¼€å§‹å¼¹å¥æ–¹å¤§åŒçš„çº¢è±†ã€‚ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æˆ‘ä»å¿ƒåº•æ„Ÿè§‰åŸæ¥å¼¹å”±ä¹Ÿå¯ä»¥è¿™ä¹ˆé…·ï¼Œå‰ä»–çš„ç¼–æ’å¯ä»¥å¦‚æ­¤æŠ“è€³æœµã€‚æˆ‘ä¸€ç›´å¼¹ä¸€ç›´å¼¹ï¼Œæˆ‘èˆå‹ä¹…è¿åœ°è¯´äº†ä¸€å¥ï¼šçœŸå¥½å¬å•Šã€‚åœ¨é‚£ä¸ªæ—¶å€™æˆ‘çŸ¥é“æ–¹å¤§åŒè¿™ä¸ªç”·äººä»¥ååº”è¯¥ä¼šé™ªæˆ‘å¾ˆä¹…å¾ˆä¹…äº†ã€‚</p><p>ç¬¬äºŒå¤©åœ¨ç§‹æ¸¸çš„è·¯ä¸Šæˆ‘ä¹Ÿä¸€ç›´åœ¨è€³æœºé‡Œä¸æ–­åœ°å¾ªç¯ï¼Œå›æ¥çš„è·¯ä¸Šä¹Ÿæ˜¯ã€‚</p><p>ç¬¬äºŒå¤©å¼€å§‹æˆ‘å¼€å§‹å¬æ–¹å¤§åŒçš„å…¶ä»–æ­Œæ›²ï¼Œåˆšå¼€å§‹è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆé¡ºç•…çš„è¿‡ç¨‹ï¼Œä»¥å¾€çš„æµè¡Œæ­Œæ›²ç»éªŒå¯¹äºå¤§åŒçš„æ­Œæ›²æ¥è¯´å¹¶ä¸ç®¡ç”¨ï¼Œæ— è®ºæ˜¯æ—‹å¾‹ï¼Œå’Œå£°ï¼Œå’Œå¼¦ï¼Œå¯¹äºæˆ‘æ¥è¯´éƒ½å®Œå…¨æ˜¯å´­æ–°çš„ï¼Œæˆ‘è¿˜è®°å¾—ç¬¬ä¸€æ¬¡å¬ã€Šæš–ã€‹ï¼Œå¹¶ä¸è§‰å¾—è¿™é¦–æ­Œæ˜¯æˆ‘çš„èœï¼Œç›´åˆ°ä¸¤å¤©åç¬¬äºŒæ¬¡å¬ï¼Œæ‰å‘ç°ï¼Œå™¢ï¼å¤ªæ£’äº†ï¼</p>        <div id="aplayer-EThbiNzz" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;width:100%;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-EThbiNzz"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "æš–",              author: "æ–¹å¤§åŒ",              url: "https://cdn.jsdelivr.net/gh/hamster1963/photostore/musicstore/æ–¹å¤§åŒ-æš–.mp3",              pic: "https://cdn.jsdelivr.net/gh/hamster1963/photostore/img/9825bc315c6034a82b7f9283c313495409237616.jpeg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><p>å¤§åŒçš„è®¸å¤šæ­Œæ›²éƒ½æ˜¯å¦‚æ­¤ï¼Œæœ‰ç€éš¾ä»¥è¨€å–»çš„å‰ç»æ€§ï¼Œè®©ä½ åœ¨æ¯ä¸€æ¬¡é‡æ’­æ—¶éƒ½è§‰å¾—ï¼Œè¿™é¦–æ­Œå¤ªæ½®äº†ï¼</p><p>ä¹Ÿæ˜¯å› ä¸ºå¤§åŒï¼Œæˆ‘å¯¹äºéŸ³ä¹çš„ç†è§£æ›´åŠ æ·±å…¥ï¼Œå¤§åŒçš„è®¸å¤šéŸ³ä¹çµæ„Ÿå…¶å®æ˜¯æ¥è‡ªäºä»–å°æ—¶å€™æ‰€å¬çš„é»‘äººéŸ³ä¹ï¼Œçˆµå£«ä¹ï¼Œæ”¾å…‹ï¼Œè¿˜æœ‰å„ç§çµé­‚ä¹ï¼Œå¸ƒé²æ–¯ä»¥åŠR&amp;Bã€‚ä¹Ÿä½¿å¾—ä»–çš„æ­Œæ›²ä¸ä»…ä»…å¤šå…ƒï¼Œè€Œä¸”æå…·åˆ›é€ æ€§ï¼Œå„ç§å³å…´ä¿¡æ‰‹æ‹ˆæ¥ã€‚</p><p>ä¹Ÿæ˜¯åœ¨é‚£ä¸ªæ—¶å€™å¼€å§‹æˆ‘å¼€å§‹æ”¶é›†æ–¹å¤§åŒçš„ä¸“è¾‘ï¼Œåƒè®©å¤§åŒçš„å£°éŸ³åœ¨éŸ³å“ä¸Šå‘ˆç°ï¼Œæˆ‘ç¬¬ä¸€å¼ çœŸæ­£æ„ä¹‰ä¸Šçš„æ–¹å¤§åŒå‘è¡Œä¸“è¾‘ä¾¿æ˜¯ã€Šæ©™æœˆã€‹ã€‚</p><img src="https://s2.loli.net/2023/05/17/pvnMTQmGIF4wV36.png" alt="Orange Moon" style="zoom: 50%;" />        <div id="aplayer-YVvnriYO" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;width:100%;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-YVvnriYO"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "å°å°è™«",              author: "æ–¹å¤§åŒ",              url: "https://cdn.jsdelivr.net/gh/hamster1963/photostore/musicstore/æ–¹å¤§åŒ-å°å°è™«.mp3",              pic: "https://cdn.jsdelivr.net/gh/hamster1963/photostore/img/9d82d158ccbf6c81d15b405dbc3eb13533fa4012.jpeg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><p>éšç€å¬å¤§åŒçš„æ­Œæ›²è¶Šæ¥è¶Šæ¥ï¼Œæˆ‘å‘ç°æˆ‘çš„è€³æœµä¹Ÿå˜åˆäº†ï¼Œå°¤å…¶æ˜¯å¬åˆ°æµè¡Œæ­Œæ›²çš„æ—¶å€™ï¼Œä¸è‡ªä¸»åœ°ä¼šä¸å¤§åŒçš„æ­Œæ›²è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœè¿™é¦–æ­Œæ˜¯å®Œå®Œå…¨å…¨åœ¨å¥—è·¯ä¹‹å†…çš„ï¼Œé‚£æˆ‘å¤§å¯èƒ½å°±æŠŠè¿™é¦–æ­Œç»™passæ‰ï¼Œä½†å¦‚æœæœ‰æ„æ–™ä¹‹å¤–çš„æ—‹å¾‹æˆ–è€…å’Œå¼¦å°±ä¼šé©¬ä¸Šå¸å¼•åˆ°æˆ‘ã€‚</p><img src="https://s2.loli.net/2023/05/17/D7XYSgJZR5OpByx.png" alt="the show"  /><h3 id="ç–«æƒ…"><a href="#ç–«æƒ…" class="headerlink" title="ç–«æƒ…"></a>ç–«æƒ…</h3><p>ç–«æƒ…æœŸé—´æˆ‘å¼€å§‹èŠ±å¤§é‡çš„æ—¶é—´å»å¬æ­Œï¼Œä¸€å¤©çš„æ—¶é—´éƒ½æ³¡åœ¨éŸ³ä¹Appä¸­ï¼Œå·§åˆçš„æ˜¯ï¼Œåœ¨æŸä¸€ä¸ªæ™šä¸Šæˆ‘æ‰“å¼€YouTubeï¼Œé¦–é¡µç»™æˆ‘æ¨èäº†ä¸€å¼ åˆè¾‘ï¼Œåå­—å«åšç¡å‰R&amp;Bï¼Œå°é¢æ˜¯æ˜æš—çš„æˆ¿é—´ï¼Œåœ°ä¸Šæ‘†æ”¾ç€å„ç§å”±ç‰‡ï¼Œç‚¹å‡»ï¼Œä¾¿è®©æˆ‘å‘ç°äº†è¿™ä¸€ä½å®è—æ­Œæ‰‹ã€‚</p>        <div id="aplayer-RBkCbUkq" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;width:100%;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-RBkCbUkq"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "easy",              author: "Mac Ayres",              url: "https://music.163.com/song/media/outer/url?id=519943092.mp3",              pic: "https://cdn.jsdelivr.net/gh/hamster1963/photostore/img/s29520620.jpeg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><p>è®¸å¤šäººè¯„ä»·Mac Ayresæ˜¯å¦‚ä»Šè¢«è¿œè¿œä½ä¼°çš„R&amp;Bæ­Œæ‰‹ï¼Œæˆ‘ä¹Ÿå¾ˆèµåŒï¼Œä½†ä»–æ‰23å²ï¼Œæœªæ¥å¯æœŸã€‚</p><p>è¿™é¦–æ­Œè¿˜åœ¨è¢«æˆ‘ç”¨åœ¨äº†æ­Œæ‰‹å¤§èµ›çš„å¤èµ›ä¸­ï¼ˆç”±äºè‹±è¯­å‘éŸ³æ ¹æœ¬ä¸æ ‡å‡†è¢«è¯„å§”åæ§½ï¼Œä½†å¦‚æœå«æˆ‘è¯„é€‰2020å¹´æˆ‘çš„å¹´åº¦å•æ›²ï¼Œæˆ‘ä¼šæ¯«ä¸çŠ¹è±«åœ°é€‰æ‹©è¿™é¦–æ­Œï¼‰</p><p>åœ¨ç–«æƒ…ä¸­æˆ‘è¿˜è®¤è¯†äº†å¦å¤–ä¸€ä½â€œè€å¸ˆâ€ï¼Œé‚£ä¾¿æ˜¯æ¥è‡ªå°æ¹¾çš„â€œæå‹å»·è€å¸ˆâ€äº†</p><p>æå‹å»·ä»¥æå¼ºçš„å‰ä»–æ¼”å¥èƒ½åŠ›å’Œæå…·ä¸ªäººé£æ ¼çš„ä½œå“åœ¨å°æ¹¾çš„ç»¼è‰ºèŠ‚ç›®å£°æ—ä¹‹ç‹ç¬¬ä¸€å­£å¤ºå¾—å† å†›ï¼Œå¹¶åœ¨2020å¹´åº•ç»ˆäºæ¨å‡ºäº†é¦–å¼ ä¸ªäººä¸“è¾‘ã€Šå¦‚æœä½ ä¹Ÿçˆ±æˆ‘å°±å¥½äº†ã€‹ï¼Œå¬å°±å¥½äº†ã€‚</p>        <div id="aplayer-cLJackVy" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;width:100%;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-cLJackVy"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "ç›´åˆ°æˆ‘é‡è§äº†ä½ ",              author: "æå‹å»·",              url: "https://cdn.jsdelivr.net/gh/hamster1963/photostore/musicstore/æå‹å»·-ç›´åˆ°æˆ‘é‡è§äº†ä½ .mp3",              pic: "https://cdn.jsdelivr.net/gh/hamster1963/photostore/img/s33763909.jpg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><h2 id="æœ¬æœˆæ¨èæ­Œå•"><a href="#æœ¬æœˆæ¨èæ­Œå•" class="headerlink" title="æœ¬æœˆæ¨èæ­Œå•"></a>æœ¬æœˆæ¨èæ­Œå•</h2><img src="https://s2.loli.net/2023/05/17/xB3QnjAqSsW15Do.png"  /><p>@</p><p>@@</p><p>@@@</p><p>@@@@</p><p>@@@@@</p><p>@@@@@@</p><p>@@@@@@@</p><p>@@@@@@@@</p><p>@@@@@@@@@</p><h2 id="å½©è›‹"><a href="#å½©è›‹" class="headerlink" title="å½©è›‹"></a>å½©è›‹</h2><p>è°¢è°¢ä½ çš„é˜…è¯»</p><p>è‡´æ•¬é‚£äº›æ¼«æ¼«é•¿å¤œ</p><p>è°¢è°¢niã€‚</p><p>2021.4.11</p>]]></content>
      
      
      <categories>
          
          <category> éŸ³ä¹åˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éŸ³ä¹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»Šæ—¥æ ¡å›­è‡ªåŠ¨å¡«å†™è¡¨å•ä¿¡æ¯è„šæœ¬</title>
      <link href="2021/05/18/%E4%BB%8A%E6%97%A5%E6%A0%A1%E5%9B%AD%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%86%99%E8%BE%85%E5%AF%BC%E5%91%98%E4%BF%A1%E6%81%AF%E8%84%9A%E6%9C%AC/"/>
      <url>2021/05/18/%E4%BB%8A%E6%97%A5%E6%A0%A1%E5%9B%AD%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%86%99%E8%BE%85%E5%AF%BC%E5%91%98%E4%BF%A1%E6%81%AF%E8%84%9A%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="è‡´è°¢"><a href="#è‡´è°¢" class="headerlink" title="è‡´è°¢"></a>è‡´è°¢</h2><p>æ„Ÿè°¢<a href="https://gitee.com/Finch1"><strong>Finch</strong></a>ã€<a href="https://gitee.com/lemofire"><strong>æŸ ç«</strong></a>æä¾›çš„æ–¹æ³•ä¸æ€è·¯ã€‚</p><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>åœ¨windowsç³»ç»Ÿä¸‹ï¼Œä¸‹è½½å‹ç¼©åŒ…ï¼Œåœ¨æ–‡ä»¶å¤¹å†…éƒ¨æŒ‰ä½shiftå¹¶å•å‡»å³é”®ï¼Œé€‰æ‹©<img src="https://s2.loli.net/2023/05/17/mPrRlTjMZXz9nkc.png" alt="image-20210520110701674" style="zoom:50%;" /></p><p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python3 DailyCP.py å­¦æ ¡å…¨å å­¦å· å¯†ç  å®šä½åœ°å€ formdbæ–‡ä»¶å¤¹ç»å¯¹è·¯å¾„</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python3 DailyCP.py xxå¤§å­¦ 3****9 d***4 å¹¿*******è·¯ &#x2F;Users&#x2F;*****&#x2F;Desktop&#x2F;Campus-master&#x2F;formdb</span><br></pre></td></tr></table></figure><p>è¾“å…¥åå›è½¦å³å¯ã€‚</p><h3 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h3><p>åœ¨macç³»ç»Ÿä¸‹é¦–å…ˆæ‰“å¼€ç»ˆç«¯ï¼Œä½¿ç”¨cdå®šä½åˆ°DailyAUTOæ–‡ä»¶å¤¹ã€‚</p><p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python3 DailyCP.py å­¦æ ¡å…¨å å­¦å· å¯†ç  å®šä½åœ°å€ formdbæ–‡ä»¶å¤¹ç»å¯¹è·¯å¾„</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python3 DailyCP.py xxå¤§å­¦ 3****9 d***4 å¹¿*******è·¯ &#x2F;Users&#x2F;*****&#x2F;Desktop&#x2F;Campus-master&#x2F;formdb</span><br></pre></td></tr></table></figure><p>è¾“å…¥åå›è½¦å³å¯ã€‚</p><h3 id="ç¬¬ä¸€æ¬¡ä½¿ç”¨"><a href="#ç¬¬ä¸€æ¬¡ä½¿ç”¨" class="headerlink" title="ç¬¬ä¸€æ¬¡ä½¿ç”¨"></a>ç¬¬ä¸€æ¬¡ä½¿ç”¨</h3><p>åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™ä¼šåœ¨å±å¹•ä¸Šæ‰“å°æé†’</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¯·æ‰‹åŠ¨å¡«å†™&#x2F;Users&#x2F;***&#x2F;Desktop&#x2F;DailyAUTO&#x2F;formdb&#x2F;910e5efaed9eaea5f146faa60c3ab47a.jsonï¼Œä¹‹åé‡æ–°è¿è¡Œè„šæœ¬</span><br></pre></td></tr></table></figure><p>åœ¨formdbæ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°ç›¸å¯¹åº”çš„jsonæ–‡ä»¶ï¼Œä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ï¼ˆæ¨èvscodeï¼‰ï¼Œå¦‚æœæ‰“å¼€åå‘ç°æ•°æ®éƒ½é›†ä¸­åœ¨ä¸€è¡Œï¼Œè¯·å•å‡»å³é”®å•å‡»</p><img src="https://s2.loli.net/2023/05/17/yItjk3gXmQUseDP.png" alt="image-20210520110701674" style="zoom:67%;" /><p>å¡«å†™è§„èŒƒè¯·æŸ¥çœ‹1129.jsonæ–‡ä»¶ã€‚</p><p>ä¸»è¦ä¿®æ”¹çš„ä¸ºselecté¡¹ï¼Œå¦‚æœå¯¹åº”çš„ä¸ºé€‰ä¸­ï¼Œåˆ™å°†å…¶ä¿®æ”¹ä¸º</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;isSelected&quot;: 1</span><br></pre></td></tr></table></figure><p>åä¹‹åˆ™ä¸º</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;isSelected&quot;: null</span><br></pre></td></tr></table></figure><p>æ³¨æ„æ˜¯å•é€‰è¿˜æ˜¯å¤šé€‰é¢˜ï¼Œåˆ‡å‹¿åœ¨å•é€‰é¢˜ä¸­ä¿®æ”¹å¤šé¡¹selectå€¼ä¸º1ã€‚</p><h3 id="æ­£å¼è¿è¡Œ"><a href="#æ­£å¼è¿è¡Œ" class="headerlink" title="æ­£å¼è¿è¡Œ"></a>æ­£å¼è¿è¡Œ</h3><p>å†æ¬¡åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä¸Šè¿°å‘½ä»¤</p><p>ç­‰å¾…ç¨‹åºè¿è¡Œï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹ä¼šé¦–å…ˆæ‰“å°å­¦æ ¡åå­—åŠç™»å½•åœ°å€ï¼Œå¹¶æ‰“å°æ‰€éœ€è¦å¡«å†™çš„è¡¨å•çš„åŸºæœ¬ä¿¡æ¯ï¼Œä¸‹ä¸€è¡Œä¼šæ‰“å°è¡¨å•è¯¦ç»†ä¿¡æ¯ï¼ˆä½ å·²ç»å¡«å†™å¥½çš„ï¼‰ã€‚</p><p>â€‹                                                                                            <strong>æ•°æ®å·²ç»è„±æ•</strong></p><img src="https://s2.loli.net/2023/05/17/MzwHlJ1AKdGnU67.png" alt="image-20210520110701674" style="zoom:50%;" /><p>å¦‚æœæ˜¯ä»Šå¤©çš„ç¬¬ä¸€æ¬¡å¡«å†™ï¼Œå°†ä¼šè¿”è¿˜â€SUCCESSâ€</p><p>å¦‚æœå·²ç»å¡«å†™ï¼Œå°†ä¼šè¿”è¿˜â€è¯¥æ”¶é›†å·²å¡«å†™æ— éœ€å†æ¬¡å¡«å†™â€</p><h2 id="è­¦å‘Š"><a href="#è­¦å‘Š" class="headerlink" title="è­¦å‘Š"></a>è­¦å‘Š</h2><p>æ­¤ç¨‹åºä»…ä¾›å­¦ä¹ ï¼Œè¯·å‹¿ç”¨äºè¿æ³•é€”å¾„ã€‚</p><h2 id="æ–‡ä»¶ä¸‹è½½åœ°å€"><a href="#æ–‡ä»¶ä¸‹è½½åœ°å€" class="headerlink" title="æ–‡ä»¶ä¸‹è½½åœ°å€"></a>æ–‡ä»¶ä¸‹è½½åœ°å€</h2><p>ç”±äºæ³•å¾‹ä¸æ”¿ç­–ï¼Œä¸‹è½½åœ°å€ä¸äºˆæ˜¾ç¤ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> pythonå¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pythonï¼Œç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨æ­è½½M1èŠ¯ç‰‡çš„macä¸Šä½¿ç”¨face_recognitionåº“å®ç°å®æ—¶äººè„¸è¯†åˆ«å°demo</title>
      <link href="2021/05/16/M1%20%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB/"/>
      <url>2021/05/16/M1%20%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>â€‹        åœ¨æ­è½½M1èŠ¯ç‰‡çš„macä¸Šé¡ºåˆ©è¿›è¡Œå¼€å‘æ˜¯ä¸€ä»¶ä¸ä»…éšç¼˜è€Œä¸”éœ€è¦äººå“çš„äº‹æƒ…ï¼Œä¸ä»…ä»…å› ä¸ºM1èŠ¯ç‰‡çš„ARMæ¶æ„æ‰€å¸¦æ¥çš„ç¼–è¯‘æ–¹å¼çš„ä¸åŒï¼Œbugsuræ–°çš„æ–‡ä»¶è·¯å¾„ç³»ç»Ÿä»¥åŠæ—¶ä¸æ—¶çš„æŠ½é£ä¹Ÿä½¿å¾—é¡ºåˆ©å¼€å‘çš„è·¯ä¸Šè‰°éš¾é™©é˜»ã€‚ä»Šå¤©å°±æ¥çœ‹çœ‹GitHubä¸Šå¤§åé¼é¼çš„å¼€æºäººè„¸åº“face_recognitionå¦‚ä½•æ¯”è¾ƒé¡ºåˆ©åœ°åœ¨M1ä¸Šè·‘èµ·æ¥ä¸”å®ç°ç®€å•çš„å®æ—¶äººè„¸è¯†åˆ«çš„åŠŸèƒ½ã€‚</p><div class="tag-plugin note" color="red"><div class="body"><p>ç”±äºä¸å¯æè¿°çš„åŸå› ï¼Œç½‘ç»œç¯å¢ƒæ‰€é€ æˆçš„å®‰è£…å¤±è´¥ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´ä¸­ã€‚</p></div></div><h1 id="ç¬¬ä¸€éƒ¨åˆ†-å…³äºç¯å¢ƒçš„é‚£ç‚¹äº‹"><a href="#ç¬¬ä¸€éƒ¨åˆ†-å…³äºç¯å¢ƒçš„é‚£ç‚¹äº‹" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†  å…³äºç¯å¢ƒçš„é‚£ç‚¹äº‹"></a>ç¬¬ä¸€éƒ¨åˆ†  å…³äºç¯å¢ƒçš„é‚£ç‚¹äº‹</h1><h2 id="ç½‘ç»œç¯å¢ƒæ­å»º"><a href="#ç½‘ç»œç¯å¢ƒæ­å»º" class="headerlink" title="ç½‘ç»œç¯å¢ƒæ­å»º"></a>ç½‘ç»œç¯å¢ƒæ­å»º</h2><div class="tag-plugin note" color="green"><div class="body"><p>å»ºè®®è¿›è¡Œè®¾ç½®çœå»ä¸å¿…è¦çš„éº»çƒ¦</p></div></div><p>å¤§éƒ¨åˆ†çš„ç¯å¢ƒæ­å»ºä¸åº“å®‰è£…éœ€è¦ä½¿ç”¨ç»ˆç«¯è¿›è¡Œï¼Œç”±äºç»ˆç«¯é»˜è®¤å¹¶ä¸èµ°ä»£ç†çš„ç½‘ç»œï¼Œ</p><p>ä¸ºäº†æ­¤åä¸‹è½½çš„é¡ºåˆ©ï¼Œå…ˆéœ€è¦è®¾ç½®ç»ˆç«¯ä¹Ÿå¯ä»¥ä½¿ç”¨ä»£ç†ã€‚</p><p>é¦–å…ˆï¼Œåœ¨å½“å‰ç”¨æˆ·æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªæ–‡ä»¶åä¸º .bash_profileçš„ç©ºç™½æ–‡æœ¬ã€Œ. å¼€å¤´æ–‡ä»¶ä¸ºéšè—æ–‡ä»¶ã€ï¼Œç„¶åè¾“å…¥ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight md"><figcaption><span>.bash_profile</span></figcaption><table><tr><td class="code"><pre><span class="line">function proxy<span class="emphasis">_off()&#123;</span></span><br><span class="line"><span class="emphasis">        unset http_</span>proxy</span><br><span class="line"><span class="code">        unset https_proxy</span></span><br><span class="line"><span class="code">        unset ftp_proxy</span></span><br><span class="line"><span class="code">        unset rsync_proxy</span></span><br><span class="line"><span class="code">        echo -e &quot;å·²å…³é—­ä»£ç†&quot;</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code"> </span></span><br><span class="line"><span class="code">function proxy_on() &#123;</span></span><br><span class="line"><span class="code">        export no_proxy=&quot;localhost,127.0.0.1,localaddress,.localdomain.com&quot;</span></span><br><span class="line"><span class="code">        export http_proxy=&quot;https://127.0.0.1:1087&quot;</span></span><br><span class="line"><span class="code">        export https_proxy=$http_proxy</span></span><br><span class="line"><span class="code">        export ftp_proxy=$http_proxy</span></span><br><span class="line"><span class="code">        export rsync_proxy=$http_proxy</span></span><br><span class="line"><span class="code">        export HTTP_PROXY=$http_proxy</span></span><br><span class="line"><span class="code">        export HTTPS_PROXY=$http_proxy</span></span><br><span class="line"><span class="code">        export FTP_PROXY=$http_proxy</span></span><br><span class="line"><span class="code">        export RSYNC_PROXY=$http_proxy</span></span><br><span class="line"><span class="code">        echo -e &quot;å·²å¼€å¯ä»£ç†&quot;</span></span><br><span class="line"><span class="code">&#125;</span></span><br></pre></td></tr></table></figure><p>åœ¨<strong>export no_proxy</strong>ä¸<strong>export http_proxy</strong>å¡«å…¥å¯¹åº”çš„æœ¬åœ°ä»£ç†æœåŠ¡å™¨åœ°å€ä»¥åŠç«¯å£</p><p>å¯ä»¥åœ¨ä½ çš„ä»£ç†è½¯ä»¶ä¸­æŸ¥çœ‹</p><p><img src="https://s2.loli.net/2023/05/17/DQGUuVM5hx6asg2.png" alt="æˆªå±2021-03-31 ä¸Šåˆ12.42.42.png"></p><p>å°†æ–‡ä»¶é…ç½®å¥½å¹¶æ”¾åœ¨ç”¨æˆ·æ ¹ç›®å½•å</p><h3 id="å½“è®©ç»ˆç«¯èµ°ä»£ç†çš„æ—¶å€™ï¼Œè¾“å…¥ï¼š"><a href="#å½“è®©ç»ˆç«¯èµ°ä»£ç†çš„æ—¶å€™ï¼Œè¾“å…¥ï¼š" class="headerlink" title="å½“è®©ç»ˆç«¯èµ°ä»£ç†çš„æ—¶å€™ï¼Œè¾“å…¥ï¼š"></a>å½“è®©ç»ˆç«¯èµ°ä»£ç†çš„æ—¶å€™ï¼Œè¾“å…¥ï¼š</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">source  ~&#x2F;.bash_profile</span><br><span class="line">proxy_on</span><br></pre></td></tr></table></figure><h3 id="æƒ³å…³é—­ä»£ç†çš„æ—¶å€™ï¼Œè¾“å…¥ï¼š"><a href="#æƒ³å…³é—­ä»£ç†çš„æ—¶å€™ï¼Œè¾“å…¥ï¼š" class="headerlink" title="æƒ³å…³é—­ä»£ç†çš„æ—¶å€™ï¼Œè¾“å…¥ï¼š"></a>æƒ³å…³é—­ä»£ç†çš„æ—¶å€™ï¼Œè¾“å…¥ï¼š</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">proxy_off</span><br></pre></td></tr></table></figure><div class="tag-plugin note" color="orange"><div class="body"><p>æ­¤ä¸ºä¸€æ¬¡æ€§è®¾ç½®ï¼Œå…³é—­ç»ˆç«¯åå¤±æ•ˆ</p></div></div><h2 id="åŸºæœ¬ç¯å¢ƒæ­å»º"><a href="#åŸºæœ¬ç¯å¢ƒæ­å»º" class="headerlink" title="åŸºæœ¬ç¯å¢ƒæ­å»º"></a>åŸºæœ¬ç¯å¢ƒæ­å»º</h2><h3 id="å®‰è£…pythonæœ€æ–°ç‰ˆæœ¬"><a href="#å®‰è£…pythonæœ€æ–°ç‰ˆæœ¬" class="headerlink" title="å®‰è£…pythonæœ€æ–°ç‰ˆæœ¬"></a>å®‰è£…pythonæœ€æ–°ç‰ˆæœ¬</h3><p>ä»pythonå®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬python è®°å¾—é€‰ä¸­ <a href="https://www.python.org/ftp/python/3.9.2/python-3.9.2-macos11.pkg">macOS 64-bit universal2 installer</a></p><div class="tag-plugin note" color="black"><div class="title"><strong>ä¸‹è½½åœ°å€</strong></div><div class="body"><p><a href="https://www.python.org/downloads/mac-osx/">https://www.python.org/downloads/mac-osx/</a></p></div></div><p>å®‰è£…å®Œæˆååœ¨ç»ˆç«¯è¾“å…¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">open ~&#x2F;.bash_profile </span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶ä¸­åŠ ä¸Šä¸€è¡Œç¯å¢ƒå˜é‡é…ç½®åä¿å­˜é€€å‡º</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;bin:$PATH   </span><br></pre></td></tr></table></figure><p>é‡æ–°æ‰“å¼€ç»ˆç«¯è¾“å…¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">source ~&#x2F;.bash_profile </span><br><span class="line">python3 --version     -------æ³¨æ„æ˜¯python3</span><br></pre></td></tr></table></figure><p>é¡ºåˆ©çš„è¯ä½ ä¼šåœ¨ç»ˆç«¯ä¸­çœ‹åˆ°pythonçš„ç‰ˆæœ¬å·ä¿¡æ¯ï¼Œpythonå®‰è£…åˆ°æ­¤ç»“æŸ</p><h3 id="å„ç§ä¾èµ–åŒ…å®‰è£…"><a href="#å„ç§ä¾èµ–åŒ…å®‰è£…" class="headerlink" title="å„ç§ä¾èµ–åŒ…å®‰è£…"></a>å„ç§ä¾èµ–åŒ…å®‰è£…</h3><div class="tag-plugin note"><div class="title"><strong>radiation</strong></div><div class="body"><p>yellow, å¤´é“çš„å¯ä»¥è¯•è¯•ç›´æ¥å®‰è£… è®¾ç½®å¥½ç»ˆç«¯ç½‘ç»œä»£ç†å åœ¨ç»ˆç«¯ä¸­è¾“å…¥ pip3 install face_recognition</p></div></div><p>åœ¨å®‰è£…face_recognitionä¹‹å‰æˆ‘ä»¬éœ€è¦å®‰è£…</p><div class="tag-plugin checkbox" ><input type="checkbox"/><span>homebrew</span></div><div class="tag-plugin checkbox" ><input type="checkbox"/><span>miniforge</span></div><div class="tag-plugin checkbox" ><input type="checkbox"/><span>numpy</span></div><div class="tag-plugin checkbox" ><input type="checkbox"/><span>openblas</span></div><div class="tag-plugin checkbox" ><input type="checkbox"/><span>opencv</span></div><div class="tag-plugin checkbox" ><input type="checkbox"/><span>cmake</span></div><div class="tag-plugin checkbox" ><input type="checkbox"/><span>dlib</span></div><h3 id="å®‰è£…homebrew"><a href="#å®‰è£…homebrew" class="headerlink" title="å®‰è£…homebrew"></a>å®‰è£…homebrew</h3><div class="tag-plugin note" color="red"><div class="body"><p>å”¯ä¸€çš„é‡ç‚¹æ˜¯é…ç½®ç¯å¢ƒå˜é‡</p></div></div><p>ä¸‹è½½å®‰è£…è¿‡ç¨‹ç•¥</p><p>å®‰è£…å®Œæˆåæ ¹æ®æç¤ºåœ¨ç»ˆç«¯ä¸­è¾“å…¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">open ~&#x2F; .zprofile</span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶ä¸­åŠ å…¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">eval &quot;$(&#x2F;opt&#x2F;homebrew&#x2F;bin&#x2F;brew shellenv)&quot;</span><br></pre></td></tr></table></figure><p>ä¿å­˜åé‡å¯homebrewï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">brew</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡ºç°å„ç§æŒ‡ä»¤æç¤ºï¼Œè¯æ˜å®‰è£…æˆåŠŸ</p><h3 id="å®‰è£…miniforge"><a href="#å®‰è£…miniforge" class="headerlink" title="å®‰è£…miniforge"></a>å®‰è£…miniforge</h3><div class="tag-plugin note" color="purple"><div class="title"><strong>æ³¨æ„</strong></div><div class="body"><p>é‰´äºM1ç‰ˆæœ¬çš„å¼€å‘å·¥å…·é€‚é…è¿›ç¨‹ç›®å‰å¹¶ä¸åŒæ­¥ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨miniforgeæ¥è¿›è¡Œåº“ç®¡ç†</p></div></div><p>åœ¨ç½‘ç«™ä¸­é€‰æ‹©Apple Siliconç‰ˆæœ¬ä¸‹è½½ï¼Œä¸‹è½½åç›´æ¥è¿è¡Œå³å¯</p><img src="https://s2.loli.net/2023/05/17/JFu2coavtEZB8LC.png" width="50%"><p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åœ¨ç»ˆç«¯ä¸­æ¿€æ´»</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">conda create -n myenv python&#x3D;3.9 &#x2F;&#x2F;åˆ›å»ºåä¸ºmyenvï¼Œpythonç‰ˆæœ¬ä¸º3.9çš„ç¯å¢ƒ</span><br><span class="line">conda activate myenv &#x2F;&#x2F;æ¿€æ´»ç¯å¢ƒ</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…numpy"><a href="#å®‰è£…numpy" class="headerlink" title="å®‰è£…numpy"></a>å®‰è£…numpy</h3><p>æ¿€æ´»condaä¸”é…ç½®å¥½ç½‘ç»œä»£ç†åå¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ä¸­è¾“å…¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip3 install numpy&#x3D;1.9.14</span><br></pre></td></tr></table></figure><p>ç­‰å¾…ä¸‹è½½å®‰è£…ï¼Œå®‰è£…å®Œæˆåæ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python3</span><br><span class="line">&gt;&gt;&gt;<span class="keyword">import</span> numpy</span><br></pre></td></tr></table></figure><p>æ²¡æŠ¥é”™çš„è¯å°±å®‰è£…æˆåŠŸäº†</p><h3 id="å®‰è£…openblas"><a href="#å®‰è£…openblas" class="headerlink" title="å®‰è£…openblas"></a>å®‰è£…openblas</h3><p>æ¿€æ´»condaä¸”é…ç½®å¥½ç½‘ç»œä»£ç†åå¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ä¸­è¾“å…¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip3 install openblas</span><br></pre></td></tr></table></figure><p>ç­‰å¾…ä¸‹è½½å®‰è£…ï¼Œå®‰è£…å®Œæˆåæ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python3 </span><br><span class="line">&gt;&gt;&gt;<span class="keyword">import</span> openblas</span><br></pre></td></tr></table></figure><p>æ²¡æŠ¥é”™å®‰è£…æˆåŠŸ</p><h3 id="éœ€è¦ç¼–è¯‘çš„åº“"><a href="#éœ€è¦ç¼–è¯‘çš„åº“" class="headerlink" title="éœ€è¦ç¼–è¯‘çš„åº“"></a>éœ€è¦ç¼–è¯‘çš„åº“</h3><div class="tag-plugin checkbox" ><input type="checkbox"/><span>opencv</span></div><div class="tag-plugin checkbox" ><input type="checkbox"/><span>cmake</span></div><div class="tag-plugin checkbox" ><input type="checkbox"/><span>dlib</span></div><div class="tag-plugin note" color="yellow"><div class="body"><p>è¿™ä¸‰ä¸ªåŒ…å¦‚æœå®‰è£…å¤±è´¥ï¼Œå¯ä»¥å¤šè¯•å‡ æ¬¡ï¼Œcmakeæœ‰æ¦‚ç‡ç¼–è¯‘å¤±è´¥</p></div></div><h3 id="å®‰è£…opencv"><a href="#å®‰è£…opencv" class="headerlink" title="å®‰è£…opencv"></a>å®‰è£…opencv</h3><p>ç‚¹å‡»é“¾æ¥ä¸‹è½½opencvåº“ï¼Œä»…é€‚ç”¨äºM1èŠ¯ç‰‡</p><p><a href="https://github.com/wizyoung/AppleSiliconSelfBuilds/blob/main/builds/opencv_contrib_python-4.5.0+bbaa777-cp39-cp39-macosx_11_0_arm64.whl">opencv_contrib_python-4.5.0+bbaa777-cp39-cp39-macosx_11_0_arm64.whl</a></p><p>åœ¨ç»ˆç«¯ä¸­æ¿€æ´»ç¯å¢ƒ</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">conda activate myenv &#x2F;&#x2F;æ¿€æ´»ç¯å¢ƒ</span><br></pre></td></tr></table></figure><p>å®šä½åˆ°ä¸‹è½½ç›®å½•å¹¶å®‰è£…</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd ç›®å½•</span><br><span class="line">pip3 install opencv_contrib_python-4.5.0+bbaa777-cp39-cp39-macosx_11_0_arm64.whl</span><br></pre></td></tr></table></figure><p>ç­‰å¾…å®‰è£…å³å¯</p><h3 id="å®‰è£…cmake"><a href="#å®‰è£…cmake" class="headerlink" title="å®‰è£…cmake"></a>å®‰è£…cmake</h3><p>ç»ˆç«¯é…ç½®å¥½ç½‘ç»œä»£ç†åè¾“å…¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">brew install cmake &#x2F;&#x2F;å®‰è£…cmake</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…Dlib"><a href="#å®‰è£…Dlib" class="headerlink" title="å®‰è£…Dlib"></a>å®‰è£…Dlib</h3><p>æ¿€æ´»condaä¸”é…ç½®å¥½ç½‘ç»œä»£ç†åç›´æ¥åœ¨ç»ˆç«¯ä¸­è¾“å…¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip3 install dlib </span><br></pre></td></tr></table></figure><p>å®‰è£…ååœ¨ç»ˆç«¯è¾“å…¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python3</span><br><span class="line">&gt;&gt;&gt;import dlib</span><br></pre></td></tr></table></figure><p>å¦‚æœæœªæŠ¥é”™æ­å–œä½ å®‰è£…æˆåŠŸï¼Œæˆ‘ä»¬å°±å·®æœ€åä¸€æ­¥äº†</p><p>å¯¹ç€æ£€æŸ¥ä¸€ä¸‹å§</p><div class="tag-plugin checkbox" ><input type="checkbox" checked="true"/><span>homebrew</span></div><div class="tag-plugin checkbox" ><input type="checkbox" checked="true"/><span>miniforge</span></div><div class="tag-plugin checkbox" ><input type="checkbox" checked="true"/><span>numpy</span></div><div class="tag-plugin checkbox" ><input type="checkbox" checked="true"/><span>openblas</span></div><div class="tag-plugin checkbox" ><input type="checkbox" checked="true"/><span>opencv</span></div><div class="tag-plugin checkbox" ><input type="checkbox" checked="true"/><span>cmake</span></div><div class="tag-plugin checkbox" ><input type="checkbox" checked="true"/><span>dlib</span></div><h2 id="å®‰è£…face-recognition"><a href="#å®‰è£…face-recognition" class="headerlink" title="å®‰è£…face_recognition"></a>å®‰è£…face_recognition</h2><p>æ¿€æ´»condaä¸”é…ç½®å¥½ç½‘ç»œä»£ç†åç›´æ¥åœ¨ç»ˆç«¯ä¸­è¾“å…¥</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip3 install face_recognition</span><br></pre></td></tr></table></figure><div class="tag-plugin note" color="light"><div class="body"><p>å¦‚æœå‡ºç°äº†ä»»ä½•é”™è¯¯ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºå‘Šè¯‰æˆ‘</p></div></div><div class="tag-plugin note" color="green"><div class="title"><strong>æ¸©é¦¨æç¤º</strong></div><div class="body"><p>æ­¤è¿‡ç¨‹éœ€è¦ç½‘ç»œä»¥åŠäººå“åŒbuffå åŠ ï¼Œè¯·åå’Œæ”¾å®½â€¦â€¦</p></div></div><p>å®‰è£…å®Œæˆååœ¨ç»ˆç«¯ä¸­è¾“å…¥</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python3</span><br><span class="line">&gt;&gt;&gt;<span class="keyword">import</span> face_recognition</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰æŠ¥é”™è¯æ˜ä¸‡é‡Œé•¿å¾æˆ‘ä»¬å·²ç»èµ°äº†ä¸€åŠäº†ã€‚</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ pip3 list å‘½ä»¤æ¥æŸ¥çœ‹æ‰€æœ‰å·²ç»å®‰è£…çš„åº“ å¦‚å›¾</p><p><img src="https://s2.loli.net/2023/05/17/uCx1dKmAkaMZ46l.png" alt="æˆªå±2021-03-31 ä¸Šåˆ1.05.28.png"></p><p>åˆ°æ­¤å®‰è£…å‘Šä¸€æ®µè½</p><h1 id="ç¬¬äºŒéƒ¨åˆ†-å¼€å§‹é€ è½®å­å§"><a href="#ç¬¬äºŒéƒ¨åˆ†-å¼€å§‹é€ è½®å­å§" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†  å¼€å§‹é€ è½®å­å§"></a>ç¬¬äºŒéƒ¨åˆ†  å¼€å§‹é€ è½®å­å§</h1><p>ç”±äºå®‰è£…è¿™äº›ä¾èµ–å’Œåº“å¯èƒ½å·²ç»æŸè€—ä½ çš„å¤§éƒ¨åˆ†ç²¾åŠ›äº†ï¼Œ</p><p>æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¿«é€Ÿåœ°æ¥çœ‹çœ‹æ€ä¹ˆæŠŠè¿™ä¸ªç®€å•çš„å®æ—¶äººè„¸è¯†åˆ«è·‘èµ·æ¥å§ã€‚</p><div class="tag-plugin note" color="red"><div class="body"><p>æ‘„åƒå¤´æ˜¯å¿…é¡»çš„ï¼Œæ‰€ä»¥è¯·ä¸è¦å…³ä¸Šç›–å­è¿è¡Œæ¥ä¸‹æ¥çš„æ­¥éª¤</p></div></div><h3 id="ä¸‹è½½pyæ–‡ä»¶"><a href="#ä¸‹è½½pyæ–‡ä»¶" class="headerlink" title="ä¸‹è½½pyæ–‡ä»¶"></a>ä¸‹è½½pyæ–‡ä»¶</h3><p>ä»GitHubä¸Šä¸‹è½½</p><p><a href="https://github.com/ageitgey/face_recognition/blob/master/examples/facerec_from_webcam_faster.py">facerec_from_webcam_faster.py</a></p><h3 id="ä½¿ç”¨ç¼–è¾‘å™¨ç¼–è¾‘"><a href="#ä½¿ç”¨ç¼–è¾‘å™¨ç¼–è¾‘" class="headerlink" title="ä½¿ç”¨ç¼–è¾‘å™¨ç¼–è¾‘"></a>ä½¿ç”¨ç¼–è¾‘å™¨ç¼–è¾‘</h3><p>ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨æ‰“å¼€ï¼Œè¿™é‡Œä½¿ç”¨vscodeç¤ºèŒƒï¼Œä¸‹é¢ä»£ç éƒ½æ˜¯ä»æºæ–‡ä»¶ä¸­æˆªå‡ºï¼Œå¯¹åº”ä¿®æ”¹å³å¯ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Load a sample picture and learn how to recognize it.</span></span><br><span class="line"></span><br><span class="line">å›¾ç‰‡äººå1_image = face_recognition.load_image_file(<span class="string">&quot;æŠŠè¿™é‡Œæ”¹æˆä½ è¦è¯†åˆ«çš„å›¾ç‰‡çš„è·¯å¾„&quot;</span>)   </span><br><span class="line"></span><br><span class="line">å›¾ç‰‡äººå1_face_encoding = face_recognition.face_encodings(å›¾ç‰‡äººå1_image)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Load a second sample picture and learn how to recognize it.</span></span><br><span class="line"></span><br><span class="line">å›¾ç‰‡äººå2_image = face_recognition.load_image_file(<span class="string">&quot;æŠŠè¿™é‡Œæ”¹æˆä½ è¦è¯†åˆ«çš„å›¾ç‰‡2çš„è·¯å¾„&quot;</span>)</span><br><span class="line"></span><br><span class="line">å›¾ç‰‡äººå2_face_encoding = face_recognition.face_encodings(å›¾ç‰‡äººå1_image)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create arrays of known face encodings and their names</span></span><br><span class="line">known_face_encodings = [</span><br><span class="line">    å›¾ç‰‡äººå1_face_encoding,</span><br><span class="line">    å›¾ç‰‡äººå2_face_encoding</span><br><span class="line">]</span><br><span class="line">known_face_names = [</span><br><span class="line">    <span class="string">&quot;å›¾ç‰‡1æ‰€å¯¹åº”çš„å…¨å&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å›¾ç‰‡2æ‰€å¯¹åº”çš„å…¨å&quot;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p>å¦‚å›¾ï¼Œå›¾ç‰‡1ä¸ºObamaï¼Œå›¾ç‰‡2ä¸ºbiden</p><img src="https://s2.loli.net/2023/05/17/8GY3PlShE6OQdJ9.png" alt="WX20210328-193809@2x.png"  /><h3 id="è¿è¡Œä¸€ä¸‹å§ï¼"><a href="#è¿è¡Œä¸€ä¸‹å§ï¼" class="headerlink" title="è¿è¡Œä¸€ä¸‹å§ï¼"></a>è¿è¡Œä¸€ä¸‹å§ï¼</h3><p>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python3 &lt;å°†æ–‡ä»¶æ‹–åˆ°è¿™é‡Œæˆ–è€…ç²˜è´´æ–‡ä»¶çš„è·¯å¾„&gt;</span><br></pre></td></tr></table></figure><p>å°±åƒè¿™æ ·</p><p><img src="https://s2.loli.net/2023/05/17/jW6kPmswvN4nrXK.png" alt="WX20210328-195510@2x.png"> </p><p>æŒ‰ä¸‹å›è½¦ç­‰å¾…å¥‡è¿¹çš„å‘ç”Ÿ</p><p>ä¸å‡ºæ„å¤–çš„è¯ï¼Œæå‡ºä½ çš„å°æ‰‹æœºæ‹¿å‡ºä¸€å¼ ç…§ç‰‡æˆ–è€…æŠŠä½ çš„è„¸å¯¹å‡†æ‘„åƒå¤´ï¼Œå°±å¯ä»¥çœ‹åˆ°</p><img src="https://s2.loli.net/2023/05/17/NHzceP3gfYtynl5.png" alt="521616932197_.pic_hd.jpg" style="zoom:60%;" /><h2 id="å¤§åŠŸå‘Šæˆå•¦ï¼"><a href="#å¤§åŠŸå‘Šæˆå•¦ï¼" class="headerlink" title="å¤§åŠŸå‘Šæˆå•¦ï¼"></a>å¤§åŠŸå‘Šæˆå•¦ï¼</h2><h1 id="å°¾å·´"><a href="#å°¾å·´" class="headerlink" title="å°¾å·´"></a>å°¾å·´</h1><p>æ€»ä½“æ¥è¯´è·‘èµ·è¿™ä¸ªå°é¡¹ç›®è¿˜æ˜¯åŸºæœ¬æ²¡æœ‰éš¾åº¦çš„ï¼Œæœ€ä¸»è¦çš„æ˜¯æœ‰ç¨³å®šçš„ç½‘ç»œä»¥åŠè¶³å¤Ÿçš„è€å¿ƒ</p><p>face_recognitionè¿™ä¸ªåº“å…·æœ‰å¾ˆå¤šæ–¹å‘çš„åº”ç”¨ï¼Œä»Šå¤©åªæ˜¯ç®€å•åœ°å…¥é—¨ä¸€ä¸‹ï¼Œè¿˜æœ‰å¾ˆå¤šç©æ³•å¯ä»¥å‘æ˜å“¦ï¼</p><div class="tag-plugin note" color="dark"><div class="title"><strong>è‡´è°¢</strong></div><div class="body"><p>è°¢è°¢é˜…è¯»ï¼Œæ¬¢è¿ä½ çš„ç•™è¨€ï¼</p></div></div>]]></content>
      
      
      <categories>
          
          <category> pythonå¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> macOS </tag>
            
            <tag> M1 </tag>
            
            <tag> face_recognition </tag>
            
            <tag> äººè„¸è¯†åˆ« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨openwrtä¸Šä½¿ç”¨DDNSTOæ’ä»¶è¿›è¡Œè¿œç¨‹ç®¡ç†</title>
      <link href="2021/04/05/DDNSTO/"/>
      <url>2021/04/05/DDNSTO/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="tag-plugin note" color="orange"><div class="body"><p>DDNSTOæœ‰ä»˜è´¹ä¸å…è´¹ä¸¤ç§æ¨¡å¼é€‰æ‹©ï¼Œå…è´¹å¥—é¤éœ€è¦æ¯éš”7å¤©æ‰‹åŠ¨è¿›è¡Œä¸€æ¬¡ç»­æœŸ</p></div></div><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>openwrtæ˜¯ç›®å‰ä¼—å¤šè·¯ç”±å™¨åˆ·æœºçš„é€‰æ‹©ï¼Œç•Œé¢ç¾è§‚è€Œä¸”æ’ä»¶ä¸°å¯Œï¼Œä½†æ˜¯æœ‰ä¸€å®šçš„ä¸Šæ‰‹æˆæœ¬ï¼Œè¿œç¨‹ç®¡ç†è·¯ç”±å™¨åœ¨openwrtä¸Šçš„é…ç½®å¹¶ä¸ç®€å•ï¼Œddnstoçš„å‡ºç°å¤§å¤§é™ä½äº†æ–°æ‰‹çš„ä½¿ç”¨æˆæœ¬ï¼Œä½¿ç”¨ä½“éªŒä¹Ÿååˆ†å‹å¥½ã€‚</p><h2 id="ä½¿ç”¨æ•™ç¨‹"><a href="#ä½¿ç”¨æ•™ç¨‹" class="headerlink" title="ä½¿ç”¨æ•™ç¨‹"></a>ä½¿ç”¨æ•™ç¨‹</h2><div class="tag-plugin note" color="green"><div class="title"><strong>å°æç¤º</strong></div><div class="body"><p>æœ¬æ’ä»¶ç†è®ºä¸Šé€‚ç”¨äºä»»ä½•åŸºäºopenwrtçš„åŸç‰ˆæˆ–è€…ç¬¬ä¸‰æ–¹è·¯ç”±å™¨</p></div></div><div class="tag-plugin note" color="green"><div class="body"><p>æœ¬æ–‡ä½¿ç”¨LEDEå›ºä»¶è¿›è¡Œæ¼”ç¤º</p></div></div><h3 id="å®‰è£…DDNSTOæ’ä»¶"><a href="#å®‰è£…DDNSTOæ’ä»¶" class="headerlink" title="å®‰è£…DDNSTOæ’ä»¶"></a>å®‰è£…DDNSTOæ’ä»¶</h3><p>ä»ç½‘ç«™ä¸­ä¸‹è½½å¯¹åº”æ¶æ„ç‰ˆæœ¬çš„ipkæ–‡ä»¶</p><div class="tag-plugin note" color="dark"><div class="title"><strong>ä¸‹è½½åœ°å€</strong></div><div class="body"><p><a href="https://firmware.koolshare.cn/binary/ddnsto/openwrt/">https://firmware.koolshare.cn/binary/ddnsto/openwrt/</a></p></div></div><p>åœ¨openwrtè·¯ç”±å™¨åå°ç®¡ç†ç•Œé¢ä¸­å®‰è£…æ’ä»¶</p><p>ä½¿ç”¨æ–‡ä»¶ä¼ è¾“åŠŸèƒ½å°†.ipkæ–‡ä»¶ä¸Šä¼ è‡³/tmp/upload/</p><p><img src="https://s2.loli.net/2023/05/17/VJBywGW35vdjlsU.png" alt="æˆªå±2021-04-05 ä¸‹åˆ10.13.25.png"></p><p>ä¸Šä¼ æˆåŠŸåè·³è½¬è‡³è½¯ä»¶åŒ…é¡µé¢</p><p><img src="https://s2.loli.net/2023/05/17/C58FTYhkneIKyUv.png" alt="æˆªå±2021-04-05 ä¸‹åˆ10.15.02.png"></p><p>åœ¨ä¸‹è½½å¹¶å®‰è£…è½¯ä»¶åŒ…è¾“å…¥æ¡†ä¸­è¾“å…¥/tmp/upload/å¯¹åº”çš„åå­—.ipkç­‰å¾…å®‰è£…å®Œæˆ</p><p>åœ¨æœåŠ¡ä¸­çœ‹åˆ°DDNS.toå†…ç½‘ç©¿é€ä¸€æ å°±è¯æ˜å®‰è£…æˆåŠŸäº†</p><h3 id="é…ç½®DDNSTO"><a href="#é…ç½®DDNSTO" class="headerlink" title="é…ç½®DDNSTO"></a>é…ç½®DDNSTO</h3><p>æ‰“å¼€<a href="https://www.ddnsto.comç‚¹å‡»å³ä¸Šè§’ç™»å½•åå°å¹¶ä½¿ç”¨å¾®ä¿¡æ³¨å†Œ/">https://www.ddnsto.comç‚¹å‡»å³ä¸Šè§’ç™»å½•åå°å¹¶ä½¿ç”¨å¾®ä¿¡æ³¨å†Œ</a></p><p>å¤åˆ¶é¡µé¢ä¸Šçš„ä»¤ç‰Œ<img src="https://s2.loli.net/2023/05/17/1E967LeiVQHPIRw.png" alt="image-20210405222125549.png"></p><p>å›åˆ°è·¯ç”±å™¨é¡µé¢æ‰“å¼€DDNS.toæ’ä»¶é¡µé¢åœ¨ä»¤ç‰Œæ¡†å†…å°†å¤åˆ¶çš„ä»¤ç‰Œç²˜è´´å¹¶å‹¾é€‰å¯ç”¨ï¼Œç‚¹å‡»é¡µé¢çš„ä¿å­˜&amp;åº”ç”¨</p><p><img src="https://s2.loli.net/2023/05/17/opkN9r28lDgy7nm.png" alt="æˆªå±2021-04-05 ä¸‹åˆ10.23.04.png"></p><p>ç¨ç­‰ç‰‡åˆ»å›åˆ°DDNSTOåå°ï¼Œä½ çš„è·¯ç”±å™¨åº”è¯¥å°±ä¼šå‡ºç°åœ¨é¡µé¢ä¸­ã€‚</p><p>ç‚¹å‡»æ·»åŠ åŸŸåæ˜ å°„ï¼Œè¾“å…¥ä½ å–œæ¬¢çš„åå­—å¹¶å°†è·¯ç”±å™¨çš„å†…ç½‘åœ°å€å¡«å…¥å¹¶ä¿å­˜ã€‚</p><h2 id="ä½¿ç”¨DDNSTO"><a href="#ä½¿ç”¨DDNSTO" class="headerlink" title="ä½¿ç”¨DDNSTO"></a>ä½¿ç”¨DDNSTO</h2><p>ä¸€åˆ‡é…ç½®å®Œæˆååº”è¯¥å¦‚å›¾ä¸€æ ·</p><p><img src="https://s2.loli.net/2023/05/17/3TXy4CAibBw8doF.png" alt="WX20210405-222616@2x.png"></p><p>ç‚¹å‡»ç»™å‡ºçš„åŸŸåï¼Œå¦‚æœå¯ä»¥æ­£ç¡®è·³è½¬è‡³è·¯ç”±å™¨ç®¡ç†é¡µé¢ï¼Œæ­å–œä½ å·²ç»å¯ä»¥æ­£å¸¸ä½¿ç”¨å•°ï¼SEE YOU NEXT TIMEï¼</p>]]></content>
      
      
      <categories>
          
          <category> openwrt </category>
          
      </categories>
      
      
        <tags>
            
            <tag> openwrt </tag>
            
            <tag> å†…ç½‘ç©¿é€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ©ç”¨pythonå†™ä¸€ä¸ªè‡ªåŠ¨è·å–å±€åŸŸç½‘ipåœ°å€å¹¶å¼€å¯SSæœåŠ¡å™¨çš„å°å·¥å…·</title>
      <link href="2021/03/30/%E6%A0%A1%E5%9B%AD%E7%BD%91SS%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>2021/03/30/%E6%A0%A1%E5%9B%AD%E7%BD%91SS%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è¿™ä¸ªå­¦å¹´å­¦æ ¡æŠŠå®½å¸¦è¿è¥å•†ä»ä¹‹å‰çš„è”é€šå¤§å“¥å“¥æ¢æˆäº†å¦‚ä»Šçš„ç”µä¿¡å°å¼Ÿå¼Ÿï¼Œä½¿ç”¨ä½“éªŒå¯è°“ä¸€è½åƒä¸ˆï¼Œæœ€ä¸»è¦çš„åŸå› æ˜¯ç”µä¿¡ä¸å†åƒè”é€šæä¾›æ‹¨å·ä¸Šç½‘çš„è´¦å·å’Œå¯†ç ï¼Œæ”¹æˆäº†å¼ºåˆ¶ä½¿ç”¨å¤©ç¿¼æ ¡å›­çš„ç¨‹åºæ¥è¿›è¡Œè®¤è¯ä¸Šç½‘ï¼Œè€Œä¸”é™åˆ¶åªèƒ½ä¸€å°è®¾å¤‡åœ¨çº¿ï¼Œè¿™ç›´æ¥æå®äº†å®¿èˆå†…çš„ä¸€å †éœ€è¦è”ç½‘çš„è®¾å¤‡ï¼Œé¦–å…ˆæƒ³åˆ°çš„æ˜¯é€šè¿‡ç”µè„‘å…ˆè¿æ¥åœ¨å…±äº«ç»™è·¯ç”±å™¨ï¼Œæ„Ÿè°¢è¿™ä½å…„å¼Ÿæä¾›çš„æ–¹æ³•@<a href="https://blog.csdn.net/cbcrzcbc/article/details/108612445?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522161707454916780271558206%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=161707454916780271558206&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-5-108612445.pc_search_result_no_baidu_js&utm_term=%E5%A4%A9%E7%BF%BC%E6%A0%A1%E5%9B%AD">task138</a>ï¼Œä½†æ˜¯è½¬å¿µä¸€æƒ³ï¼Œæ—¢ç„¶å­¦æ ¡å†…è¦†ç›–äº†æ ¡å›­ç½‘ï¼Œé‚£æ˜¯å¦å¯ä»¥ä½¿ç”¨ç”µè„‘æ­å»ºæœåŠ¡å™¨ä»è€Œè¾¾åˆ°åœ¨æ ¡å›­ç½‘èŒƒå›´å†…æ‰‹æœºæˆ–è€…iPadéƒ½å¯ä»¥ä¸Šç½‘å‘¢?è¿™å°±æ˜¯ä»Šå¤©è®¨è®ºçš„æ–¹æ³•ã€‚</p><div class="tag-plugin note" color="red"><div class="body"><p>æ­¤æ–¹æ³•ä»…é™äº¤æµï¼Œè¯·å‹¿åœ¨ä¿å¯†åœºæ‰€ä½¿ç”¨</p></div></div><div class="tag-plugin note" color="green"><div class="body"><p>ç›®å‰ä»…é€‚ç”¨äºWindows</p></div></div><div class="tag-plugin note" color="dark"><div class="title"><strong>æºç :</strong></div><div class="body"><p><a href="https://github.com/hamster1963/-SS-">https://github.com/hamster1963/-SS-</a></p></div></div><h2 id="å®ç°æ•ˆæœ"><a href="#å®ç°æ•ˆæœ" class="headerlink" title="å®ç°æ•ˆæœ"></a>å®ç°æ•ˆæœ</h2><div class="tag-plugin checkbox" ><input type="checkbox" checked="true"/><span>è‡ªåŠ¨è·å–æœ¬æœºå±€åŸŸç½‘åœ°å€å¹¶å†™å…¥é…ç½®æ–‡ä»¶</span></div><div class="tag-plugin checkbox" ><input type="checkbox" checked="true"/><span>è‡ªåŠ¨è·å–æœ¬æœºå±€åŸŸç½‘åœ°å€å¹¶å†™å…¥é…ç½®æ–‡ä»¶</span></div><div class="tag-plugin checkbox" ><input type="checkbox" checked="true"/><span>å¼€å¯æ—¶æ˜¾ç¤ºå„é¡¹é…ç½®å‚æ•°ï¼Œå¸®åŠ©ä½¿ç”¨è€…é…ç½®ä»£ç†è½¯ä»¶</span></div><div class="tag-plugin checkbox" ><input type="checkbox" checked="true"/><span>å¼€å¯SSä»£ç†æœåŠ¡å™¨ï¼Œå‡ºé”™æ—¶æ˜¾ç¤ºé”™è¯¯å¼¹çª—</span></div><h2 id="åŸç†ä¸æ”¹è¿›"><a href="#åŸç†ä¸æ”¹è¿›" class="headerlink" title="åŸç†ä¸æ”¹è¿›"></a>åŸç†ä¸æ”¹è¿›</h2><p>å¼€å¯SSä»£ç†æœåŠ¡å™¨éƒ¨åˆ†å‚è€ƒäº†GitHubä¸Šçš„<a href="https://github.com/shadowsocks/libQtShadowsocks">shadowsocks-libqss</a>é¡¹ç›®ï¼Œéœ€è¦ä½¿ç”¨è€…æ‰‹åŠ¨å¡«å†™configæ–‡ä»¶ï¼Œä½¿ç”¨èµ·æ¥å­¦ä¹ æˆæœ¬æœ‰ä¸€ç‚¹é«˜ï¼Œä¸”å¦‚æœæ²¡æœ‰æˆåŠŸè¿è¡Œä¹Ÿæ²¡æœ‰é”™è¯¯æç¤ºï¼Œæ‰€ä»¥ä½¿ç”¨pythonç¼–å†™ä¸€ä¸ªå°è„šæœ¬æ”¹è¿›ä¸€ä¸‹ï¼Œä»¥è¾¾åˆ°ä¸Šè¿°çš„åŠŸèƒ½ã€‚</p><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><h3 id="windowså¼€å¯æœåŠ¡å™¨"><a href="#windowså¼€å¯æœåŠ¡å™¨" class="headerlink" title="windowså¼€å¯æœåŠ¡å™¨"></a>windowså¼€å¯æœåŠ¡å™¨</h3><p>æƒ³å¼€å¯SSä»£ç†æœåŠ¡å™¨ååˆ†ç®€å•ï¼Œå¦‚æœä¸æƒ³æ›´æ”¹é»˜è®¤çš„ç«¯å£ã€å¯†ç ã€åŠ å¯†æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥åŒå‡»ä½¿ç”¨ å¼€å¯SSä»£ç†æœåŠ¡å™¨.exeï¼Œæ‰“å¼€åæ ¹æ®å¼¹çª—é…ç½®è‡ªå·±çš„ä»£ç†è½¯ä»¶ï¼Œå®‰å“å°é£æœºï¼Œè‹¹æœå°ç«ç®­ï¼Œwindowsä½¿ç”¨clashï¼ŒmacOSä½¿ç”¨surgeã€‚</p><p>ä¸€åˆ‡é¡ºåˆ©ååº”è¯¥æ˜¯è¿™æ ·çš„ç•Œé¢</p><p><img src="https://s2.loli.net/2023/05/17/xkFOngzIiB5LEJG.png"></p><h3 id="iosä½¿ç”¨å°ç«ç®­è¿æ¥"><a href="#iosä½¿ç”¨å°ç«ç®­è¿æ¥" class="headerlink" title="iosä½¿ç”¨å°ç«ç®­è¿æ¥"></a>iosä½¿ç”¨å°ç«ç®­è¿æ¥</h3><p>åœ¨å°ç«ç®­ä¸­ç‚¹å‡»å³ä¸Šè§’åŠ å·ï¼Œç±»å‹é€‰æ‹©Shadowsocksï¼Œæ ¹æ®é…ç½®å¼¹çª—ä¸­çš„ä¿¡æ¯ï¼Œå¡«å…¥ç›¸å…³é…ç½®ï¼Œæ··æ·†ä¸æ’ä»¶ä¸ºç©ºã€‚å¦‚å›¾:</p><img src="https://s2.loli.net/2023/05/17/eWn7lYDuPB1XJ69.png" alt="IMG_42143F5BF2D2-1.jpeg" style="zoom:33%;" /><h3 id="macosä½¿ç”¨surgeè¿æ¥"><a href="#macosä½¿ç”¨surgeè¿æ¥" class="headerlink" title="macosä½¿ç”¨surgeè¿æ¥"></a>macosä½¿ç”¨surgeè¿æ¥</h3><p>æ‰“å¼€surgeé¢æ¿ï¼Œåœ¨ç­–ç•¥ä¸­é€‰æ‹©æ·»åŠ </p><img src="https://s2.loli.net/2023/05/17/ID4YgcboJdkURFX.png" alt="æˆªå±2021-03-31 ä¸Šåˆ12.43.35.png" style="zoom: 67%;" /><p>å¡«å…¥é…ç½®ä¿¡æ¯ï¼Œå‡ºç«™é€‰æ‹©å…¨å±€ä»£ç†å³å¯</p><img src="https://s2.loli.net/2023/05/17/mgIoqMwSjnZrKQ4.png" alt="æˆªå±2021-03-31 ä¸Šåˆ12.44.03.png" style="zoom:67%;" /><p><img src="https://s2.loli.net/2023/05/17/SXMNRaEvmTlju4t.png"></p><p>surgeæ•™ç¨‹åˆ°æ­¤ç»“æŸ</p><h2 id="ç¨‹åºç¼–å†™"><a href="#ç¨‹åºç¼–å†™" class="headerlink" title="ç¨‹åºç¼–å†™"></a>ç¨‹åºç¼–å†™</h2><p>æˆ‘ä»¬çš„ç›®æ ‡å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯è·å–å½“å‰IPåœ°å€å¹¶ä¸”å†™å…¥åˆ°configæ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨å¯åŠ¨æœåŠ¡å™¨æ—¶æœ‰å¼¹çª—åŒ…å«ä¸»è¦é…ç½®ä¿¡æ¯æé†’ç”¨æˆ·ã€‚</p><h3 id="è·å–ipåœ°å€"><a href="#è·å–ipåœ°å€" class="headerlink" title="è·å–ipåœ°å€"></a>è·å–ipåœ°å€</h3><p>è¿™æ˜¯ä¸€ä¸ªå¾ˆé€šç”¨çš„è·å–æœ¬æœºå±€åŸŸç½‘ipåœ°å€çš„æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹:</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è·å–å®æ—¶IPåœ°å€</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_host_ip</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æŸ¥è¯¢æœ¬æœºipåœ°å€</span></span><br><span class="line"><span class="string">    :return: ip</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line">        s.connect((<span class="string">&#x27;8.8.8.8&#x27;</span>, <span class="number">80</span>))</span><br><span class="line">        ip = s.getsockname()[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        s.close()</span><br><span class="line">    <span class="keyword">return</span> ip</span><br></pre></td></tr></table></figure><h3 id="å°†ipåœ°å€å†™å…¥é…ç½®æ–‡ä»¶"><a href="#å°†ipåœ°å€å†™å…¥é…ç½®æ–‡ä»¶" class="headerlink" title="å°†ipåœ°å€å†™å…¥é…ç½®æ–‡ä»¶"></a>å°†ipåœ°å€å†™å…¥é…ç½®æ–‡ä»¶</h3><p>é…ç½®æ–‡ä»¶çš„ç±»å‹æ˜¯jsonï¼Œåœ¨pythonä¸­æˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾åœ°ä¿®æ”¹jsonæ–‡ä»¶å†…çš„å€¼ï¼Œåªéœ€è¦çŸ¥é“keyå’Œvalueçš„å¯¹åº”å…³ç³»å³å¯ï¼Œä»£ç å¦‚ä¸‹:</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å°†IPåœ°å€å†™å…¥jsonæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">filename = <span class="string">&#x27;config.json&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = json.load(f)</span><br><span class="line">    data[<span class="string">&#x27;server&#x27;</span>] = get_host_ip() <span class="comment"># &lt;--- æ·»åŠ å®æ—¶ipåœ°å€.</span></span><br><span class="line"></span><br><span class="line">os.remove(filename)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    json.dump(data, f, indent=<span class="number">4</span>)</span><br></pre></td></tr></table></figure><p>ç”±äºä¸Šé¢çš„ get_host_ip()æ˜¯ç›´æ¥è¿”è¿˜ipåœ°å€çš„ï¼Œæ‰€ä»¥åœ¨serverçš„valueéƒ¨åˆ†æˆ‘ä»¬ç›´æ¥ä½¿ç”¨get_host_ip()å³å¯ã€‚</p><h3 id="è¯»å–åŸºç¡€é…ç½®ä¿¡æ¯"><a href="#è¯»å–åŸºç¡€é…ç½®ä¿¡æ¯" class="headerlink" title="è¯»å–åŸºç¡€é…ç½®ä¿¡æ¯"></a>è¯»å–åŸºç¡€é…ç½®ä¿¡æ¯</h3><p>åœ¨å¼€å±å¼¹çª—ä¸­æˆ‘ä»¬éœ€è¦æ˜¾ç¤ºåŸºæœ¬ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆéœ€è¦è¯»å–jsonæ–‡ä»¶å†…çš„æˆ‘ä»¬éœ€è¦çš„valueå€¼ï¼Œä»£ç å¦‚ä¸‹:</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è¯»å–json è·å–ç«¯å£/å¯†ç /åŠ å¯†æ–¹å¼</span></span><br><span class="line"></span><br><span class="line">filename = <span class="string">&#x27;config.json&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = json.load(f)</span><br><span class="line">    a = data[<span class="string">&#x27;password&#x27;</span>]</span><br><span class="line">    b = data[<span class="string">&#x27;server_port&#x27;</span>]</span><br><span class="line">    c = data[<span class="string">&#x27;method&#x27;</span>]</span><br></pre></td></tr></table></figure><h3 id="å¼¹çª—"><a href="#å¼¹çª—" class="headerlink" title="å¼¹çª—"></a>å¼¹çª—</h3><p>å¼¹çª—ä½¿ç”¨çš„æ˜¯tkinteråº“ï¼Œè¯­æ³•ä¹Ÿååˆ†ç®€å•ï¼Œä»£ç å¦‚ä¸‹:</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">talk</span>():</span></span><br><span class="line">    tkinter.messagebox.showinfo(<span class="string">&quot;æç¤º&quot;</span>,<span class="string">&quot;ä½ çš„ipåœ°å€æ˜¯&quot;</span> + get_host_ip()+<span class="string">&quot;\nä½ çš„ç«¯å£å·æ˜¯&quot;</span>+<span class="built_in">str</span>(b)+<span class="string">&quot;\nä½ çš„å¯†ç æ˜¯&quot;</span> + a + <span class="string">&quot;\nåŠ å¯†æ–¹å¼æ˜¯&quot;</span>+ c +<span class="string">&quot;\nè¯·å‹¿å…³é—­cmdçª—å£&quot;</span>)</span><br></pre></td></tr></table></figure><p>å®ç°ç•Œé¢å¦‚å›¾</p><img src="https://s2.loli.net/2023/05/17/4lzSGF9ZgBIVTL3.png" alt="æˆªå±2021-03-31 ä¸Šåˆ12.39.39.png" style="zoom:50%;" /><h3 id="ä¸»ç¨‹åº"><a href="#ä¸»ç¨‹åº" class="headerlink" title="ä¸»ç¨‹åº"></a>ä¸»ç¨‹åº</h3><p>åŸºæœ¬çš„å°ç»„ä»¶éƒ½å†™å¥½äº†æˆ‘ä»¬æœ€åå°±æŠŠç§¯æœ¨æ‹¼æˆå°è½¦è½¦ğŸš—å°±å¯ä»¥äº†,åŠ å…¥æ£€æµ‹æ˜¯å¦è¿è¡ŒæˆåŠŸçš„å¼¹çª—ï¼Œä»£ç å¦‚ä¸‹:</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¸»ç¨‹åº</span></span><br><span class="line">netopen = threading.Thread(target=runserver)<span class="comment">#, daemon=True)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    netopen.start()</span><br><span class="line">    <span class="keyword">if</span> netopen.is_alive() == <span class="literal">True</span>:</span><br><span class="line">        <span class="comment">#å¼¹çª—æ˜¾ç¤º</span></span><br><span class="line">        talk()</span><br><span class="line">        tkinter.messagebox.showinfo(<span class="string">&quot;æ¬¢è¿&quot;</span>,<span class="string">&quot;å¼€å¯æˆåŠŸ,å¦‚éœ€é€€å‡ºè¯·å…³é—­cmdçª—å£&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>  netopen.is_alive() == <span class="literal">False</span>:</span><br><span class="line">        tkinter.messagebox.showinfo(<span class="string">&quot;é€€å‡º&quot;</span>,<span class="string">&quot;æœåŠ¡å·²é€€å‡ºï¼Œè¯·æ£€æŸ¥é…ç½®&quot;</span>)</span><br><span class="line"></span><br><span class="line">    </span><br></pre></td></tr></table></figure><div class="tag-plugin note"><div class="title"><strong>quote,</strong></div><div class="body"><p>ç”±äºæˆ‘ä»¬æ˜¯è°ƒç”¨äº†å¤–éƒ¨çš„ç¨‹åºï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨çº¿ç¨‹ç›‘æ§æ¥å®ç°æ£€æµ‹æœåŠ¡å™¨ç¨‹åºæ˜¯å¦æ­£ç¡®è¿è¡Œã€‚</p></div></div><h3 id="å¤§åŠŸå‘Šæˆ"><a href="#å¤§åŠŸå‘Šæˆ" class="headerlink" title="å¤§åŠŸå‘Šæˆ"></a>å¤§åŠŸå‘Šæˆ</h3><p>å®Œæ•´æºç å¦‚ä¸‹</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> tkinter</span><br><span class="line"><span class="keyword">import</span> tkinter.messagebox</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆå§‹åŒ–å¼¹çª—</span></span><br><span class="line">root = tkinter.Tk()</span><br><span class="line">root.withdraw()</span><br><span class="line">root.wm_attributes(<span class="string">&#x27;-topmost&#x27;</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#è·å–å®æ—¶IPåœ°å€</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_host_ip</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æŸ¥è¯¢æœ¬æœºipåœ°å€</span></span><br><span class="line"><span class="string">    :return: ip</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line">        s.connect((<span class="string">&#x27;8.8.8.8&#x27;</span>, <span class="number">80</span>))</span><br><span class="line">        ip = s.getsockname()[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        s.close()</span><br><span class="line">    <span class="keyword">return</span> ip</span><br><span class="line"></span><br><span class="line"><span class="comment">#å°†IPåœ°å€å†™å…¥jsonæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">filename = <span class="string">&#x27;config.json&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = json.load(f)</span><br><span class="line">    data[<span class="string">&#x27;server&#x27;</span>] = get_host_ip() <span class="comment"># &lt;--- æ·»åŠ å®æ—¶ipåœ°å€.</span></span><br><span class="line"></span><br><span class="line">os.remove(filename)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    json.dump(data, f, indent=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¯»å–json è·å–ç«¯å£/å¯†ç /åŠ å¯†æ–¹å¼</span></span><br><span class="line"></span><br><span class="line">filename = <span class="string">&#x27;config.json&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = json.load(f)</span><br><span class="line">    a = data[<span class="string">&#x27;password&#x27;</span>]</span><br><span class="line">    b = data[<span class="string">&#x27;server_port&#x27;</span>]</span><br><span class="line">    c = data[<span class="string">&#x27;method&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">runserver</span>():</span></span><br><span class="line">    os.system(<span class="string">&#x27;shadowsocks-server.bat&#x27;</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">talk</span>():</span></span><br><span class="line">    tkinter.messagebox.showinfo(<span class="string">&quot;æç¤º&quot;</span>,<span class="string">&quot;ä½ çš„ipåœ°å€æ˜¯&quot;</span> + get_host_ip()+<span class="string">&quot;\nä½ çš„ç«¯å£å·æ˜¯&quot;</span>+<span class="built_in">str</span>(b)+<span class="string">&quot;\nä½ çš„å¯†ç æ˜¯&quot;</span> + a + <span class="string">&quot;\nåŠ å¯†æ–¹å¼æ˜¯&quot;</span>+ c +<span class="string">&quot;\nè¯·å‹¿å…³é—­cmdçª—å£&quot;</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸»ç¨‹åº</span></span><br><span class="line">netopen = threading.Thread(target=runserver)<span class="comment">#, daemon=True)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    netopen.start()</span><br><span class="line">    <span class="keyword">if</span> netopen.is_alive() == <span class="literal">True</span>:</span><br><span class="line">        <span class="comment">#å¼¹çª—æ˜¾ç¤º</span></span><br><span class="line">        talk()</span><br><span class="line">        tkinter.messagebox.showinfo(<span class="string">&quot;æ¬¢è¿&quot;</span>,<span class="string">&quot;å¼€å¯æˆåŠŸ,å¦‚éœ€é€€å‡ºè¯·å…³é—­cmdçª—å£&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>  netopen.is_alive() == <span class="literal">False</span>:</span><br><span class="line">        tkinter.messagebox.showinfo(<span class="string">&quot;é€€å‡º&quot;</span>,<span class="string">&quot;æœåŠ¡å·²é€€å‡ºï¼Œè¯·æ£€æŸ¥é…ç½®&quot;</span>)</span><br></pre></td></tr></table></figure><p>é€»è¾‘è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼ŒåŸºæœ¬å°±æ˜¯åœ¨è°ƒç”¨ä¸åŒçš„ç»„ä»¶ï¼Œä½†æ˜¯æˆå“è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œå¤§å¤§é™ä½äº†å­¦ä¹ å’Œä½¿ç”¨æˆæœ¬ã€‚</p><h2 id="æœ€åæƒ³è¯´çš„è¯"><a href="#æœ€åæƒ³è¯´çš„è¯" class="headerlink" title="æœ€åæƒ³è¯´çš„è¯"></a>æœ€åæƒ³è¯´çš„è¯</h2><p>è¿™ä¸ªæ–¹æ³•å¯¹äºæ ¡å›­ç½‘æ¥è¯´åªèƒ½ç®—æ˜¯å¦è¾Ÿè¹Šå¾„ï¼Œå¹¶æ²¡æœ‰å®Œå…¨ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ï¼Œå¦‚æœå¤©ç¿¼æ ¡å›­çš„å®¢æˆ·ç«¯èƒ½å†™å¾—å¥½ä¸€ç‚¹ï¼Œè¿æ¥è®¾å¤‡æ•°èƒ½æ”¾å®½ä¸€ç‚¹ï¼Œæƒ³å¿…ä¼šå—åˆ°æ›´å¤šå­¦ç”Ÿçš„æ¥çº³ã€‚See you next timeï¼æ¬¢è¿è¯„è®ºï¼</p>]]></content>
      
      
      <categories>
          
          <category> pythonå¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> ç½‘ç»œ </tag>
            
            <tag> æœåŠ¡å™¨ </tag>
            
            <tag> SS </tag>
            
            <tag> æ ¡å›­ç½‘ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
